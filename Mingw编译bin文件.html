<h1 itemprop="name" style="background-color: white; border: 0px; color: #242729; font-family: Arial, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 22px; font-stretch: inherit; font-variant-east-asian: inherit; font-variant-numeric: inherit; font-weight: inherit; line-height: 1.3; margin: 0px 0px 0.5em; padding: 0px; vertical-align: baseline;">
<a class="question-hyperlink" href="https://stackoverflow.com/questions/14168173/mingw-gcc-compile-raw-binary-with-data" style="border: 0px; color: #242729; font-family: inherit; font-size: 24px; font-stretch: inherit; font-style: inherit; font-variant: inherit; line-height: 1.35; margin: 0px 0px 0.5em; padding: 0px; text-decoration-line: none; vertical-align: baseline;">MinGW GCC Compile raw binary with data?</a></h1>
<div>
<br /></div>
<div>
<table style="background-color: white; border-collapse: collapse; border-spacing: 0px; border: 0px; color: #242729; font-family: Arial, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 13px; font-stretch: inherit; font-variant-east-asian: inherit; font-variant-numeric: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"><tbody style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">
<tr style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"><td class="votecell" style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px 15px 0px 0px; vertical-align: top;"><div class="vote" style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; min-width: 46px; padding: 0px; text-align: center; vertical-align: baseline;">
<span class="vote-count-post " itemprop="upvoteCount" style="border: 0px; color: #6a737c; display: block; font-family: inherit; font-size: 20px; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 8px 0px; padding: 0px; vertical-align: baseline;"><br /></span><a class="vote-down-off" href="https://www.blogger.com/null" style="background-image: url(&quot;img/sprites.svg?v=1b3cdae197be&quot;), none; background-position: 0px -220px; background-repeat: no-repeat; background-size: initial; border: 0px; color: #0077cc; cursor: pointer; display: block; font-family: inherit; font-size: 1px; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; height: 30px; line-height: inherit; margin: 0px auto 10px; overflow: hidden; padding: 0px; text-indent: -9999em; vertical-align: baseline; width: 40px;" title="This question does not show any research effort; it is unclear or not useful">down vote</a><a class="star-off" href="https://stackoverflow.com/questions/14168173/mingw-gcc-compile-raw-binary-with-data#" style="background-image: url(&quot;img/sprites.svg?v=1b3cdae197be&quot;), none; background-position: 0px -120px; background-repeat: no-repeat; background-size: initial; border: 0px; color: #0077cc; display: block; font-family: inherit; font-size: 1px; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; height: 30px; line-height: inherit; margin: 0px auto 2px; overflow: hidden; padding: 0px; text-decoration-line: none; text-indent: -9999em; vertical-align: baseline; width: 40px;">favorite</a><div class="favoritecount" style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">
<span style="border: 0px; color: #6a737c; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"></span></div>
</div>
</td><td class="postcell" style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: top;"><div style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">
<div class="post-text" itemprop="text" style="border: 0px; font-family: inherit; font-size: 15px; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: 1.3; margin: 0px 0px 5px; padding: 0px; vertical-align: baseline; width: 660px; word-wrap: break-word;">
<div style="border: 0px; clear: both; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin-bottom: 1em; padding: 0px; vertical-align: baseline;">
I researched this earlier and read that I could use objcopy to achieve this, however there is no data. I have a hello world program with a string literal in it (in main()) and this data is not in my binary. I need to do this so I can compile raw binaries for my OS. My OS does not have any sort of executable loader (it simply loads programs into RAM then jumps)</div>
<div style="border: 0px; clear: both; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin-bottom: 1em; padding: 0px; vertical-align: baseline;">
My build script is</div>
<pre class="lang-c prettyprint prettyprinted" style="background-color: #eff0f1; border: 0px; color: #393318; font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; font-size: 13px; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin-bottom: 1em; max-height: 600px; overflow: auto; padding: 5px; vertical-align: baseline; width: auto; word-wrap: normal;"><code style="border: 0px; font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline; white-space: inherit;"><span class="pln" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">bin\cc </span><span class="pun" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">-</span><span class="pln" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">c test</span><span class="pun" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">.</span><span class="pln" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">c
bin\objcopy </span><span class="pun" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">-</span><span class="pln" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">O binary test</span><span class="pun" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">.</span><span class="pln" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">o binfile</span></code></pre>
<div style="border: 0px; clear: both; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin-bottom: 1em; padding: 0px; vertical-align: baseline;">
and it is target on x86</div>
<div style="border: 0px; clear: both; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin-bottom: 1em; padding: 0px; vertical-align: baseline;">
My source code is</div>
<pre class="lang-c prettyprint prettyprinted" style="background-color: #eff0f1; border: 0px; color: #393318; font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; font-size: 13px; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin-bottom: 1em; max-height: 600px; overflow: auto; padding: 5px; vertical-align: baseline; width: auto; word-wrap: normal;"><code style="border: 0px; font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline; white-space: inherit;"><span class="kwd" style="border: 0px; color: #101094; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">void</span><span class="pln" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"> print</span><span class="pun" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">(</span><span class="kwd" style="border: 0px; color: #101094; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">char</span><span class="pun" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">*</span><span class="pln" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"> dat</span><span class="pun" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">)</span><span class="pln" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">
</span><span class="pun" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">{</span><span class="pln" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">
     __asm__ </span><span class="pun" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">(</span><span class="str" style="border: 0px; color: #7d2727; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">"movl %esi,dat"</span><span class="pun" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">);</span><span class="pln" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">
     __asm__ </span><span class="pun" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">(</span><span class="str" style="border: 0px; color: #7d2727; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">"movl %eax,1"</span><span class="pun" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">);</span><span class="pln" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">
     __asm__ </span><span class="pun" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">(</span><span class="str" style="border: 0px; color: #7d2727; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">"int $0x80"</span><span class="pun" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">);</span><span class="pln" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">
</span><span class="pun" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">}</span><span class="pln" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">

main</span><span class="pun" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">()</span><span class="pln" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">
</span><span class="pun" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">{</span><span class="pln" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">
    print</span><span class="pun" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">(</span><span class="str" style="border: 0px; color: #7d2727; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">"Hello, world!"</span><span class="pun" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">);</span><span class="pln" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">
</span><span class="pun" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">}</span></code></pre>
<div style="border: 0px; clear: both; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin-bottom: 1em; padding: 0px; vertical-align: baseline;">
And yet Hello, world can not be found in the binary, the output in ANSII is</div>
<pre class="lang-c prettyprint prettyprinted" style="background-color: #eff0f1; border: 0px; color: #393318; font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; font-size: 13px; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin-bottom: 1em; max-height: 600px; overflow: auto; padding: 5px; vertical-align: baseline; width: auto; word-wrap: normal;"><code style="border: 0px; font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline; white-space: inherit;"><span class="pun" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">.........</span><span class="pln" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">zR</span><span class="pun" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">..|......ˆ....................</span><span class="pln" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">A</span><span class="pun" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">..….</span><span class="pln" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">B</span><span class="pun" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">..</span><span class="pln" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">N</span><span class="pun" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">...Å......&lt;............</span><span class="pln" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">A</span><span class="pun" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">..….</span><span class="pln" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">B</span><span class="pun" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">..</span><span class="pln" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">X</span><span class="pun" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">Å.....</span></code></pre>
<div style="border: 0px; clear: both; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin-bottom: 1em; padding: 0px; vertical-align: baseline;">
With no Hello, World</div>
<div style="border: 0px; clear: both; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin-bottom: 1em; padding: 0px; vertical-align: baseline;">
Ok so as I said I got this working somewhat however the contents of the .rdata are getting placed infront of the code. This will not work because the CPU will try to execute the contents of .rdata instead of the code, which will crash my OS. The new contents is</div>
<pre class="lang-c prettyprint prettyprinted" style="background-color: #eff0f1; border: 0px; color: #393318; font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; font-size: 13px; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin-bottom: 1em; max-height: 600px; overflow: auto; padding: 5px; vertical-align: baseline; width: auto; word-wrap: normal;"><code style="border: 0px; font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline; white-space: inherit;"><span class="typ" style="border: 0px; color: #2b91af; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">Hello</span><span class="pun" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">,</span><span class="pln" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"> world</span><span class="pun" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">!...]Ã</span><span class="pln" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">U</span><span class="pun" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">‰åƒäðƒì.è....Ç.</span><span class="pln" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">$</span><span class="pun" style="border: 0px; color: #303336; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">....èÔÿÿÿÉÃ..</span></code></pre>
<div style="border: 0px; clear: both; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin-bottom: 1em; padding: 0px; vertical-align: baseline;">
As you can see the Hello, World is first, I am sort of a n00b to linkers and such so I really do not know how I can move the .rdata section after the .text section</div>
<div style="border: 0px; clear: both; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin-bottom: 1em; padding: 0px; vertical-align: baseline;">
<br /></div>
<table style="border-collapse: collapse; border-spacing: 0px; border: 0px; color: #242729; font-size: 13px; font-stretch: inherit; font-variant-east-asian: inherit; font-variant-numeric: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"><tbody style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">
<tr style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"><td style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"><div class="comments js-comments-container" id="comments-14168173" style="-webkit-tap-highlight-color: rgba(255, 255, 255, 0); border-bottom-color: initial; border-bottom-style: initial; border-image: initial; border-left-color: initial; border-left-style: initial; border-right-color: initial; border-right-style: initial; border-top-color: rgb(228, 230, 232); border-top-style: solid; border-width: 1px 0px 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 10px 0px 0px; padding: 0px 0px 10px; vertical-align: baseline; width: 660px;">
<table style="border-collapse: collapse; border-spacing: 0px; border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline; width: 660px;"><tbody class="js-comments-list" data-addlink-disabled="true" data-canpost="false" data-cansee="true" data-comments-unavailable="false" data-remaining-comments-count="2" style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">
<tr class="comment js-comment " id="comment-19630710" style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"><td class="js-comment-actions" style="border-bottom-color: rgb(239, 240, 241); border-bottom-style: solid; border-image: initial; border-left-color: initial; border-left-style: initial; border-right-color: initial; border-right-style: initial; border-top-color: initial; border-top-style: initial; border-width: 0px 0px 1px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: 1.3; margin: 0px; padding: 6px 6px 6px 0px; vertical-align: top;"><table style="border-collapse: collapse; border-spacing: 0px; border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"><tbody style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">
<tr style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"><td class=" comment-score" style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">&nbsp;&nbsp;</td><td style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">&nbsp;</td></tr>
</tbody></table>
</td><td class="comment-text js-comment-text-and-form" style="border-bottom-color: rgb(239, 240, 241); border-bottom-style: solid; border-image: initial; border-left-color: initial; border-left-style: initial; border-right-color: initial; border-right-style: initial; border-top-color: initial; border-top-style: initial; border-width: 0px 0px 1px; font-family: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: 1.3; margin: 0px; padding: 6px 6px 6px 0px; vertical-align: top;"><div class="comment-body" style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">
<span class="comment-copy" style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">Ok I figured out how to get the data segment by adding -j rdata, but the rdata section is before the machine code, how can I move the rdata after the .text section so it will get executed?</span>&nbsp;–&nbsp;<a class="comment-user owner" href="https://stackoverflow.com/users/1454902/user1454902" style="background-color: #e0eaf1; border: 0px; color: #0077cc; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 1px 5px; text-decoration-line: none; vertical-align: baseline; white-space: nowrap;" title="465 reputation">user1454902</a>&nbsp;<span class="comment-date" dir="ltr" style="border-bottom: none; border-image: initial; border-left: 0px; border-right: 0px; border-top: 0px; color: #9199a1; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"><a class="comment-link" href="https://stackoverflow.com/questions/14168173/mingw-gcc-compile-raw-binary-with-data#comment19630710_14168173" style="border-bottom: none; border-image: initial; border-left: 0px; border-right: 0px; border-top: 0px; color: #005999; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; text-decoration-line: none; vertical-align: baseline;">Jan 5 '13 at 3:28</a></span></div>
</td></tr>
<tr class="comment js-comment " id="comment-19630768" style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"><td class="js-comment-actions" style="border-bottom-color: rgb(239, 240, 241); border-bottom-style: solid; border-image: initial; border-left-color: initial; border-left-style: initial; border-right-color: initial; border-right-style: initial; border-top-color: initial; border-top-style: initial; border-width: 0px 0px 1px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: 1.3; margin: 0px; padding: 6px 6px 6px 0px; vertical-align: top;"><table style="border-collapse: collapse; border-spacing: 0px; border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"><tbody style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">
<tr style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"><td class=" comment-score" style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">&nbsp;&nbsp;</td><td style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">&nbsp;</td></tr>
</tbody></table>
</td><td class="comment-text js-comment-text-and-form" style="border-bottom-color: rgb(239, 240, 241); border-bottom-style: solid; border-image: initial; border-left-color: initial; border-left-style: initial; border-right-color: initial; border-right-style: initial; border-top-color: initial; border-top-style: initial; border-width: 0px 0px 1px; font-family: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: 1.3; margin: 0px; padding: 6px 6px 6px 0px; vertical-align: top;"><div class="comment-body" style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">
<span class="comment-copy" style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">may i see the whole thing with the rdata?</span>&nbsp;–&nbsp;<a class="comment-user" href="https://stackoverflow.com/users/883015/joe-df" style="border: 0px; color: #0077cc; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; text-decoration-line: none; vertical-align: baseline; white-space: nowrap;" title="3,120 reputation">Joe DF</a>&nbsp;<span class="comment-date" dir="ltr" style="border-bottom: none; border-image: initial; border-left: 0px; border-right: 0px; border-top: 0px; color: #9199a1; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"><a class="comment-link" href="https://stackoverflow.com/questions/14168173/mingw-gcc-compile-raw-binary-with-data#comment19630768_14168173" style="border-bottom: none; border-image: initial; border-left: 0px; border-right: 0px; border-top: 0px; color: #005999; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; text-decoration-line: none; vertical-align: baseline;">Jan 5 '13 at 3:34</a></span></div>
</td></tr>
<tr class="comment js-comment " id="comment-19630822" style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"><td class="js-comment-actions" style="border-bottom-color: rgb(239, 240, 241); border-bottom-style: solid; border-image: initial; border-left-color: initial; border-left-style: initial; border-right-color: initial; border-right-style: initial; border-top-color: initial; border-top-style: initial; border-width: 0px 0px 1px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: 1.3; margin: 0px; padding: 6px 6px 6px 0px; vertical-align: top;"><table style="border-collapse: collapse; border-spacing: 0px; border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"><tbody style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">
<tr style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"><td class=" comment-score" style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">&nbsp;&nbsp;</td><td style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">&nbsp;</td></tr>
</tbody></table>
</td><td class="comment-text js-comment-text-and-form" style="border-bottom-color: rgb(239, 240, 241); border-bottom-style: solid; border-image: initial; border-left-color: initial; border-left-style: initial; border-right-color: initial; border-right-style: initial; border-top-color: initial; border-top-style: initial; border-width: 0px 0px 1px; font-family: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: 1.3; margin: 0px; padding: 6px 6px 6px 0px; vertical-align: top;"><div class="comment-body" style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">
<span class="comment-copy" style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">Yeah there I just edited it</span>&nbsp;–&nbsp;<a class="comment-user owner" href="https://stackoverflow.com/users/1454902/user1454902" style="background-color: #e0eaf1; border: 0px; color: #0077cc; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 1px 5px; text-decoration-line: none; vertical-align: baseline; white-space: nowrap;" title="465 reputation">user1454902</a>&nbsp;<span class="comment-date" dir="ltr" style="border-bottom: none; border-image: initial; border-left: 0px; border-right: 0px; border-top: 0px; color: #9199a1; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"><a class="comment-link" href="https://stackoverflow.com/questions/14168173/mingw-gcc-compile-raw-binary-with-data#comment19630822_14168173" style="border-bottom: none; border-image: initial; border-left: 0px; border-right: 0px; border-top: 0px; color: #005999; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; text-decoration-line: none; vertical-align: baseline;">Jan 5 '13 at 3:40</a></span></div>
</td></tr>
<tr class="comment js-comment " id="comment-19630902" style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"><td class="js-comment-actions" style="border-bottom-color: rgb(239, 240, 241); border-bottom-style: solid; border-image: initial; border-left-color: initial; border-left-style: initial; border-right-color: initial; border-right-style: initial; border-top-color: initial; border-top-style: initial; border-width: 0px 0px 1px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: 1.3; margin: 0px; padding: 6px 6px 6px 0px; vertical-align: top;"><table style="border-collapse: collapse; border-spacing: 0px; border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"><tbody style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">
<tr style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"><td class=" comment-score" style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">&nbsp;&nbsp;</td><td style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">&nbsp;</td></tr>
</tbody></table>
</td><td class="comment-text js-comment-text-and-form" style="border-bottom-color: rgb(239, 240, 241); border-bottom-style: solid; border-image: initial; border-left-color: initial; border-left-style: initial; border-right-color: initial; border-right-style: initial; border-top-color: initial; border-top-style: initial; border-width: 0px 0px 1px; font-family: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: 1.3; margin: 0px; padding: 6px 6px 6px 0px; vertical-align: top;"><div class="comment-body" style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">
<span class="comment-copy" style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">OH!, since "r" comes before "t" in the alphabet :P, try to read it backwards? normal order -&gt; .data .rdata .text Change it to read -&gt; .text .rdata .data? maybe?.. read the binaries in separate parts... Or if im completely wrong store the content in a string, then split the string? or use&nbsp;<a href="http://www.cplusplus.com/reference/cstring/strncpy/" rel="nofollow noreferrer" style="border: 0px; color: #005999; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; text-decoration-line: none; vertical-align: baseline;">cplusplus.com/reference/cstring/strncpy</a>&nbsp;to copy characters from the string and store them directly into a array? -&gt; string[] ??</span>&nbsp;–&nbsp;<a class="comment-user" href="https://stackoverflow.com/users/883015/joe-df" style="border: 0px; color: #0077cc; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; text-decoration-line: none; vertical-align: baseline; white-space: nowrap;" title="3,120 reputation">Joe DF</a>&nbsp;<span class="comment-date" dir="ltr" style="border-bottom: none; border-image: initial; border-left: 0px; border-right: 0px; border-top: 0px; color: #9199a1; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"><a class="comment-link" href="https://stackoverflow.com/questions/14168173/mingw-gcc-compile-raw-binary-with-data#comment19630902_14168173" style="border-bottom: none; border-image: initial; border-left: 0px; border-right: 0px; border-top: 0px; color: #005999; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; text-decoration-line: none; vertical-align: baseline;">Jan 5 '13 at 3:48</a></span><span class="edited-yes" style="background-image: url(&quot;img/sprites.svg?v=1b3cdae197be&quot;), none; background-position: -20px -340px; background-repeat: no-repeat; background-size: initial; border: 0px; display: inline-block; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; height: 15px; line-height: 12px; margin: 0px; overflow: hidden; padding: 0px; vertical-align: text-bottom; width: 16px;" title="this comment was edited 1 time"></span></div>
</td></tr>
<tr class="comment js-comment " id="comment-19630949" style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"><td class="js-comment-actions" style="border-bottom-color: rgb(239, 240, 241); border-bottom-style: solid; border-image: initial; border-left-color: initial; border-left-style: initial; border-right-color: initial; border-right-style: initial; border-top-color: initial; border-top-style: initial; border-width: 0px 0px 1px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: 1.3; margin: 0px; padding: 6px 6px 6px 0px; vertical-align: top;"><table style="border-collapse: collapse; border-spacing: 0px; border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"><tbody style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">
<tr style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"><td class=" comment-score" style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">&nbsp;&nbsp;</td><td style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">&nbsp;</td></tr>
</tbody></table>
</td><td class="comment-text js-comment-text-and-form" style="border-bottom-color: rgb(239, 240, 241); border-bottom-style: solid; border-image: initial; border-left-color: initial; border-left-style: initial; border-right-color: initial; border-right-style: initial; border-top-color: initial; border-top-style: initial; border-width: 0px 0px 1px; font-family: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: 1.3; margin: 0px; padding: 6px 6px 6px 0px; vertical-align: top;"><div class="comment-body" style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">
<span class="comment-copy" style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">Yeah, I already tried that but it appears that objcopy just copies based on the order were the sections are in the object file, but thanks anyway. I guess I'll have to write a linker script to do this.</span>&nbsp;–&nbsp;<a class="comment-user owner" href="https://stackoverflow.com/users/1454902/user1454902" style="background-color: #e0eaf1; border: 0px; color: #0077cc; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 1px 5px; text-decoration-line: none; vertical-align: baseline; white-space: nowrap;" title="465 reputation">user1454902</a>&nbsp;<span class="comment-date" dir="ltr" style="border-bottom: none; border-image: initial; border-left: 0px; border-right: 0px; border-top: 0px; color: #9199a1; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"><a class="comment-link" href="https://stackoverflow.com/questions/14168173/mingw-gcc-compile-raw-binary-with-data#comment19630949_14168173" style="border-bottom: none; border-image: initial; border-left: 0px; border-right: 0px; border-top: 0px; color: #005999; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; text-decoration-line: none; vertical-align: baseline;">Jan 5 '13 at 3:54</a></span></div>
</td></tr>
<tr class="comment js-comment" id="comment-19631002" style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"><td class="js-comment-actions" style="border-bottom-color: rgb(239, 240, 241); border-bottom-style: solid; border-image: initial; border-left-color: initial; border-left-style: initial; border-right-color: initial; border-right-style: initial; border-top-color: initial; border-top-style: initial; border-width: 0px 0px 1px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: 1.3; margin: 0px; padding: 6px 6px 6px 0px; vertical-align: top;"><table style="border-collapse: collapse; border-spacing: 0px; border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"><tbody style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">
<tr style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"><td class=" comment-score" style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">&nbsp;&nbsp;</td><td style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">&nbsp;</td></tr>
</tbody></table>
</td><td class="comment-text js-comment-text-and-form" style="border-bottom-color: rgb(239, 240, 241); border-bottom-style: solid; border-image: initial; border-left-color: initial; border-left-style: initial; border-right-color: initial; border-right-style: initial; border-top-color: initial; border-top-style: initial; border-width: 0px 0px 1px; font-family: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: 1.3; margin: 0px; padding: 6px 6px 6px 0px; vertical-align: top;"><div class="comment-body" style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">
<span class="comment-copy" style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">here! :D&nbsp;<a href="http://wiki.osdev.org/Linker_Scripts" rel="nofollow noreferrer" style="border: 0px; color: #005999; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; text-decoration-line: none; vertical-align: baseline;">wiki.osdev.org/Linker_Scripts</a>&nbsp;found something.. goto SECTIONS.</span>&nbsp;–&nbsp;<a class="comment-user" href="https://stackoverflow.com/users/883015/joe-df" style="border: 0px; color: #0077cc; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; text-decoration-line: none; vertical-align: baseline; white-space: nowrap;" title="3,120 reputation">Joe DF</a>&nbsp;<span class="comment-date" dir="ltr" style="border-bottom: none; border-image: initial; border-left: 0px; border-right: 0px; border-top: 0px; color: #9199a1; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"><a class="comment-link" href="https://stackoverflow.com/questions/14168173/mingw-gcc-compile-raw-binary-with-data#comment19631002_14168173" style="border-bottom: none; border-image: initial; border-left: 0px; border-right: 0px; border-top: 0px; color: #005999; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; text-decoration-line: none; vertical-align: baseline;">Jan 5 '13 at 4:00</a></span></div>
</td></tr>
<tr class="comment js-comment" id="comment-19631062" style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"><td class="js-comment-actions" style="border-bottom-color: rgb(239, 240, 241); border-bottom-style: solid; border-image: initial; border-left-color: initial; border-left-style: initial; border-right-color: initial; border-right-style: initial; border-top-color: initial; border-top-style: initial; border-width: 0px 0px 1px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: 1.3; margin: 0px; padding: 6px 6px 6px 0px; vertical-align: top;"><table style="border-collapse: collapse; border-spacing: 0px; border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"><tbody style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">
<tr style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"><td class=" comment-score" style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">&nbsp;&nbsp;</td><td style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">&nbsp;</td></tr>
</tbody></table>
</td><td class="comment-text js-comment-text-and-form" style="border-bottom-color: rgb(239, 240, 241); border-bottom-style: solid; border-image: initial; border-left-color: initial; border-left-style: initial; border-right-color: initial; border-right-style: initial; border-top-color: initial; border-top-style: initial; border-width: 0px 0px 1px; font-family: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: 1.3; margin: 0px; padding: 6px 6px 6px 0px; vertical-align: top;"><div class="comment-body" style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">
<span class="comment-copy" style="border: 0px; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">Thanks! That will definitely help!</span>&nbsp;–&nbsp;<a class="comment-user owner" href="https://stackoverflow.com/users/1454902/user1454902" style="background-color: #e0eaf1; border: 0px; color: #0077cc; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 1px 5px; text-decoration-line: none; vertical-align: baseline; white-space: nowrap;" title="465 reputation">user1454902</a>&nbsp;<span class="comment-date" dir="ltr" style="border-bottom: none; border-image: initial; border-left: 0px; border-right: 0px; border-top: 0px; color: #9199a1; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"><a class="comment-link" href="https://stackoverflow.com/questions/14168173/mingw-gcc-compile-raw-binary-with-data#comment19631062_14168173" style="border-bottom: none; border-image: initial; border-left: 0px; border-right: 0px; border-top: 0px; color: #005999; font-family: inherit; font-size: inherit; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; text-decoration-line: none; vertical-align: baseline;">Jan 5 '13 at 4:07</a></span></div>
</td></tr>
</tbody></table>
</div>
</td></tr>
</tbody></table>
</div>
</div>
</td></tr>
</tbody></table>
</div>
<div class="titlepage" style="background-color: white; font-family: serif;">
<h2 class="title" style="clear: both; color: #880000; font-family: dejavusans, verdana, sans-serif; font-size: 23.2px;">
7.&nbsp;Linker Script File</h2>
</div>
<div style="background-color: white; font-family: serif;">
As mentioned in the previous section, section merging and placement is done by the linker. The programmer can control how the sections are merged, and at what locations they are placed in memory through a linker script file. A very simple linker script file, is shown below.</div>
<div class="example" style="background-color: white; font-family: serif;">
<a href="https://www.blogger.com/null" id="d0e1048" name="d0e1048"></a><div class="title" style="color: #880000; font-family: dejavusans, verdana, sans-serif; font-weight: bold;">
<b>Listing&nbsp;6.&nbsp;Basic linker script</b></div>
<div class="example-contents">
<pre class="programlisting"><code class="no-highlight" style="background: rgb(238, 238, 238); border: thin solid rgb(204, 204, 204); display: block; font-family: dejavusansmono, courier, monospace; font-size: 22.4px; padding: 0.5em;">SECTIONS { <a href="https://www.blogger.com/null" id="CO3-1" name="CO3-1"></a>❶
        . = 0x00000000; <a href="https://www.blogger.com/null" id="CO3-2" name="CO3-2"></a>❷
        .text : { <a href="https://www.blogger.com/null" id="CO3-3" name="CO3-3"></a>❸
                abc.o (.text);
                def.o (.text);
        } <a href="https://www.blogger.com/null" id="CO3-4" name="CO3-4"></a>❹
}</code>
</pre>
</div>
</div>
<br class="example-break" style="background-color: white; font-family: serif;" />
<div class="calloutlist" style="background-color: white; font-family: serif;">
<table border="0" summary="Callout list"><tbody>
<tr><td align="left" valign="top" width="5%"><a href="http://www.bravegnu.org/gnu-eprog/lds.html#CO3-1">❶</a></td><td align="left" valign="top">The&nbsp;<code class="literal" style="color: #008800; font-family: dejavusansmono, courier, monospace; font-size: 17.6px;">SECTIONS</code>&nbsp;command is the most important linker command, it specifies how the sections are to be merged and at what location they are to be placed.</td></tr>
<tr><td align="left" valign="top" width="5%"><a href="http://www.bravegnu.org/gnu-eprog/lds.html#CO3-2">❷</a></td><td align="left" valign="top">Within the block following the&nbsp;<code class="literal" style="color: #008800; font-family: dejavusansmono, courier, monospace; font-size: 17.6px;">SECTIONS</code>&nbsp;command, the&nbsp;<code class="literal" style="color: #008800; font-family: dejavusansmono, courier, monospace; font-size: 17.6px;">.</code>&nbsp;(period) represents the location counter. The location is always initialised to&nbsp;<code class="literal" style="color: #008800; font-family: dejavusansmono, courier, monospace; font-size: 17.6px;">0x0</code>. It can be modified by assigning a new value to it. Setting the value to&nbsp;<code class="literal" style="color: #008800; font-family: dejavusansmono, courier, monospace; font-size: 17.6px;">0x0</code>&nbsp;at the beginning is superfluous.</td></tr>
<tr><td align="left" valign="top" width="5%"><a href="http://www.bravegnu.org/gnu-eprog/lds.html#CO3-3">❸</a>&nbsp;<a href="http://www.bravegnu.org/gnu-eprog/lds.html#CO3-4">❹</a></td><td align="left" valign="top">This part of the script specifies that, the&nbsp;<code class="literal" style="color: #008800; font-family: dejavusansmono, courier, monospace; font-size: 17.6px;">.text</code>&nbsp;section from the input files&nbsp;<code class="literal" style="color: #008800; font-family: dejavusansmono, courier, monospace; font-size: 17.6px;">abc.o</code>&nbsp;and&nbsp;<code class="literal" style="color: #008800; font-family: dejavusansmono, courier, monospace; font-size: 17.6px;">def.o</code>&nbsp;should go to the&nbsp;<code class="literal" style="color: #008800; font-family: dejavusansmono, courier, monospace; font-size: 17.6px;">.text</code>&nbsp;section of the output file.</td></tr>
</tbody></table>
</div>
<div style="background-color: white; font-family: serif;">
The linker script can be further simplified and generalised by using the wild card character&nbsp;<code class="literal" style="color: #008800; font-family: dejavusansmono, courier, monospace; font-size: 17.6px;">*</code>&nbsp;instead of individually specifying the file names.</div>
<div class="example" style="background-color: white; font-family: serif;">
<a href="https://www.blogger.com/null" id="d0e1103" name="d0e1103"></a><div class="title" style="color: #880000; font-family: dejavusans, verdana, sans-serif; font-weight: bold;">
<b>Listing&nbsp;7.&nbsp;Wildcard in linker scripts</b></div>
<div class="example-contents">
<pre class="programlisting"><code class="no-highlight" style="background: rgb(238, 238, 238); border: thin solid rgb(204, 204, 204); display: block; font-family: dejavusansmono, courier, monospace; font-size: 22.4px; padding: 0.5em;">SECTIONS {
        . = 0x00000000;
        .text : { * (.text); }
}</code>
</pre>
</div>
</div>
<br class="example-break" style="background-color: white; font-family: serif;" />
<div style="background-color: white; font-family: serif;">
If the program contains both&nbsp;<code class="literal" style="color: #008800; font-family: dejavusansmono, courier, monospace; font-size: 17.6px;">.text</code>&nbsp;and&nbsp;<code class="literal" style="color: #008800; font-family: dejavusansmono, courier, monospace; font-size: 17.6px;">.data</code>&nbsp;sections, the&nbsp;<code class="literal" style="color: #008800; font-family: dejavusansmono, courier, monospace; font-size: 17.6px;">.data</code>&nbsp;section merging and location can be specified as shown below.</div>
<div class="example" style="background-color: white; font-family: serif;">
<a href="https://www.blogger.com/null" id="linker1" name="linker1"></a><div class="title" style="color: #880000; font-family: dejavusans, verdana, sans-serif; font-weight: bold;">
<b>Listing&nbsp;8.&nbsp;Multiple sections in linker scripts</b></div>
<div class="example-contents">
<pre class="programlisting"><code class="no-highlight" style="background: rgb(238, 238, 238); border: thin solid rgb(204, 204, 204); display: block; font-family: dejavusansmono, courier, monospace; font-size: 22.4px; padding: 0.5em;">SECTIONS {
         . = 0x00000000;
         .text : { * (.text); }

         . = 0x00000400;
         .data : { * (.data); }
}</code>
</pre>
</div>
</div>
<br class="example-break" style="background-color: white; font-family: serif;" />
<div style="background-color: white; font-family: serif;">
Here, the&nbsp;<code class="literal" style="color: #008800; font-family: dejavusansmono, courier, monospace; font-size: 17.6px;">.text</code>&nbsp;section is located at&nbsp;<code class="literal" style="color: #008800; font-family: dejavusansmono, courier, monospace; font-size: 17.6px;">0x0</code>&nbsp;and&nbsp;<code class="literal" style="color: #008800; font-family: dejavusansmono, courier, monospace; font-size: 17.6px;">.data</code>&nbsp;is located at&nbsp;<code class="literal" style="color: #008800; font-family: dejavusansmono, courier, monospace; font-size: 17.6px;">0x400</code>. Note that, if the location counter is not assigned a different value, the&nbsp;<code class="literal" style="color: #008800; font-family: dejavusansmono, courier, monospace; font-size: 17.6px;">.text</code>&nbsp;and&nbsp;<code class="literal" style="color: #008800; font-family: dejavusansmono, courier, monospace; font-size: 17.6px;">.data</code>&nbsp;sections will be located at adjacent memory locations.</div>
<div class="section" style="background-color: white; font-family: serif;" title="7.1. Linker Script Example">
<div class="titlepage">
<h3 class="title" style="color: #880000; font-family: dejavusans, verdana, sans-serif; font-size: 20.8px;">
<a href="https://www.blogger.com/null" name="_linker_script_example"></a>7.1.&nbsp;Linker Script Example</h3>
</div>
To demonstrate the use of linker scripts, we will use the linker script shown in&nbsp;<a class="xref" href="http://www.bravegnu.org/gnu-eprog/lds.html#linker1" title="Listing 8. Multiple sections in linker scripts">Listing&nbsp;8, “Multiple sections in linker scripts”</a>&nbsp;to control the placement of a program’s&nbsp;<code class="literal" style="color: #008800; font-family: dejavusansmono, courier, monospace; font-size: 17.6px;">.text</code>&nbsp;and&nbsp;<code class="literal" style="color: #008800; font-family: dejavusansmono, courier, monospace; font-size: 17.6px;">.data</code>&nbsp;section. We will use a slightly modified version of the sum of array program for this purpose. The code is shown below.<br />
<pre class="programlisting"><code class="armasm" style="background: rgb(238, 238, 238); border: thin solid rgb(204, 204, 204); display: block; font-family: dejavusansmono, courier, monospace; font-size: 22.4px; padding: 0.5em;">        .<span class="hl-directive" style="color: maroon;">data</span>
<b class="hl-keyword">arr:</b>    .<span class="hl-directive" style="color: maroon;">byte</span> <span class="hl-number" style="color: #008800;">10</span>, <span class="hl-number" style="color: #008800;">20</span>, <span class="hl-number" style="color: #008800;">25</span>        <i class="hl-comment" style="color: #888888;">@ Read-only array of bytes</i>
<b class="hl-keyword">eoa:</b>                            <i class="hl-comment" style="color: #888888;">@ Address of end of array + 1</i>

        .<span class="hl-directive" style="color: maroon;">text</span>
<b class="hl-keyword">start:</b>
        ldr   r0, =eoa          <i class="hl-comment" style="color: #888888;">@ r0 = &amp;eoa</i>
        ldr   r1, =arr          <i class="hl-comment" style="color: #888888;">@ r1 = &amp;arr</i>
        mov   r3, <span class="hl-number" style="color: #008800;">#0</span>            <i class="hl-comment" style="color: #888888;">@ r3 = 0</i>
<b class="hl-keyword">loop:</b>   ldrb  r2, [r1], <span class="hl-number" style="color: #008800;">#1</span>      <i class="hl-comment" style="color: #888888;">@ r2 = *r1++</i>
        add   r3, r2, r3        <i class="hl-comment" style="color: #888888;">@ r3 += r2</i>
        cmp   r1, r0            <i class="hl-comment" style="color: #888888;">@ if (r1 != r2)</i>
        bne   loop              <i class="hl-comment" style="color: #888888;">@    goto loop</i>
<b class="hl-keyword">stop:</b>   b stop</code>
</pre>
The only change here is that the array is now in the&nbsp;<code class="literal" style="color: #008800; font-family: dejavusansmono, courier, monospace; font-size: 17.6px;">.data</code>&nbsp;section. Also note that the nasty branch instruction to skip over the data is also not required, since the linker script will place the&nbsp;<code class="literal" style="color: #008800; font-family: dejavusansmono, courier, monospace; font-size: 17.6px;">.text</code>&nbsp;section and&nbsp;<code class="literal" style="color: #008800; font-family: dejavusansmono, courier, monospace; font-size: 17.6px;">.data</code>&nbsp;section appropriately. As a result, statements can be placed in the program, in any convenient way, and the linker script will take care of placing the sections correctly in memory.<br />
When the program is linked, the linker script is passed as an input to the linker, as shown in the following command.<br />
<pre class="programlisting"><code class="no-highlight" style="background: rgb(238, 238, 238); border: thin solid rgb(204, 204, 204); display: block; font-family: dejavusansmono, courier, monospace; font-size: 22.4px; padding: 0.5em;">$ arm-none-eabi-as -o sum-data.o sum-data.s
$ arm-none-eabi-ld -T sum-data.lds -o sum-data.elf sum-data.o</code>
</pre>
The option&nbsp;<code class="literal" style="color: #008800; font-family: dejavusansmono, courier, monospace; font-size: 17.6px;">-T sum-data.lds</code>&nbsp;specifies that&nbsp;<code class="literal" style="color: #008800; font-family: dejavusansmono, courier, monospace; font-size: 17.6px;">sum-data.lds</code>&nbsp;is to be used as the linker script. Dumping the symbol table, will provide an insight into how the sections are placed in memory.<br />
<pre class="programlisting"><code class="no-highlight" style="background: rgb(238, 238, 238); border: thin solid rgb(204, 204, 204); display: block; font-family: dejavusansmono, courier, monospace; font-size: 22.4px; padding: 0.5em;">$ arm-none-eabi-nm -n sum-data.elf
00000000 t start
0000000c t loop
0000001c t stop
00000400 d arr
00000403 d eoa</code>
</pre>
From the symbol table it is obvious that the&nbsp;<code class="literal" style="color: #008800; font-family: dejavusansmono, courier, monospace; font-size: 17.6px;">.text</code>&nbsp;is placed starting from address&nbsp;<code class="literal" style="color: #008800; font-family: dejavusansmono, courier, monospace; font-size: 17.6px;">0x0</code>&nbsp;and&nbsp;<code class="literal" style="color: #008800; font-family: dejavusansmono, courier, monospace; font-size: 17.6px;">.data</code>&nbsp;section is placed starting from address&nbsp;<code class="literal" style="color: #008800; font-family: dejavusansmono, courier, monospace; font-size: 17.6px;">0x400</code>.</div>
<h1 class="firstHeading" id="firstHeading" style="background-attachment: initial; background-clip: initial; background-image: none; background-origin: initial; background-position: initial; background-repeat: initial; background-size: initial; border-bottom: 1px solid rgb(170, 170, 170); font-family: sans-serif; font-size: 1.6em; font-weight: normal; line-height: 1.2em; margin: 0px 0px 0.1em; overflow: hidden; padding-bottom: 0px; padding-top: 0px; width: auto;">
Linker Scripts</h1>
<div id="bodyContent" style="font-family: sans-serif; font-size: 0.8em; line-height: 1.5em; position: relative; width: 1096px;">
<div id="contentSub" style="color: #7d7d7d; font-size: 12px; line-height: 1.2em; margin: 0px 0px 1.4em 1em; width: auto;">
</div>
<div class="mw-content-ltr" dir="ltr" lang="en" style="direction: ltr;">
<center>
<table style="background-color: #f0f0ff; border: 1px solid rgb(207, 207, 191); font-size: 12.8px; margin-bottom: 25px; margin-top: 25px; text-align: center;"><tbody>
<tr><td><div style="line-height: 1.5em; margin-bottom: 0.5em; margin-top: 0.4em;">
<a class="image" href="http://wiki.osdev.org/File:Under_Construction.png" style="background: none; color: #0b0080; text-decoration-line: none;" title="This page is under construction!"><img alt="This page is under construction!" height="50" src="http://wiki.osdev.org/images/1/14/Under_Construction.png" style="border: none; margin: 0px; vertical-align: middle;" width="50" /></a>&nbsp;This page is a work in progress and may thus be incomplete. Its content may be changed in the near future.</div>
</td><td></td></tr>
</tbody></table>
</center>
<div style="line-height: 1.5em; margin-bottom: 0.5em; margin-top: 0.4em;">
So what exactly is a linker script, and do I really need one? In all basic cases, you can technically do without, as you can specify a lot of options on the&nbsp;<a href="http://wiki.osdev.org/LD" style="background-attachment: initial; background-clip: initial; background-image: none; background-origin: initial; background-position: initial; background-repeat: initial; background-size: initial; color: #0b0080; text-decoration-line: none;" title="LD">GNU ld</a>&nbsp;command line, but how fun is that to type 100 characters over and over? A linker script is basically a nice little file you can create that ld will parse and link according to it.</div>
<table class="toc" id="toc" style="background-color: #f9f9f9; border: 1px solid rgb(170, 170, 170); font-size: 12.16px; padding: 5px;"><tbody>
<tr><td><div id="toctitle" style="direction: ltr; text-align: center;">
<h2 style="background: none; border: none; display: inline; font-size: 12.16px; margin: 0px 0px 0.6em; overflow: hidden; padding: 0px; width: auto;">
Contents</h2>
<span class="toctoggle" style="font-size: 12px;">&nbsp;[<a class="internal" href="http://wiki.osdev.org/Linker_Scripts#" id="togglelink" style="background: none; color: #0b0080; text-decoration-line: none;">hide</a>]&nbsp;</span></div>
<ul style="line-height: 1.5em; list-style-image: none; list-style-type: none; margin: 0.3em 0px; padding: 0px;">
<li class="toclevel-1 tocsection-1" style="margin-bottom: 0.1em;"><a href="http://wiki.osdev.org/Linker_Scripts#Keywords" style="background: none; color: #0b0080; text-decoration-line: none;"><span class="tocnumber">1</span>&nbsp;<span class="toctext">Keywords</span></a><ul style="line-height: 1.5em; list-style-image: none; list-style-type: none; margin: 0px 0px 0px 2em; padding: 0px;">
<li class="toclevel-2 tocsection-2" style="margin-bottom: 0.1em;"><a href="http://wiki.osdev.org/Linker_Scripts#ENTRY" style="background: none; color: #0b0080; text-decoration-line: none;"><span class="tocnumber">1.1</span>&nbsp;<span class="toctext">ENTRY</span></a></li>
<li class="toclevel-2 tocsection-3" style="margin-bottom: 0.1em;"><a href="http://wiki.osdev.org/Linker_Scripts#OUTPUT_FORMAT" style="background: none; color: #0b0080; text-decoration-line: none;"><span class="tocnumber">1.2</span>&nbsp;<span class="toctext">OUTPUT_FORMAT</span></a></li>
<li class="toclevel-2 tocsection-4" style="margin-bottom: 0.1em;"><a href="http://wiki.osdev.org/Linker_Scripts#STARTUP" style="background: none; color: #0b0080; text-decoration-line: none;"><span class="tocnumber">1.3</span>&nbsp;<span class="toctext">STARTUP</span></a></li>
<li class="toclevel-2 tocsection-5" style="margin-bottom: 0.1em;"><a href="http://wiki.osdev.org/Linker_Scripts#SEARCH_DIR" style="background: none; color: #0b0080; text-decoration-line: none;"><span class="tocnumber">1.4</span>&nbsp;<span class="toctext">SEARCH_DIR</span></a></li>
<li class="toclevel-2 tocsection-6" style="margin-bottom: 0.1em;"><a href="http://wiki.osdev.org/Linker_Scripts#INPUT" style="background: none; color: #0b0080; text-decoration-line: none;"><span class="tocnumber">1.5</span>&nbsp;<span class="toctext">INPUT</span></a></li>
<li class="toclevel-2 tocsection-7" style="margin-bottom: 0.1em;"><a href="http://wiki.osdev.org/Linker_Scripts#OUTPUT" style="background: none; color: #0b0080; text-decoration-line: none;"><span class="tocnumber">1.6</span>&nbsp;<span class="toctext">OUTPUT</span></a></li>
<li class="toclevel-2 tocsection-8" style="margin-bottom: 0.1em;"><a href="http://wiki.osdev.org/Linker_Scripts#MEMORY" style="background: none; color: #0b0080; text-decoration-line: none;"><span class="tocnumber">1.7</span>&nbsp;<span class="toctext">MEMORY</span></a></li>
<li class="toclevel-2 tocsection-9" style="margin-bottom: 0.1em;"><a href="http://wiki.osdev.org/Linker_Scripts#SECTIONS" style="background: none; color: #0b0080; text-decoration-line: none;"><span class="tocnumber">1.8</span>&nbsp;<span class="toctext">SECTIONS</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-10" style="margin-bottom: 0.1em;"><a href="http://wiki.osdev.org/Linker_Scripts#See_Also" style="background: none; color: #0b0080; text-decoration-line: none;"><span class="tocnumber">2</span>&nbsp;<span class="toctext">See Also</span></a><ul style="line-height: 1.5em; list-style-image: none; list-style-type: none; margin: 0px 0px 0px 2em; padding: 0px;">
<li class="toclevel-2 tocsection-11" style="margin-bottom: 0.1em;"><a href="http://wiki.osdev.org/Linker_Scripts#External_Links" style="background: none; color: #0b0080; text-decoration-line: none;"><span class="tocnumber">2.1</span>&nbsp;<span class="toctext">External Links</span></a></li>
</ul>
</li>
</ul>
</td></tr>
</tbody></table>
<h2 style="background-attachment: initial; background-clip: initial; background-image: none; background-origin: initial; background-position: initial; background-repeat: initial; background-size: initial; border-bottom: 1px solid rgb(170, 170, 170); font-size: 19.2px; font-weight: normal; margin: 0px 0px 0.6em; overflow: hidden; padding-bottom: 0.17em; padding-top: 0.5em; width: auto;">
<span class="mw-headline" id="Keywords">Keywords</span></h2>
<div style="line-height: 1.5em; margin-bottom: 0.5em; margin-top: 0.4em;">
I won't cover all of the keywords here, but I will cover the ones that will most likely be used.</div>
<h4 style="background-attachment: initial; background-clip: initial; background-image: none; background-origin: initial; background-position: initial; background-repeat: initial; background-size: initial; border-bottom: none; font-size: 14.848px; margin: 0px 0px 0.3em; overflow: hidden; padding-bottom: 0.17em; padding-top: 0.5em; width: auto;">
<span class="mw-headline" id="ENTRY">ENTRY</span></h4>
<pre style="background-color: #f9f9f9; border: 1px dashed rgb(47, 111, 171); font-family: monospace, &quot;Courier New&quot;; line-height: 1.3em; padding: 1em;">ENTRY(main)
ENTRY(MultibootEntry)
</pre>
<div style="line-height: 1.5em; margin-bottom: 0.5em; margin-top: 0.4em;">
ENTRY takes one argument. That is the symbol name for the entry point of the linked program/kernel. This can be "start" or "__main" or whatever, it's really up to you, but this will be the very first byte of your loaded program(or the first byte of the .text section in&nbsp;<a href="http://wiki.osdev.org/ELF" style="background-attachment: initial; background-clip: initial; background-image: none; background-origin: initial; background-position: initial; background-repeat: initial; background-size: initial; color: #0b0080; text-decoration-line: none;" title="ELF">ELF</a>&nbsp;and&nbsp;<a href="http://wiki.osdev.org/PE" style="background-attachment: initial; background-clip: initial; background-image: none; background-origin: initial; background-position: initial; background-repeat: initial; background-size: initial; color: #0b0080; text-decoration-line: none;" title="PE">PE</a>&nbsp;binaries).</div>
<h4 style="background-attachment: initial; background-clip: initial; background-image: none; background-origin: initial; background-position: initial; background-repeat: initial; background-size: initial; border-bottom: none; font-size: 14.848px; margin: 0px 0px 0.3em; overflow: hidden; padding-bottom: 0.17em; padding-top: 0.5em; width: auto;">
<span class="mw-headline" id="OUTPUT_FORMAT">OUTPUT_FORMAT</span></h4>
<pre style="background-color: #f9f9f9; border: 1px dashed rgb(47, 111, 171); font-family: monospace, &quot;Courier New&quot;; line-height: 1.3em; padding: 1em;">OUTPUT_FORMAT(elf64-x86-64)
OUTPUT_FORMAT("pe-i386")
</pre>
<div style="line-height: 1.5em; margin-bottom: 0.5em; margin-top: 0.4em;">
OUTPUT_FORMAT also takes one argument. It specifies what the output format of your executable will be. To find out what formats your binutils and GCC supports, just use 'objdump -i'. Some of the more common formats are</div>
<ul style="line-height: 1.5em; list-style-image: url(&quot;data:image/png; list-style-type: square; margin: 0.3em 0px 0px 1.5em; padding: 0px;">
<li style="margin-bottom: 0.1em;">binary --This is just a flat binary with no formatting at all</li>
<li style="margin-bottom: 0.1em;">elf32-i386 --This is just the ELF format, usually little endian too.</li>
<li style="margin-bottom: 0.1em;">elf64-x86-64 --This is the ELF format for 64bit, usually little endian.</li>
<li style="margin-bottom: 0.1em;">pe-i386 --The PE format</li>
</ul>
<h4 style="background-attachment: initial; background-clip: initial; background-image: none; background-origin: initial; background-position: initial; background-repeat: initial; background-size: initial; border-bottom: none; font-size: 14.848px; margin: 0px 0px 0.3em; overflow: hidden; padding-bottom: 0.17em; padding-top: 0.5em; width: auto;">
<span class="mw-headline" id="STARTUP">STARTUP</span></h4>
<pre style="background-color: #f9f9f9; border: 1px dashed rgb(47, 111, 171); font-family: monospace, &quot;Courier New&quot;; line-height: 1.3em; padding: 1em;">STARTUP(Boot.o)
STARTUP(crt0.o)
</pre>
<div style="line-height: 1.5em; margin-bottom: 0.5em; margin-top: 0.4em;">
STARTUP takes one argument. It is which file you want to be linked to the very beginning of the executable. For userland programs, this is usually crt0.o or crtbegin.o. For kernels, it is usually the file that contains your assembly boilerplate that initiates the stack and in some cases GDT and such and then calls your kmain().</div>
<h4 style="background-attachment: initial; background-clip: initial; background-image: none; background-origin: initial; background-position: initial; background-repeat: initial; background-size: initial; border-bottom: none; font-size: 14.848px; margin: 0px 0px 0.3em; overflow: hidden; padding-bottom: 0.17em; padding-top: 0.5em; width: auto;">
<span class="mw-headline" id="SEARCH_DIR">SEARCH_DIR</span></h4>
<pre style="background-color: #f9f9f9; border: 1px dashed rgb(47, 111, 171); font-family: monospace, &quot;Courier New&quot;; line-height: 1.3em; padding: 1em;">SEARCH_DIR(Directory)
</pre>
<div style="line-height: 1.5em; margin-bottom: 0.5em; margin-top: 0.4em;">
This will add a path to your library search directory. The -nostdlib flag will cause any library found in this path to be effectively ignored. I'm not sure why, it just seems to be how ld works. It treats linker script specified search directories as standard directories, and therefore ignores them with -no-default-libs and such flags</div>
<h4 style="background-attachment: initial; background-clip: initial; background-image: none; background-origin: initial; background-position: initial; background-repeat: initial; background-size: initial; border-bottom: none; font-size: 14.848px; margin: 0px 0px 0.3em; overflow: hidden; padding-bottom: 0.17em; padding-top: 0.5em; width: auto;">
<span class="mw-headline" id="INPUT">INPUT</span></h4>
<pre style="background-color: #f9f9f9; border: 1px dashed rgb(47, 111, 171); font-family: monospace, &quot;Courier New&quot;; line-height: 1.3em; padding: 1em;">INPUT(File1.o File2.o File3.o ...)
INPUT
(
	File1.o
	File2.o
	File3.o
	...
)
</pre>
<div style="line-height: 1.5em; margin-bottom: 0.5em; margin-top: 0.4em;">
INPUT is a 'in-linker script' replacement for adding object files to the command line. Where you would usually specify something like&nbsp;<i>ld File1.o File2.o</i>, the INPUT section can be used to do this inside the linker script instead.</div>
<h4 style="background-attachment: initial; background-clip: initial; background-image: none; background-origin: initial; background-position: initial; background-repeat: initial; background-size: initial; border-bottom: none; font-size: 14.848px; margin: 0px 0px 0.3em; overflow: hidden; padding-bottom: 0.17em; padding-top: 0.5em; width: auto;">
<span class="mw-headline" id="OUTPUT">OUTPUT</span></h4>
<pre style="background-color: #f9f9f9; border: 1px dashed rgb(47, 111, 171); font-family: monospace, &quot;Courier New&quot;; line-height: 1.3em; padding: 1em;">OUTPUT(Kernel.bin)
</pre>
<div style="line-height: 1.5em; margin-bottom: 0.5em; margin-top: 0.4em;">
OUTPUT specifies the file that has to be output by the linker. This is the name of the executable. For applications on Windows, for example, this is usually&nbsp;<i>.exe</i>.</div>
<h4 style="background-attachment: initial; background-clip: initial; background-image: none; background-origin: initial; background-position: initial; background-repeat: initial; background-size: initial; border-bottom: none; font-size: 14.848px; margin: 0px 0px 0.3em; overflow: hidden; padding-bottom: 0.17em; padding-top: 0.5em; width: auto;">
<span class="mw-headline" id="MEMORY">MEMORY</span></h4>
<pre style="background-color: #f9f9f9; border: 1px dashed rgb(47, 111, 171); font-family: monospace, &quot;Courier New&quot;; line-height: 1.3em; padding: 1em;">MEMORY
{
...
}
</pre>
<div style="line-height: 1.5em; margin-bottom: 0.5em; margin-top: 0.4em;">
MEMORY declares one or more memory regions with attributes specifying whether the region can be written to, read from or executed. This is mostly used in embedded systems where different regions of address space may contain different access permissions.</div>
<div style="line-height: 1.5em; margin-bottom: 0.5em; margin-top: 0.4em;">
For example:</div>
<pre style="background-color: #f9f9f9; border: 1px dashed rgb(47, 111, 171); font-family: monospace, &quot;Courier New&quot;; line-height: 1.3em; padding: 1em;">MEMORY
{
    ROM (rx)&nbsp;: ORIGIN = 0, LENGTH = 256k
    RAM (wx)&nbsp;: org = 0x00100000, len = 1M
}
</pre>
<div style="line-height: 1.5em; margin-bottom: 0.5em; margin-top: 0.4em;">
This script tells the linker that there are two memory regions. a) "ROM" starts at address 0x00000000, is 256kB in length, can be read and executed. b) "RAM" starts at address 0x00100000, is 1MB in length, can be written, read and executed.</div>
<h4 style="background-attachment: initial; background-clip: initial; background-image: none; background-origin: initial; background-position: initial; background-repeat: initial; background-size: initial; border-bottom: none; font-size: 14.848px; margin: 0px 0px 0.3em; overflow: hidden; padding-bottom: 0.17em; padding-top: 0.5em; width: auto;">
<span class="mw-headline" id="SECTIONS">SECTIONS</span></h4>
<pre style="background-color: #f9f9f9; border: 1px dashed rgb(47, 111, 171); font-family: monospace, &quot;Courier New&quot;; line-height: 1.3em; padding: 1em;">SECTIONS
{
  .text.start (_KERNEL_BASE_)&nbsp;: {
    startup.o( .text )
  }

  .text&nbsp;: ALIGN(0x1000) {
_TEXT_START_ = .;
    *(.text)
_TEXT_END_ = .;
  }

  .data&nbsp;: ALIGN(0x1000) {
_DATA_START_ = .;
    *(.data)
_DATA_END_ = .;
  }

  .bss&nbsp;: ALIGN(0x1000) {
_BSS_START_ = .;
    *(.bss)
_BSS_END_ = .;
  }


}
</pre>
<div style="line-height: 1.5em; margin-bottom: 0.5em; margin-top: 0.4em;">
This script tells the linker to place code from the ".text" section in startup.o at the beginning, starting at logical address _KERNEL_BASE_. This is then followed by page-aligned sections for all ".text", ".data" and ".bss" sections of all the other input files. Linker variables are defined for the start and end address of each section; C(++) code can refer to these using 'extern "C" void &lt;varname&gt;', and taking the address (&amp;&lt;varname&gt;) to use the value.</div>
</div>
</div>

<br /><a href="https://sourceware.org/binutils/docs/ld/Scripts.html#Scripts">ld命令的linker脚本语法详解</a>
