<div>
<div>
<ul class="lang" style="border-left: 2px solid transparent; border-right: 2px solid transparent; border-top: 2px solid transparent; cursor: pointer; list-style: none; margin: 0px; padding: 0px; position: absolute; right: 5px; top: 8px;">
<li style="cursor: pointer; display: block; list-style: none; margin: 0px; padding: 0px;"><br /></li>
</ul>
</div>
</div>
<div>
<div>
<h1 id="bitcoin-developer-guide" style="color: #0d579b; font-family: Ubuntu, sans-serif; font-size: 25.6px; margin: 0px 0px 0.67em; text-align: center;">
<span class="yiyi-st" id="yiyi-51">比特币开发者指南</span></h1>
<div class="summary" style="color: #646464; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 20px; line-height: 1.5em; margin-bottom: 40px; text-align: center;">
<span class="yiyi-st" id="yiyi-52">查找有关Bitcoin协议和相关规范的详细信息。</span></div>
<div class="toccontent" style="color: #646464; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 16px; margin: auto 0px auto auto; position: relative; text-align: left; width: 600px;">
<div style="line-height: 1.5em;">
<br /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-137">开发者指南旨在提供您了解Bitcoin所需的信息，并开始构建基于Bitcoin的应用程序，但它<a href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#not-a-specification" style="color: #2c6fad; text-decoration-line: none;">不是规范</a>。</span><span class="yiyi-st" id="yiyi-138">为了充分利用本文档，您可能需要从<a href="https://github.com/bitcoin/bitcoin" style="color: #2c6fad; text-decoration-line: none;">源</a>或从<a href="http://usyiyi.cn/documents/bitcoin/en/download" style="color: #2c6fad; text-decoration-line: none;">预编译的可执行文件</a>安装当前版本的Bitcoin Core。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-139">有关Bitcoin开发的问题最好在<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">比特币开发社区</a>中询问。</span><span class="yiyi-st" id="yiyi-140">与Bitcoin.org的文档相关的错误或建议可以<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues" style="color: #2c6fad; text-decoration-line: none;">作为问题提交</a>或发布到<a href="https://groups.google.com/forum/#!forum/bitcoin-documentation" style="color: #2c6fad; text-decoration-line: none;">比特币文档邮件列表</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-141">在以下文档中，一些字符串已被缩短或折叠：“[...]”表示删除了额外的数据，并且在下面继续以单个反斜杠“\”结尾的行。</span><span class="yiyi-st" id="yiyi-142">如果将鼠标悬停在段落上，交叉引用链接将显示为蓝色。</span><span class="yiyi-st" id="yiyi-143">如果将鼠标悬停在交叉引用链接上，则该术语的简要定义将显示在工具提示中。</span></div>
<h2 class=" anchorAf" id="block-chain" style="color: #383838; font-family: Ubuntu, sans-serif; font-size: 24px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-144">区块链</span></h2>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_block_chain.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-145"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_block_chain.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_block_chain.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_block_chain.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-146"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">区块链</a>提供了比特币的公共帐本，这是一个有序有时间戳的交易记录。</span><span class="yiyi-st" id="yiyi-147">该系统用于防止<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/double-spend" style="color: #2c6fad; text-decoration-line: none;" title="A transaction that uses the same input as an already broadcast transaction. The attempt of duplication, deceit, or conversion, will be adjudicated when only one of the transactions is recorded in the blockchain.">重复花费(双花)</a>和修改先前的交易记录。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-148">Bitcoin&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>中的每个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">完整节点</a>独立地存储仅包含由<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>验证过的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">区块链</a>。</span><span class="yiyi-st" id="yiyi-149">当多个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>在其<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>中都具有相同的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>时，它们被认为达成了<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/consensus" id="term-consensus" style="color: black; text-decoration-line: none;" title="When several nodes (usually most nodes on the network) all have the same blocks in their locally-validated best block chain.">共识</a>。</span><span class="yiyi-st" id="yiyi-150">这些<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>遵循维持<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/consensus" style="color: #2c6fad; text-decoration-line: none;" title="When several nodes (usually most nodes on the network) all have the same blocks in their locally-validated best block chain.">共识</a>的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/consensus-rules" style="color: #2c6fad; text-decoration-line: none;" title="The block validation rules that full nodes follow to stay in consensus with other nodes.">验证规则</a>被称为<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/consensus-rules" id="term-consensus-rules" style="color: black; text-decoration-line: none;" title="The block validation rules that full nodes follow to stay in consensus with other nodes.">共识规则</a>。</span><span class="yiyi-st" id="yiyi-151">本节将介绍Bitcoin Core使用的许多<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/consensus-rules" style="color: #2c6fad; text-decoration-line: none;" title="The block validation rules that full nodes follow to stay in consensus with other nodes.">共识规则</a>。</span></div>
<h3 class=" anchorAf" id="block-chain-overview" style="color: #383838; font-size: 20.8px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-152">区块链概述</span></h3>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_block_chain.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-153"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_block_chain.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_block_chain.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_block_chain.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论</a></span></div>
<div style="line-height: 1.5em;">
<img alt="Block Chain Overview" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-blockchain-overview.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-154">上图显示了<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">区块链</a>的简化版本。</span><span class="yiyi-st" id="yiyi-155">一个或多个新交易的<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" id="term-block" style="color: black; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>被收集到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">一个区块</a>的交易数据部分中。</span><span class="yiyi-st" id="yiyi-156">每个交易数据的副本将被哈希, 这些哈希值两两配对，再被hash，直到得到最顶层的一个hash值，这就是一棵<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/merkle-tree" style="color: #2c6fad; text-decoration-line: none;" title="A tree constructed by hashing paired data (the leaves), then pairing and hashing the results until a single hash remains, the merkle root. In Bitcoin, the leaves are almost always transactions from a single block.">merkle树</a>的<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/merkle-root" id="term-merkle-root" style="color: black; text-decoration-line: none;" title="The root node of a merkle tree, a descendant of all the hashed pairs in the tree. Block headers must include a valid merkle root descended from all transactions in that block.">根</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-157"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/merkle-root" style="color: #2c6fad; text-decoration-line: none;" title="The root node of a merkle tree, a descendant of all the hashed pairs in the tree. Block headers must include a valid merkle root descended from all transactions in that block.">merkle树根</a>存储在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">这个区块标头</a>中。</span><span class="yiyi-st" id="yiyi-158">每个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>还存储着先前<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块的</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">标头</a>的哈希值，这样<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>将链接在一起。</span><span class="yiyi-st" id="yiyi-159">这样可以确保事务无法修改，而不修改<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">记录该事务的块</a>以及所有后续<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-160">交易记录也被链接在一起。</span><span class="yiyi-st" id="yiyi-161">比特币<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>软件给人的感觉是从<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>发送或接收<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">多少聪(satoshi，单位)的比特币</a>，但实际上<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">比特币</a>真的是在交易中流转。</span><span class="yiyi-st" id="yiyi-162">每个交易花费先前在一个或多个较早的交易中接收到的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">多少聪的比特币</a>，因此一个交易的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it.">输入</a>是先前交易的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>。</span></div>
<div style="line-height: 1.5em;">
<img alt="Transaction Propagation" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-transaction-propagation.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-163">单个交易可以创建多个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>，就像发送到多个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>时的情况一样，但是特定交易的每个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>只能是在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">区块链</a>中用作<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it.">输入</a>一次。</span><span class="yiyi-st" id="yiyi-164">任何后续的引用都禁止<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/double-spend" style="color: #2c6fad; text-decoration-line: none;" title="A transaction that uses the same input as an already broadcast transaction. The attempt of duplication, deceit, or conversion, will be adjudicated when only one of the transactions is recorded in the blockchain.">重复花费</a>&nbsp;- 尝试花费相同的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">多少聪的比特币</a>两次。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-165"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>绑定到<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/txid" id="term-txid" style="color: black; text-decoration-line: none;" title="An identifier used to uniquely identify a particular transaction; specifically, the sha256d hash of the transaction.">交易标识符(TXID)上</a>，这是验证过的交易的哈希值。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-166">因为特定交易的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>只允许花费一次，那所有包含在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">区块链</a>上的交易<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>可以归类为<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/unspent-transaction-output" id="term-utxo" style="color: black; text-decoration-line: none;" title="An Unspent Transaction Output (UTXO) that can be spent as an input in a new transaction.">未花费的交易输出(UTXOs)</a>或已花费的交易<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>。</span><span class="yiyi-st" id="yiyi-167">要想付款有效，只能使用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/unspent-transaction-output" style="color: #2c6fad; text-decoration-line: none;" title="An Unspent Transaction Output (UTXO) that can be spent as an input in a new transaction.">未花费的交易输出UTXOs</a>作为<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it.">输入</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-168">先不讲比<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/coinbase-transaction" style="color: #2c6fad; text-decoration-line: none;" title="The first transaction in a block. Always created by a miner, it includes a single coinbase.">币基交易</a>(后面会详述)，若一个交易的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>超过交易的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it.">输入</a>，这个交易将会被拒绝--但是若是<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it.">输入</a>超出<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>，这个差值可以作为<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/transaction-fee" id="term-transaction-fee" style="color: black; text-decoration-line: none;" title="The amount remaining when the value of all outputs in a transaction are subtracted from all inputs in a transaction; the fee is paid to the miner who includes that transaction in a block.">交易费</a>奖励给创建这个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">区块</a>的比特币<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" id="term-miner" style="color: black; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">矿工</a>。</span><span class="yiyi-st" id="yiyi-169">例如，在上图中，每个交易相比它相关的交易<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it.">输入</a>花费了10000<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">聪</a>，实际上就是支付了10000<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">聪</a>的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/transaction-fee" style="color: #2c6fad; text-decoration-line: none;" title="The amount remaining when the value of all outputs in a transaction are subtracted from all inputs in a transaction; the fee is paid to the miner who includes that transaction in a block.">交易费</a>。</span></div>
<h3 class=" anchorAf" id="proof-of-work" style="color: #383838; font-size: 20.8px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-170">工作量证明(POW)</span></h3>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_block_chain.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-171"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_block_chain.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_block_chain.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_block_chain.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-172"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">区块链</a>是有由<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>中对等的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>共同维护的，所以比特币要求每个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">区块</a>需要一定工作量投入确保想篡改历史<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">区块</a>的不诚实<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>比想在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">区块链</a>上创建新<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">区块</a>的诚实<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>需要付出更大代价。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-173">链接<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">区块</a>在一起使得在不修改所有后面的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">区块</a>情况下不可能修改此<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">区块</a>中包含的交易。</span><span class="yiyi-st" id="yiyi-174">结果，修改特定<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">区块</a>的成本随着添加到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">区块链</a>中的每个新<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">区块而增加，放大了</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/proof-of-work" style="color: #2c6fad; text-decoration-line: none;" title="A hash below a target value which can only be obtained, on average, by performing a certain amount of brute force work---therefore demonstrating proof of work.">工作量证明</a>的效果。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-175">比特币中使用的<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/proof-of-work" id="term-proof-of-work" style="color: black; text-decoration-line: none;" title="A hash below a target value which can only be obtained, on average, by performing a certain amount of brute force work---therefore demonstrating proof of work.">工作量证明</a>利用了密码散列的显式随机特性。</span><span class="yiyi-st" id="yiyi-176">一个好的加密哈希算法将任意数据转换成看似随机的数字。</span><span class="yiyi-st" id="yiyi-177">如果以任何方式修改数据并且重新得到哈希值，则会产生一个新的看似随机的数字，因此无法修改数据以使哈希数值可被预测。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-178">为了证明你做了一些额外的工作来创建一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">区块</a>，你必须创建一个不超过某个值的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">区块头</a>的散列。</span><span class="yiyi-st" id="yiyi-179">例如，如果最大可能的哈希值为<span class="math">2<span style="font-size: 12px; line-height: 0; position: relative; top: -0.5em; vertical-align: baseline;">256</span>&nbsp;- 1</span>，则可以证明您通过产生哈希值来两两组合最多尝试次数小于<span class="math">2<span style="font-size: 12px; line-height: 0; position: relative; top: -0.5em; vertical-align: baseline;">255</span></span>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-180">在上面给出的例子中，平均每个其他尝试都会产生一个成功的哈希。</span><span class="yiyi-st" id="yiyi-181">您甚至可以估计给定哈希尝试将生成低于<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/nbits" id="term-target" style="color: black; text-decoration-line: none;" title="The target is the threshold below which a block header hash must be in order for the block to valid, and nBits is the encoded form of the target threshold as it appears in the block header.">目标</a>阈值的数字的概率。</span><span class="yiyi-st" id="yiyi-182">比特币假设一个线性概率，它使得<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/nbits" style="color: #2c6fad; text-decoration-line: none;" title="The target is the threshold below which a block header hash must be in order for the block to valid, and nBits is the encoded form of the target threshold as it appears in the block header.">目标阈值</a>越低，平均需要更多的哈希尝试。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-183">新的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>会被添加到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>，仅当它们的哈希难度至少与<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/consensus" style="color: #2c6fad; text-decoration-line: none;" title="When several nodes (usually most nodes on the network) all have the same blocks in their locally-validated best block chain.">共识协议所期望的</a><a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/difficulty" id="term-difficulty" style="color: black; text-decoration-line: none;" title="How difficult it is to find a block relative to the difficulty of finding the easiest possible block. The easiest possible block has a proof-of-work difficulty of 1.">难度</a>值相当。</span><span class="yiyi-st" id="yiyi-184">每2,016 个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">比特币网络</a>会使用存储在每个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">块头</a>中的时间戳来计算生成上一个2,016个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>的第一个区块和最后一个区块之间经过的秒数。</span><span class="yiyi-st" id="yiyi-185">这个理想值为1,209,600秒（两周）。</span></div>
<ul style="margin-left: 0px; padding-left: 20px;">
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-186">如果生成2016个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>需要不到两周的时间，则预期的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/difficulty" style="color: #2c6fad; text-decoration-line: none;" title="How difficult it is to find a block relative to the difficulty of finding the easiest possible block. The easiest possible block has a proof-of-work difficulty of 1.">难度值将按比例增加(可高达300％)，当以相同的速率检查散列情况下以便接下来的2016</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>应该恰好需要两个星期来生成。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-187">如果生成<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>需要两个多星期，因为相同的原因，预期的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/difficulty" style="color: #2c6fad; text-decoration-line: none;" title="How difficult it is to find a block relative to the difficulty of finding the easiest possible block. The easiest possible block has a proof-of-work difficulty of 1.">难度</a>值会按比例降低（75％）。</span></div>
</li>
</ul>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-188">（注意：Bitcoin Core实现中的一个时间戳错误导致每201<em>6</em><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块更新</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/difficulty" style="color: #2c6fad; text-decoration-line: none;" title="How difficult it is to find a block relative to the difficulty of finding the easiest possible block. The easiest possible block has a proof-of-work difficulty of 1.">难度值</a>仅从201<em>5</em>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>开始，产生轻微的偏移。）</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-189"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/nbits" style="color: #2c6fad; text-decoration-line: none;" title="The target is the threshold below which a block header hash must be in order for the block to valid, and nBits is the encoded form of the target threshold as it appears in the block header."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks"></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain."></a>因为每个块头必须哈希到低于目标阈值的值，并且因为每个块链接到前一个块，平均要求扩散一个更改过的区块哈希算力与整个比特币网络在初始块的创建时间和当前时间之间所消耗的一样多。</span><span class="yiyi-st" id="yiyi-190">只有您获得了大部分<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络的</a>哈希功能，您才可以根据交易历史可靠地执行这种<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/51-percent-attack" id="term-51-attack" style="color: black; text-decoration-line: none;" title="The ability of someone controlling a majority of network hash rate to revise transaction history and prevent new transactions from confirming.">51％的攻击</a>(尽管如此，应该注意的是，即使小于50%哈希算力仍然有很好的机会进行这种攻击）。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-191"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">块头</a>提供了几个易于修改的字段，例如专用的nonce字段，因此获取新的哈希不需要等待新的交易到来。</span><span class="yiyi-st" id="yiyi-192">此外，只有80字节的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">块头</a>被散列以用于工作量证明，因此在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>中包含大量的交易数据不会因有额外I/O减慢求哈希速度，添加附加交易数据只需要重新计算<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/merkle-tree" style="color: #2c6fad; text-decoration-line: none;" title="A tree constructed by hashing paired data (the leaves), then pairing and hashing the results until a single hash remains, the merkle root. In Bitcoin, the leaves are almost always transactions from a single block.">merkle树</a>中的祖先哈希值。</span></div>
<h3 class=" anchorAf" id="block-height-and-forking" style="color: #383838; font-size: 20.8px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-193">块高和分叉</span></h3>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_block_chain.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-194"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_block_chain.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_block_chain.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_block_chain.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-195">任何算出<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">块头</a>的哈希值低于<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/nbits" style="color: #2c6fad; text-decoration-line: none;" title="The target is the threshold below which a block header hash must be in order for the block to valid, and nBits is the encoded form of the target threshold as it appears in the block header.">目标阈值</a>的比特币<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">矿工</a>可以将整个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>添加到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>上（假设<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>有效）。</span><span class="yiyi-st" id="yiyi-196">这些<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>通常由它们的<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-height" id="term-block-height" style="color: black; text-decoration-line: none;" title="The number of blocks preceding a particular block on a block chain. For example, the genesis block has a height of zero because zero block preceded it.">块高度</a>&nbsp;定位的 - 即它们与第一个比特币<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>之间的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块数量</a>（<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/genesis-block" style="color: #2c6fad; text-decoration-line: none;" title="The first block in the Bitcoin block chain.">块0</a>，最通常称为<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/genesis-block" id="term-genesis-block" style="color: black; text-decoration-line: none;" title="The first block in the Bitcoin block chain.">创世块</a>）。</span><span class="yiyi-st" id="yiyi-197">例如，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>2016是可以首先调整<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/difficulty" style="color: #2c6fad; text-decoration-line: none;" title="How difficult it is to find a block relative to the difficulty of finding the easiest possible block. The easiest possible block has a proof-of-work difficulty of 1.">难度值</a>的地方。</span></div>
<div style="line-height: 1.5em;">
<img alt="Common And Uncommon Block Chain Forks" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-blockchain-fork.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-198">多个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">区块</a>可能有相同的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-height" style="color: #2c6fad; text-decoration-line: none;" title="The number of blocks preceding a particular block on a block chain. For example, the genesis block has a height of zero because zero block preceded it.">区块高度</a>，当2个或多个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">矿工</a>在大致相同时间内产生合适新<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">区块</a>的时候这很常见。</span><span class="yiyi-st" id="yiyi-199">这在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>中产生了一个明显的<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/fork" id="term-fork" style="color: black; text-decoration-line: none;" title="When two or more blocks have the same block height, forking the block chain. Typically occurs when two or more miners find blocks at nearly the same time. Can also happen as part of an attack.">分叉</a>，如上图所示。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-200">当<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">矿工</a>同时在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">区块链</a>尾部产生新<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">区块</a>，每个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>独立选择接受哪个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">区块</a>。</span><span class="yiyi-st" id="yiyi-201">在没有其他考虑的情况下，如下所述，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>通常使用他们看到的第一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-202">最终，一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">矿工</a>产生另一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>，它只附加在一个竞争同时开采的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>中。</span><span class="yiyi-st" id="yiyi-203">这使得<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/fork" style="color: #2c6fad; text-decoration-line: none;" title="When two or more blocks have the same block height, forking the block chain. Typically occurs when two or more miners find blocks at nearly the same time. Can also happen as part of an attack.">叉</a>的那侧比另一侧更强。</span><span class="yiyi-st" id="yiyi-204">假设一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/fork" style="color: #2c6fad; text-decoration-line: none;" title="When two or more blocks have the same block height, forking the block chain. Typically occurs when two or more miners find blocks at nearly the same time. Can also happen as part of an attack.">分叉</a>仅包含有效<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">区块</a>，正常<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>通常紧接着最难的链来增长，抛弃那些属于短<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/fork" style="color: #2c6fad; text-decoration-line: none;" title="When two or more blocks have the same block height, forking the block chain. Typically occurs when two or more miners find blocks at nearly the same time. Can also happen as part of an attack.">分叉</a>的<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/stale-block" id="term-stale-block" style="color: black; text-decoration-line: none;" title="Blocks which were successfully mined but which aren't included on the current best block chain, likely because some other block at the same height had its chain extended first.">过期区块</a>。</span><span class="yiyi-st" id="yiyi-205">（<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/stale-block" style="color: #2c6fad; text-decoration-line: none;" title="Blocks which were successfully mined but which aren't included on the current best block chain, likely because some other block at the same height had its chain extended first.">过期块</a>有时也称为孤儿或孤儿块，但是这些术语也用于没有已知父<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>的真<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/orphan-block" style="color: #2c6fad; text-decoration-line: none;" title="Blocks whose parent block has not been processed by the local node, so they can't be fully validated yet.">孤儿块</a>）</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-206">如果不同的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">矿工</a>工作在相反的目的，例如一些<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">矿工</a>努力扩展<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链，同时其他</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">矿工</a>正在尝试发起<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/51-percent-attack" style="color: #2c6fad; text-decoration-line: none;" title="The ability of someone controlling a majority of network hash rate to revise transaction history and prevent new transactions from confirming.">51％的攻击</a>来修改交易历史，则长期<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/fork" style="color: #2c6fad; text-decoration-line: none;" title="When two or more blocks have the same block height, forking the block chain. Typically occurs when two or more miners find blocks at nearly the same time. Can also happen as part of an attack.">分叉</a>是可能的。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-207">由于在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">区块链</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/fork" style="color: #2c6fad; text-decoration-line: none;" title="When two or more blocks have the same block height, forking the block chain. Typically occurs when two or more miners find blocks at nearly the same time. Can also happen as part of an attack.">的分叉中</a>，多个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>可以具有相同的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-height" style="color: #2c6fad; text-decoration-line: none;" title="The number of blocks preceding a particular block on a block chain. For example, the genesis block has a height of zero because zero block preceded it.">高度</a>&nbsp;，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-height" style="color: #2c6fad; text-decoration-line: none;" title="The number of blocks preceding a particular block on a block chain. For example, the genesis block has a height of zero because zero block preceded it.">区块高度</a>不应该被用作全局唯一标识符。</span><span class="yiyi-st" id="yiyi-208">反而，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>通常由它们的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">块头</a>的哈希引用（通常以字节顺序颠倒，十六进制形式）。</span></div>
<h3 class=" anchorAf" id="transaction-data" style="color: #383838; font-size: 20.8px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-209">交易数据</span></h3>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_block_chain.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-210"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_block_chain.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_block_chain.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_block_chain.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-211">每个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>必须包含一个或多个交易。</span><span class="yiyi-st" id="yiyi-212">这些交易中的第一个必须是一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/coinbase-transaction" style="color: #2c6fad; text-decoration-line: none;" title="The first transaction in a block. Always created by a miner, it includes a single coinbase.">币基交易</a>，也称为<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/coinbase-transaction" style="color: #2c6fad; text-decoration-line: none;" title="The first transaction in a block. Always created by a miner, it includes a single coinbase.">生成交易</a>，它应该收集并花费<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-reward" style="color: #2c6fad; text-decoration-line: none;" title="The amount that miners may claim as a reward for creating a block. Equal to the sum of the block subsidy (newly available satoshis) plus the transactions fees paid by transactions included in the block.">块奖励</a>（包括<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>补贴以及由<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>中包含的交易支付的任何<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/transaction-fee" style="color: #2c6fad; text-decoration-line: none;" title="The amount remaining when the value of all outputs in a transaction are subtracted from all inputs in a transaction; the fee is paid to the miner who includes that transaction in a block.">交易费用</a>）。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-213"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/coinbase-transaction" style="color: #2c6fad; text-decoration-line: none;" title="The first transaction in a block. Always created by a miner, it includes a single coinbase.">币基交易</a>的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/unspent-transaction-output" style="color: #2c6fad; text-decoration-line: none;" title="An Unspent Transaction Output (UTXO) that can be spent as an input in a new transaction.">未花费的交易输出UTXO</a>有一个特殊的条件，它至少需要100个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>产生之后才能使用（用作<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it.">输入</a>）。</span><span class="yiyi-st" id="yiyi-214">这暂时阻止<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">矿工</a>花费从一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/fork" style="color: #2c6fad; text-decoration-line: none;" title="When two or more blocks have the same block height, forking the block chain. Typically occurs when two or more miners find blocks at nearly the same time. Can also happen as part of an attack.">分叉</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">链</a>上以后可能被淘汰的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">区块</a>（因此<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/coinbase-transaction" style="color: #2c6fad; text-decoration-line: none;" title="The first transaction in a block. Always created by a miner, it includes a single coinbase.">币基交易</a>也被删除）上花费<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/transaction-fee" style="color: #2c6fad; text-decoration-line: none;" title="The amount remaining when the value of all outputs in a transaction are subtracted from all inputs in a transaction; the fee is paid to the miner who includes that transaction in a block.">交易费</a>和<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-reward" style="color: #2c6fad; text-decoration-line: none;" title="The amount that miners may claim as a reward for creating a block. Equal to the sum of the block subsidy (newly available satoshis) plus the transactions fees paid by transactions included in the block.">区块奖励</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-215"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">区块</a>不需要包括任何非<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/coinbase-transaction" style="color: #2c6fad; text-decoration-line: none;" title="The first transaction in a block. Always created by a miner, it includes a single coinbase.">币基交易</a>，但是<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">矿工</a>几乎总是包含额外的交易，以便于获得他们的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/transaction-fee" style="color: #2c6fad; text-decoration-line: none;" title="The amount remaining when the value of all outputs in a transaction are subtracted from all inputs in a transaction; the fee is paid to the miner who includes that transaction in a block.">交易费</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-216">包括<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/coinbase-transaction" style="color: #2c6fad; text-decoration-line: none;" title="The first transaction in a block. Always created by a miner, it includes a single coinbase.">币基交易</a>在内的所有交易都以二进制原始交易格式编码入<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-217">原始交易格式被散列为<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/txid" style="color: #2c6fad; text-decoration-line: none;" title="An identifier used to uniquely identify a particular transaction; specifically, the sha256d hash of the transaction.">交易标识符</a>(<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/txid" style="color: #2c6fad; text-decoration-line: none;" title="An identifier used to uniquely identify a particular transaction; specifically, the sha256d hash of the transaction.">txid</a>）。</span><span class="yiyi-st" id="yiyi-218">通过这些<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/txid" style="color: #2c6fad; text-decoration-line: none;" title="An identifier used to uniquely identify a particular transaction; specifically, the sha256d hash of the transaction.">txid</a>，<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/merkle-tree" id="term-merkle-tree" style="color: black; text-decoration-line: none;" title="A tree constructed by hashing paired data (the leaves), then pairing and hashing the results until a single hash remains, the merkle root. In Bitcoin, the leaves are almost always transactions from a single block.">merkle树</a>是通过将每个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/txid" style="color: #2c6fad; text-decoration-line: none;" title="An identifier used to uniquely identify a particular transaction; specifically, the sha256d hash of the transaction.">txid</a>与另一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/txid" style="color: #2c6fad; text-decoration-line: none;" title="An identifier used to uniquely identify a particular transaction; specifically, the sha256d hash of the transaction.">txid</a>配对，然后将它们组合在一起构成的。</span><span class="yiyi-st" id="yiyi-219">如果有奇数个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/txid" style="color: #2c6fad; text-decoration-line: none;" title="An identifier used to uniquely identify a particular transaction; specifically, the sha256d hash of the transaction.">txids</a>，那么没有合作伙伴的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/txid" style="color: #2c6fad; text-decoration-line: none;" title="An identifier used to uniquely identify a particular transaction; specifically, the sha256d hash of the transaction.">txid</a>会使用自己的副本进行散列。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-220">所产生的哈希本身每个都与另一个哈希配对，并且散列在一起。</span><span class="yiyi-st" id="yiyi-221">没有伙伴的哈希求自身的hash值。</span><span class="yiyi-st" id="yiyi-222">该过程重复，直到只剩下一个散列，这就是<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/merkle-root" style="color: #2c6fad; text-decoration-line: none;" title="The root node of a merkle tree, a descendant of all the hashed pairs in the tree. Block headers must include a valid merkle root descended from all transactions in that block.">merkle根</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-223">例如，如果交易仅是加入（不是求哈希），那么一个五个交易的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/merkle-tree" style="color: #2c6fad; text-decoration-line: none;" title="A tree constructed by hashing paired data (the leaves), then pairing and hashing the results until a single hash remains, the merkle root. In Bitcoin, the leaves are almost always transactions from a single block.">merkle树</a>将如下图所示：</span></div>
<div class="highlighter-rouge">
<pre style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 12px; line-height: 1.5em; overflow-y: auto; padding: 17px;"><code style="border-radius: 3px; border: 0px; font-family: monospace, serif; padding: 0px;">       ABCDEEEE .......Merkle root
      /        \
   ABCD        EEEE
  /    \      /
 AB    CD    EE .......E is paired with itself
/  \  /  \  /
A  B  C  D  E .........Transactions
</code></pre>
</div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-224">根据在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/simplified-payment-verification" style="color: #2c6fad; text-decoration-line: none;" title="A method for verifying if particular transactions are included in a block without downloading the entire block. The method is used by some lightweight Bitcoin clients.">简单支付验证</a>(<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/simplified-payment-verification" style="color: #2c6fad; text-decoration-line: none;" title="A method for verifying if particular transactions are included in a block without downloading the entire block. The method is used by some lightweight Bitcoin clients.">SPV</a>)子节的讨论，&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/merkle-tree" style="color: #2c6fad; text-decoration-line: none;" title="A tree constructed by hashing paired data (the leaves), then pairing and hashing the results until a single hash remains, the merkle root. In Bitcoin, the leaves are almost always transactions from a single block.">merkle树</a>允许从一个完全<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">分片</a>的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">块头</a>和一系列中间hash值得到的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/merkle-root" style="color: #2c6fad; text-decoration-line: none;" title="The root node of a merkle tree, a descendant of all the hashed pairs in the tree. Block headers must include a valid merkle root descended from all transactions in that block.">merkle根</a>来验证<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">区块</a>中的一个交易。</span><span class="yiyi-st" id="yiyi-225">完整的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">分片</a>不需要都被信任：伪造<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">块头</a>是昂贵的，中间哈希值不能被伪造或者会验证失败。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-226">例如，为了验证交易D被添加到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">区块</a>，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/simplified-payment-verification" style="color: #2c6fad; text-decoration-line: none;" title="A method for verifying if particular transactions are included in a block without downloading the entire block. The method is used by some lightweight Bitcoin clients.">SPV客户端</a>除了<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/merkle-root" style="color: #2c6fad; text-decoration-line: none;" title="The root node of a merkle tree, a descendant of all the hashed pairs in the tree. Block headers must include a valid merkle root descended from all transactions in that block.">merkle根</a>之外只需要C，AB和EEEE散列的副本；客户不需要知道任何其他交易。</span><span class="yiyi-st" id="yiyi-227">如果这个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>中的五个交易都处于最大值，下载整个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>将需要超过500000个字节，但是下载三个散列加上<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">块头只需要140个字节。</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-228"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/txid" style="color: #2c6fad; text-decoration-line: none;" title="An identifier used to uniquely identify a particular transaction; specifically, the sha256d hash of the transaction."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/merkle-tree" style="color: #2c6fad; text-decoration-line: none;" title="A tree constructed by hashing paired data (the leaves), then pairing and hashing the results until a single hash remains, the merkle root. In Bitcoin, the leaves are almost always transactions from a single block."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/merkle-tree" style="color: #2c6fad; text-decoration-line: none;" title="A tree constructed by hashing paired data (the leaves), then pairing and hashing the results until a single hash remains, the merkle root. In Bitcoin, the leaves are almost always transactions from a single block."></a>注意：如果在相同的块中找到相同的txids，则可能merkle树与由于markle树实现的不平衡导致有部分或全部重复项被删除的块，发生了碰撞(重复的孤儿哈希)。</span><span class="yiyi-st" id="yiyi-229">由于使用相同的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/txid" style="color: #2c6fad; text-decoration-line: none;" title="An identifier used to uniquely identify a particular transaction; specifically, the sha256d hash of the transaction.">txids</a>的单独交易是不合实际的，但这不会对诚实软件造成负担，但是必须检查<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>的无效状态是否被缓存；否则，删除重复项的有效<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>可以具有相同的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/merkle-root" style="color: #2c6fad; text-decoration-line: none;" title="The root node of a merkle tree, a descendant of all the hashed pairs in the tree. Block headers must include a valid merkle root descended from all transactions in that block.">merkle根</a>和<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>哈希，但被缓存的无效结果拒绝，导致例如<a class="auto-link" href="https://en.bitcoin.it/wiki/CVEs#CVE-2012-2459" style="color: #2c6fad; text-decoration-line: none;">CVE-2012-2459</a>的安全漏洞。</span></div>
<h3 class=" anchorAf" id="consensus-rule-changes" style="color: #383838; font-size: 20.8px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-230">共识规则更改</span></h3>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_block_chain.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-231"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_block_chain.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_block_chain.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_block_chain.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-232">为了维护<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/consensus" style="color: #2c6fad; text-decoration-line: none;" title="When several nodes (usually most nodes on the network) all have the same blocks in their locally-validated best block chain.">共识</a>，所有全部<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>使用相同的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/consensus-rules" style="color: #2c6fad; text-decoration-line: none;" title="The block validation rules that full nodes follow to stay in consensus with other nodes.">共识规则</a>验证<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>。</span><span class="yiyi-st" id="yiyi-233">然而，有时<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/consensus-rules" style="color: #2c6fad; text-decoration-line: none;" title="The block validation rules that full nodes follow to stay in consensus with other nodes.">共识规则</a>要被改变以引入新功能或阻止<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>被滥用。</span><span class="yiyi-st" id="yiyi-234">当新规则实施时，可能会有一段时间，当未升级的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>遵循旧规则并且升级<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>遵循新规则时，导致两种可能的方式打破<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/consensus" style="color: #2c6fad; text-decoration-line: none;" title="When several nodes (usually most nodes on the network) all have the same blocks in their locally-validated best block chain.">共识</a>：</span></div>
<ol style="margin-left: 0px; padding-left: 20px;">
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-235">遵循新<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/consensus-rules" style="color: #2c6fad; text-decoration-line: none;" title="The block validation rules that full nodes follow to stay in consensus with other nodes.">共识规则</a>的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>被升级后<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>接受，但被未升级的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>拒绝。</span><span class="yiyi-st" id="yiyi-236">例如，在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>中使用新的交易功能：升级<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>了解该功能并接受该功能，但未升级的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>拒绝因为它违反了旧的规则。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-237">违反新的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/consensus-rules" style="color: #2c6fad; text-decoration-line: none;" title="The block validation rules that full nodes follow to stay in consensus with other nodes.">共识规则</a>的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>被升级后<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>拒绝，但被未升级的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>接受。</span><span class="yiyi-st" id="yiyi-238">例如，在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>中使用了滥用交易功能：升级后<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>拒绝它，因为它违反了新规则，但未升级的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>接受它，因为它遵循旧的规则。</span></div>
</li>
</ol>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-239">第一种情况，被未升级的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>拒绝，那些从其他未升级<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>获取<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">区块链</a>数据的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">挖矿</a>软件拒绝和那些从升级过的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>获取数据的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">挖矿</a>软件在同一条链上创建。</span><span class="yiyi-st" id="yiyi-240">这将创建永久性发散的链 - 一个用于未升级的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>，一个链接用于升级<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>-- 这被称为<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/hard-fork" id="term-hard-fork" style="color: black; text-decoration-line: none;" title="A permanent divergence in the block chain, commonly occurs when non-upgraded nodes can't validate blocks created by upgraded nodes that follow newer consensus rules.">硬分叉</a>。</span></div>
<div style="line-height: 1.5em;">
<img alt="Hard Fork" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-hard-fork.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-241">第二种情况，被升级后的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>拒绝，如果升级后的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>控制着主要的hash速率则可能阻止<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">区块链</a>永久发散。</span><span class="yiyi-st" id="yiyi-242"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain."></a>这是因为，在这种情况下，未升级节点和升级过的节点一样接受相同的快，所以升级后的节点可以创建一个更强的链，也被未升级节点所接受。</span><span class="yiyi-st" id="yiyi-243">这被称为<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/soft-fork" id="term-soft-fork" style="color: black; text-decoration-line: none;" title="A softfork is a change to the bitcoin protocol wherein only previously valid blocks/transactions are made invalid. Since old nodes will recognise the new blocks as valid, a softfork is backward-compatible.">软分叉</a>。</span></div>
<div style="line-height: 1.5em;">
<img alt="Soft Fork" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-soft-fork.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-244"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/fork" style="color: #2c6fad; text-decoration-line: none;" title="When two or more blocks have the same block height, forking the block chain. Typically occurs when two or more miners find blocks at nearly the same time. Can also happen as part of an attack."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/consensus-rules" style="color: #2c6fad; text-decoration-line: none;" title="The block validation rules that full nodes follow to stay in consensus with other nodes."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/soft-fork" style="color: #2c6fad; text-decoration-line: none;" title="A softfork is a change to the bitcoin protocol wherein only previously valid blocks/transactions are made invalid. Since old nodes will recognise the new blocks as valid, a softfork is backward-compatible."></a>虽然一个分叉实际上是区块链上发散，共识规则的改变经常被描述为它们潜在地创建一个硬分叉或者软分叉。</span><span class="yiyi-st" id="yiyi-245">例如，“将<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>的大小增加到1 MB以上需要一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/hard-fork" style="color: #2c6fad; text-decoration-line: none;" title="A permanent divergence in the block chain, commonly occurs when non-upgraded nodes can't validate blocks created by upgraded nodes that follow newer consensus rules.">硬分叉</a>“。在这个例子中，一个实际的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/fork" style="color: #2c6fad; text-decoration-line: none;" title="When two or more blocks have the same block height, forking the block chain. Typically occurs when two or more miners find blocks at nearly the same time. Can also happen as part of an attack.">分叉</a>不是必需的 - 但这是一个可能的结果。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-246"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/consensus-rules" style="color: #2c6fad; text-decoration-line: none;" title="The block validation rules that full nodes follow to stay in consensus with other nodes.">共识规则</a>的改变可能会以各种方式激活更改。</span><span class="yiyi-st" id="yiyi-247"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/soft-fork" style="color: #2c6fad; text-decoration-line: none;" title="A softfork is a change to the bitcoin protocol wherein only previously valid blocks/transactions are made invalid. Since old nodes will recognise the new blocks as valid, a softfork is backward-compatible."></a>在Bitcoin的前两年，中本聪同过发布立刻强制使用新规则的向后兼容的客户端改变执行了几次软分叉。</span><span class="yiyi-st" id="yiyi-248">已经通过标记日激活了多个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/soft-fork" style="color: #2c6fad; text-decoration-line: none;" title="A softfork is a change to the bitcoin protocol wherein only previously valid blocks/transactions are made invalid. Since old nodes will recognise the new blocks as valid, a softfork is backward-compatible.">软分叉</a>，例如<a class="auto-link" href="https://github.com/bitcoin/bips/blob/master/bip-0030.mediawiki" style="color: #2c6fad; text-decoration-line: none;">BIP30</a>，其中新规则开始在预设时间或<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-height" style="color: #2c6fad; text-decoration-line: none;" title="The number of blocks preceding a particular block on a block chain. For example, the genesis block has a height of zero because zero block preceded it.">块高度</a>强制执行。</span><span class="yiyi-st" id="yiyi-249"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/fork" style="color: #2c6fad; text-decoration-line: none;" title="When two or more blocks have the same block height, forking the block chain. Typically occurs when two or more miners find blocks at nearly the same time. Can also happen as part of an attack."></a><a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/uasf" id="term-uasf" style="color: black; text-decoration-line: none;" title="A Soft Fork activated by flag day or node enforcement instead of miner signalling."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/uasf" style="color: #2c6fad; text-decoration-line: none;" title="A Soft Fork activated by flag day or node enforcement instead of miner signalling."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network."></a>通过标记日激活的分叉被称为用户激活软分叉，因为他们取决于足够多的用户节点在标记日之后强制使用新规则。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-250"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/soft-fork" style="color: #2c6fad; text-decoration-line: none;" title="A softfork is a change to the bitcoin protocol wherein only previously valid blocks/transactions are made invalid. Since old nodes will recognise the new blocks as valid, a softfork is backward-compatible."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/consensus-rules" style="color: #2c6fad; text-decoration-line: none;" title="The block validation rules that full nodes follow to stay in consensus with other nodes."></a>稍后软分叉等待多数哈希速率（通常为75％或95％）来显示他们对执行新共识规则准备就绪。</span><span class="yiyi-st" id="yiyi-251">一旦信令阈值已经通过，所有<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>将开始执行新规则。</span><span class="yiyi-st" id="yiyi-252">这样的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/fork" style="color: #2c6fad; text-decoration-line: none;" title="When two or more blocks have the same block height, forking the block chain. Typically occurs when two or more miners find blocks at nearly the same time. Can also happen as part of an attack.">分叉</a>被称为<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/masf" id="term-masf" style="color: black; text-decoration-line: none;" title="A Soft Fork activated by through miner signalling.">矿工激活软分叉</a>(<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/masf" style="color: #2c6fad; text-decoration-line: none;" title="A Soft Fork activated by through miner signalling.">MASF</a>)，因为它们依赖于<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">矿工</a>进行激活。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-253"><strong>资源：</strong>&nbsp;<a href="https://github.com/bitcoin/bips/blob/master/bip-0016.mediawiki" style="color: #2c6fad; text-decoration-line: none;">BIP16</a>,<a href="https://github.com/bitcoin/bips/blob/master/bip-0030.mediawiki" style="color: #2c6fad; text-decoration-line: none;">BIP30</a>和<a href="https://github.com/bitcoin/bips/blob/master/bip-0034.mediawiki" style="color: #2c6fad; text-decoration-line: none;">BIP34</a>被实现为可能导致<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/soft-fork" style="color: #2c6fad; text-decoration-line: none;" title="A softfork is a change to the bitcoin protocol wherein only previously valid blocks/transactions are made invalid. Since old nodes will recognise the new blocks as valid, a softfork is backward-compatible.">软分叉。</a></span><span class="yiyi-st" id="yiyi-254"><a href="https://github.com/bitcoin/bips/blob/master/bip-0050.mediawiki" style="color: #2c6fad; text-decoration-line: none;"></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/hard-fork" style="color: #2c6fad; text-decoration-line: none;" title="A permanent divergence in the block chain, commonly occurs when non-upgraded nodes can't validate blocks created by upgraded nodes that follow newer consensus rules."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/hard-fork" style="color: #2c6fad; text-decoration-line: none;" title="A permanent divergence in the block chain, commonly occurs when non-upgraded nodes can't validate blocks created by upgraded nodes that follow newer consensus rules."></a>BIP50描述了一个意外的硬分叉和一个蓄意的硬分叉可以通过临时降级升级后节点的能力来解决。</span><span class="yiyi-st" id="yiyi-255">来自Gavin Andresen的文档概述了<a href="https://gist.github.com/gavinandresen/2355445" style="color: #2c6fad; text-decoration-line: none;">如何实施未来的规则更改</a>。</span></div>
<h4 class=" anchorAf" id="detecting-forks" style="color: #383838; font-size: 17.6px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-256">检测分叉</span></h4>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_block_chain.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-257"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_block_chain.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_block_chain.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_block_chain.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-258">未升级的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>可以在两种类型的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/fork" style="color: #2c6fad; text-decoration-line: none;" title="When two or more blocks have the same block height, forking the block chain. Typically occurs when two or more miners find blocks at nearly the same time. Can also happen as part of an attack.">分叉</a>中使用和分发不正确的信息，从而出现可能导致财务损失的几种情况。</span><span class="yiyi-st" id="yiyi-259">特别地，未升级的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>可以中继和接受被升级的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>认为无效的交易，因此永远不会成为普遍认可的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">最佳区块链的一部分。</a></span><span class="yiyi-st" id="yiyi-260"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain."></a>未升级的节点可能拒绝中继那些已经或者即将添加到最佳区块链里面的区块或者交易，因此它们提供不完整的信息。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-261">比特币核心包括通过查看<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/proof-of-work" style="color: #2c6fad; text-decoration-line: none;" title="A hash below a target value which can only be obtained, on average, by performing a certain amount of brute force work---therefore demonstrating proof of work.">工作量证明</a>检测<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/hard-fork" style="color: #2c6fad; text-decoration-line: none;" title="A permanent divergence in the block chain, commonly occurs when non-upgraded nodes can't validate blocks created by upgraded nodes that follow newer consensus rules.">硬分叉</a>。</span><span class="yiyi-st" id="yiyi-262"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/proof-of-work" style="color: #2c6fad; text-decoration-line: none;" title="A hash below a target value which can only be obtained, on average, by performing a certain amount of brute force work---therefore demonstrating proof of work."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getinfo" style="color: #2c6fad; text-decoration-line: none;"></a><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;"></code><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;"></code>如果一个未升级的节点接收到的区块链头显示至少比最佳链的工作量多6个区块，这个节点就会在getinfo RPC里报一个错误，并在设置的情况下执行-alertnotify命令。</span><span class="yiyi-st" id="yiyi-263"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain."></a>这会提醒操作者未升级的节点不能切换到可能的最佳区块链。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-264">完整<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>也可以检查<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">区块</a>和交易的版本号。</span><span class="yiyi-st" id="yiyi-265"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/consensus-rules" style="color: #2c6fad; text-decoration-line: none;" title="The block validation rules that full nodes follow to stay in consensus with other nodes."></a>如果当前几个区块中的区块或者交易的版本号比这个节点使用的版本号高，可以假设它没有使用当前的共识规则。</span><span class="yiyi-st" id="yiyi-266"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/release/v0.10.0" style="color: #2c6fad; text-decoration-line: none;">Bitcoin Core 0.10.0</a>如果设置了会通过<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getinfo" style="color: #2c6fad; text-decoration-line: none;"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getinfo</code>&nbsp;RPC</a>和<code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">-alertnotify</code>命令报告此情况。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-267"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/consensus-rules" style="color: #2c6fad; text-decoration-line: none;" title="The block validation rules that full nodes follow to stay in consensus with other nodes."></a>无论哪种情况，区块和交易数据都不能被信任如果它们来自于一个明显不使用当前共识规则的节点。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-268"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/simplified-payment-verification" style="color: #2c6fad; text-decoration-line: none;" title="A method for verifying if particular transactions are included in a block without downloading the entire block. The method is used by some lightweight Bitcoin clients."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/hard-fork" style="color: #2c6fad; text-decoration-line: none;" title="A permanent divergence in the block chain, commonly occurs when non-upgraded nodes can't validate blocks created by upgraded nodes that follow newer consensus rules."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-height" style="color: #2c6fad; text-decoration-line: none;" title="The number of blocks preceding a particular block on a block chain. For example, the genesis block has a height of zero because zero block preceded it."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/stale-block" style="color: #2c6fad; text-decoration-line: none;" title="Blocks which were successfully mined but which aren't included on the current best block chain, likely because some other block at the same height had its chain extended first."></a>连接到全节点的SPV客户端通过连接多个全节点，确保他们在同一个链上具有相同的块高，或者根据账户传输时延和过期与否增减几个区块，能够测到一个可能的硬分叉。</span><span class="yiyi-st" id="yiyi-269">如果存在分歧，客户端可以使用较弱的链从<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>断开连接。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-270"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/simplified-payment-verification" style="color: #2c6fad; text-decoration-line: none;" title="A method for verifying if particular transactions are included in a block without downloading the entire block. The method is used by some lightweight Bitcoin clients."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-transaction-version-number" style="color: #2c6fad; text-decoration-line: none;" title="A version number prefixed to transactions to allow upgrading&quot;"></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/consensus-rules" style="color: #2c6fad; text-decoration-line: none;" title="The block validation rules that full nodes follow to stay in consensus with other nodes."></a>SPV客户端还应该监控块和交易的版本号增加，以确保它们用当前的共识规则处理接收到的交易。</span></div>
<h2 class=" anchorAf" id="transactions" style="color: #383838; font-family: Ubuntu, sans-serif; font-size: 24px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-271">交易</span></h2>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_transactions.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-272"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_transactions.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_transactions.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_transactions.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-273">交易让用户花费<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis(聪)</a>。</span><span class="yiyi-st" id="yiyi-274">每个交易都由几个部分构成，这些部分既可以实现简单的直接付款，也可以实现复杂的交易。</span><span class="yiyi-st" id="yiyi-275">本节将介绍每个部分，并演示如何一起使用它们来构建完整的事务。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-276">为了保持简单，本节假设<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/coinbase-transaction" style="color: #2c6fad; text-decoration-line: none;" title="The first transaction in a block. Always created by a miner, it includes a single coinbase.">币基交易</a>不存在。</span><span class="yiyi-st" id="yiyi-277"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/coinbase-transaction" style="color: #2c6fad; text-decoration-line: none;" title="The first transaction in a block. Always created by a miner, it includes a single coinbase.">币基交易</a>只能由Bitcoin&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">矿工</a>创建，它们是下列许多规则的例外。</span><span class="yiyi-st" id="yiyi-278"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/coinbase" style="color: #2c6fad; text-decoration-line: none;" title="A special field used as the sole input for coinbase transactions. The coinbase allows claiming the block reward and provides up to 100 bytes for arbitrary data."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/coinbase-transaction" style="color: #2c6fad; text-decoration-line: none;" title="The first transaction in a block. Always created by a miner, it includes a single coinbase."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain."></a>不要对每条规则考虑币基例外，请读本指南中区块链一节中的币基交易部分。</span></div>
<div style="line-height: 1.5em;">
<img alt="The Parts Of A Transaction" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-tx-overview.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-279">上图显示了比特币交易的主要部分。</span><span class="yiyi-st" id="yiyi-280">每个交易至少有一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it.">输入</a>和一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>。</span><span class="yiyi-st" id="yiyi-281"><a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" id="term-input" style="color: black; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a>每个输入花费来源于先前的输出的satoshis。</span><span class="yiyi-st" id="yiyi-282"><a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" id="term-output" style="color: black; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/unspent-transaction-output" style="color: #2c6fad; text-decoration-line: none;" title="An Unspent Transaction Output (UTXO) that can be spent as an input in a new transaction."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it."></a>然后，每个输出等待未花费的交易输出UTXO，直到稍后另外一个输入花费它。</span><span class="yiyi-st" id="yiyi-283"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/unspent-transaction-output" style="color: #2c6fad; text-decoration-line: none;" title="An Unspent Transaction Output (UTXO) that can be spent as an input in a new transaction."></a>当比特币钱包告诉你你有10000聪，实际上意味着你有10000聪在一个或多个UTXO等待被花费。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-284"><a class="term" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-transaction-version-number" id="term-transaction-version-number" style="color: black; text-decoration-line: none;" title="A version number prefixed to transactions to allow upgrading&quot;"></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a>每个交易都有四字节交易版本号作为前缀，它告诉Bitcoin节点和矿工使用哪些规则进行验证它。</span><span class="yiyi-st" id="yiyi-285">这样，开发人员可以为将来的交易创建新规则，而不会使以前的交易无效。</span></div>
<div style="line-height: 1.5em;">
<img alt="Spending An Output" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-tx-overview-spending.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-286"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>根据其在交易中的位置具有隐含的索引号 - 第一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>是<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>零。</span><span class="yiyi-st" id="yiyi-287"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>也有多少<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis(聪)</a>中的一个数额，它支付给条件<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code.">pubkey脚本</a>。</span><span class="yiyi-st" id="yiyi-288">任何满足<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code.">pubkey脚本</a>的条件的人可以花费支付的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>的数额。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-289"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it.">输入</a>使用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/txid" style="color: #2c6fad; text-decoration-line: none;" title="An identifier used to uniquely identify a particular transaction; specifically, the sha256d hash of the transaction.">交易标识符</a>（<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/txid" style="color: #2c6fad; text-decoration-line: none;" title="An identifier used to uniquely identify a particular transaction; specifically, the sha256d hash of the transaction.">txid</a>）和<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-output-index" style="color: #2c6fad; text-decoration-line: none;" title="The sequentially-numbered index of outputs in a single transaction starting from 0">输出索引</a>号码（通常称为“vout”&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>向量），来识别要花费的特定<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>。</span><span class="yiyi-st" id="yiyi-290">它还有一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature-script" style="color: #2c6fad; text-decoration-line: none;" title="Data generated by a spender which is almost always used as variables to satisfy a pubkey script. Signature Scripts are called scriptSig in code.">签名脚本</a>，来提供满足<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code.">pubkey脚本</a>中的条件的数据参数。</span><span class="yiyi-st" id="yiyi-291">（<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/sequence-number" style="color: #2c6fad; text-decoration-line: none;" title="Part of all transactions. A number intended to allow unconfirmed time-locked transactions to be updated before being finalized; not currently used except to disable locktime in a transaction">序列号</a>和<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/locktime" style="color: #2c6fad; text-decoration-line: none;" title="Part of a transaction which indicates the earliest time or earliest block when that transaction may be added to the block chain.">locktime</a>是相关的，将在后面的小节中一起讨论。）</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-292">下图帮助说明如何使用这些功能，展示了Alice用于向Bob发送一个交易的工作流程，以及Bob稍后用于支付的工作流程。</span><span class="yiyi-st" id="yiyi-293">Alice和Bob都使用最常见的标准Pay-To-Public-Key-Hash（P2PKH）交易类型。</span><span class="yiyi-st" id="yiyi-294"><a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/p2pkh-address" id="term-p2pkh" style="color: black; text-decoration-line: none;" title="A Bitcoin payment address comprising a hashed public key, allowing the spender to create a standard pubkey script that Pays To PubKey Hash (P2PKH).">P2PKH</a>让Alice花费<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>到一个典型的比特币<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>，然后让Bob稍后用简单<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-key-pair" style="color: #2c6fad; text-decoration-line: none;" title="A private key and its derived public key">密钥对</a>使用这些<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>。</span></div>
<div style="line-height: 1.5em;">
<img alt="Creating A P2PKH Public Key Hash To Receive Payment" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-creating-p2pkh-output.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-295">在Alice创建第一个交易之前，Bob必须先生成一个私有/公开的<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-key-pair" id="term-key-pair" style="color: black; text-decoration-line: none;" title="A private key and its derived public key">密钥对</a>。</span><span class="yiyi-st" id="yiyi-296"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature" style="color: #2c6fad; text-decoration-line: none;" title="A value related to a public key which could only have reasonably been created by someone who has the private key that created that public key. Used in Bitcoin to authorize spending satoshis previously sent to a public key."></a><a class="auto-link" href="https://en.wikipedia.org/wiki/Elliptic_Curve_DSA" style="color: #2c6fad; text-decoration-line: none;"></a><a class="auto-link" href="http://www.secg.org/sec2-v2.pdf" style="color: #2c6fad; text-decoration-line: none;"></a><a class="auto-link" href="http://www.secg.org/sec2-v2.pdf" style="color: #2c6fad; text-decoration-line: none;"></a><a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" id="term-private-key" style="color: black; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key."></a>比特币使用secp256k1的椭圆曲线数字签名算法(ECDSA)；secp256k1私钥是256位随机数据。</span><span class="yiyi-st" id="yiyi-297">该数据的副本被确定地转换为<a class="auto-link" href="http://www.secg.org/sec2-v2.pdf" style="color: #2c6fad; text-decoration-line: none;">secp256k1</a>&nbsp;<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" id="term-public-key" style="color: black; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>。</span><span class="yiyi-st" id="yiyi-298">因为以后可以可靠地进行转换，所以不需要存储<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-299">然后<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>（<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">pubkey</a>）经过密码哈希运算。</span><span class="yiyi-st" id="yiyi-300">此<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/p2pkh-address" style="color: #2c6fad; text-decoration-line: none;" title="A Bitcoin payment address comprising a hashed public key, allowing the spender to create a standard pubkey script that Pays To PubKey Hash (P2PKH).">pubkey哈希运算</a>也可以在以后可靠地重复，因此也不需要存储。</span><span class="yiyi-st" id="yiyi-301"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair."></a>哈希运算缩短并混淆了公钥，使人工转录更容易，并提供安全性，防止从公钥重建私钥这样的意外问题。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-302">Bob向Alice提供了<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/p2pkh-address" style="color: #2c6fad; text-decoration-line: none;" title="A Bitcoin payment address comprising a hashed public key, allowing the spender to create a standard pubkey script that Pays To PubKey Hash (P2PKH).">pubkey哈希值</a>。</span><span class="yiyi-st" id="yiyi-303"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/p2pkh-address" style="color: #2c6fad; text-decoration-line: none;" title="A Bitcoin payment address comprising a hashed public key, allowing the spender to create a standard pubkey script that Pays To PubKey Hash (P2PKH).">Pubkey哈希值</a>几乎总是被编码为Bitcoin&nbsp;<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" id="term-address" style="color: black; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>，它们是包含<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>版本号，哈希值，来捕获打字错误的checksum错误检测校验<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/base58check" style="color: #2c6fad; text-decoration-line: none;" title="The method used in Bitcoin for converting 160-bit hashes into P2PKH and P2SH addresses. Also used in other parts of Bitcoin, such as encoding private keys for backup in WIP format. Not the same as other base58 implementations.">base58</a>编码字符串。</span><span class="yiyi-st" id="yiyi-304"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-bitcoin-uri" style="color: #2c6fad; text-decoration-line: none;" title="A URI which allows receivers to encode payment details so spenders don't have to manually enter addresses and other details"></a><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;"></code>地址可以通过任何介质传输，包括防止与之通信的接收者花销的单向介质，并可以进一步编码为另外一种格式，例如包含比特币URI的OR码。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-305">一旦Alice拥有<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>并将其解码为标准哈希值，就可以创建第一个交易。</span><span class="yiyi-st" id="yiyi-306"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair."></a>她创建了一个包含指令的标准的P2PKH交易输出，这个指令允许任何人花费这个输出,若他们能证明他们控制着相应于Bob哈希过的公钥的私钥。</span><span class="yiyi-st" id="yiyi-307">这些指令称为<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" id="term-pubkey-script" style="color: black; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code.">pubkey脚本</a>或<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code.">scriptPubKey</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-308">爱丽丝广播该交易，并将其添加到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">区块链</a>。</span><span class="yiyi-st" id="yiyi-309"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks"></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/unspent-transaction-output" style="color: #2c6fad; text-decoration-line: none;" title="An Unspent Transaction Output (UTXO) that can be spent as an input in a new transaction."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis."></a>网络将它归类为未花费的交易输出UTXO，Bob的钱包软件也将其显示为可花费的数额。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-310"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/unspent-transaction-output" style="color: #2c6fad; text-decoration-line: none;" title="An Unspent Transaction Output (UTXO) that can be spent as an input in a new transaction."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/txid" style="color: #2c6fad; text-decoration-line: none;" title="An identifier used to uniquely identify a particular transaction; specifically, the sha256d hash of the transaction."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/txid" style="color: #2c6fad; text-decoration-line: none;" title="An identifier used to uniquely identify a particular transaction; specifically, the sha256d hash of the transaction."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a><a class="term" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-output-index" id="term-output-index" style="color: black; text-decoration-line: none;" title="The sequentially-numbered index of outputs in a single transaction starting from 0"></a>一段时间后，Bob决定花费UTXO，他必须创建一个输入，该输入引用Alice创建的有交易标识符txid的交易和有输出索引的特定输出。</span><span class="yiyi-st" id="yiyi-311"><a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature-script" id="term-signature-script" style="color: black; text-decoration-line: none;" title="Data generated by a spender which is almost always used as variables to satisfy a pubkey script. Signature Scripts are called scriptSig in code."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code."></a>然后他必须创建一个签名脚本 - 满足Alice在之前输出pubkey脚本里列出的条件的一组数据参数。</span><span class="yiyi-st" id="yiyi-312"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature-script" style="color: #2c6fad; text-decoration-line: none;" title="Data generated by a spender which is almost always used as variables to satisfy a pubkey script. Signature Scripts are called scriptSig in code.">签名脚本</a>也称为<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature-script" style="color: #2c6fad; text-decoration-line: none;" title="Data generated by a spender which is almost always used as variables to satisfy a pubkey script. Signature Scripts are called scriptSig in code.">scriptSigs</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-313"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature-script" style="color: #2c6fad; text-decoration-line: none;" title="Data generated by a spender which is almost always used as variables to satisfy a pubkey script. Signature Scripts are called scriptSig in code."></a><a class="auto-link" href="http://www.secg.org/sec2-v2.pdf" style="color: #2c6fad; text-decoration-line: none;"></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature" style="color: #2c6fad; text-decoration-line: none;" title="A value related to a public key which could only have reasonably been created by someone who has the private key that created that public key. Used in Bitcoin to authorize spending satoshis previously sent to a public key."></a>Pubkey脚本和签名脚本根据条件逻辑组合secp256k1公钥和签名，创建一个可编程认证机制。</span></div>
<div style="line-height: 1.5em;">
<img alt="Unlocking A P2PKH Output For Spending" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-unlocking-p2pkh-output.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-314">对于P2PKH风格的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>，Bob的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature-script" style="color: #2c6fad; text-decoration-line: none;" title="Data generated by a spender which is almost always used as variables to satisfy a pubkey script. Signature Scripts are called scriptSig in code.">签名脚本</a>将包含以下两个数据：</span></div>
<ol style="margin-left: 0px; padding-left: 20px;">
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-315">他的完整（unhashed）<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>，所以<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code.">pubkey脚本</a>可以检查它的哈希值与Alice提供的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/p2pkh-address" style="color: #2c6fad; text-decoration-line: none;" title="A Bitcoin payment address comprising a hashed public key, allowing the spender to create a standard pubkey script that Pays To PubKey Hash (P2PKH).">pubkey哈希</a>值是否相同。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-316"><a class="auto-link" href="http://www.secg.org/sec2-v2.pdf" style="color: #2c6fad; text-decoration-line: none;"></a><a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature" id="term-signature" style="color: black; text-decoration-line: none;" title="A value related to a public key which could only have reasonably been created by someone who has the private key that created that public key. Used in Bitcoin to authorize spending satoshis previously sent to a public key."></a><a class="auto-link" href="https://en.wikipedia.org/wiki/Elliptic_Curve_DSA" style="color: #2c6fad; text-decoration-line: none;"></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key."></a>通过ECDSA密码公式制作的secp256k1签名将特定交易数据（如下所述）与Bob的私钥组合。</span><span class="yiyi-st" id="yiyi-317">这使得<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code.">pubkey脚本</a>能验证Bob拥有创建<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>。</span></div>
</li>
</ol>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-318"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature" style="color: #2c6fad; text-decoration-line: none;" title="A value related to a public key which could only have reasonably been created by someone who has the private key that created that public key. Used in Bitcoin to authorize spending satoshis previously sent to a public key."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature" style="color: #2c6fad; text-decoration-line: none;" title="A value related to a public key which could only have reasonably been created by someone who has the private key that created that public key. Used in Bitcoin to authorize spending satoshis previously sent to a public key."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks"></a>Bob的secp256k1签名不仅证明Bob控制着他的私钥，也使得他的交易的非签名脚本部分防止被篡改，便于Bob安全地将他们广播到P2P网络。</span></div>
<div style="line-height: 1.5em;">
<img alt="Some Things Signed When Spending An Output" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-signing-output-to-spend.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-319"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/txid" style="color: #2c6fad; text-decoration-line: none;" title="An identifier used to uniquely identify a particular transaction; specifically, the sha256d hash of the transaction."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-output-index" style="color: #2c6fad; text-decoration-line: none;" title="The sequentially-numbered index of outputs in a single transaction starting from 0"></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis."></a>如上图所示，Bob签名的数据包括之前交易的txid，之前输出的pubkey脚本，Bob创建让下一个接收者花费交易输出的pubkey脚本，satoshis的金额。</span><span class="yiyi-st" id="yiyi-320">实质上，除了保存完整的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>和<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature" style="color: #2c6fad; text-decoration-line: none;" title="A value related to a public key which could only have reasonably been created by someone who has the private key that created that public key. Used in Bitcoin to authorize spending satoshis previously sent to a public key.">secp256k1签名</a>的任何<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature-script" style="color: #2c6fad; text-decoration-line: none;" title="Data generated by a spender which is almost always used as variables to satisfy a pubkey script. Signature Scripts are called scriptSig in code.">签名脚本</a>之外，整个交易都被签名。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-321"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature" style="color: #2c6fad; text-decoration-line: none;" title="A value related to a public key which could only have reasonably been created by someone who has the private key that created that public key. Used in Bitcoin to authorize spending satoshis previously sent to a public key."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature-script" style="color: #2c6fad; text-decoration-line: none;" title="Data generated by a spender which is almost always used as variables to satisfy a pubkey script. Signature Scripts are called scriptSig in code."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks"></a>在Bob把他的签名和公钥放到签名脚本之后，Bob通过P2P网络将该交易广播给Bitcoin矿工。</span><span class="yiyi-st" id="yiyi-322"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain."></a>每个节点和矿工在进一步广播或试图将其加入一个包含交易的新块之前独立地验证交易。</span></div>
<h3 class=" anchorAf" id="p2pkh-script-validation" style="color: #383838; font-size: 20.8px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-323">P2PKH脚本验证</span></h3>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_transactions.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-324"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_transactions.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_transactions.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_transactions.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-325">验证过程需要评估<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature-script" style="color: #2c6fad; text-decoration-line: none;" title="Data generated by a spender which is almost always used as variables to satisfy a pubkey script. Signature Scripts are called scriptSig in code.">签名脚本</a>和<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code.">pubkey脚本</a>。</span><span class="yiyi-st" id="yiyi-326">在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/p2pkh-address" style="color: #2c6fad; text-decoration-line: none;" title="A Bitcoin payment address comprising a hashed public key, allowing the spender to create a standard pubkey script that Pays To PubKey Hash (P2PKH).">P2PKH输出</a>中，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code.">pubkey脚本</a>是：</span></div>
<div class="highlighter-rouge">
<pre style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 12px; line-height: 1.5em; overflow-y: auto; padding: 17px;"><code style="border-radius: 3px; border: 0px; font-family: monospace, serif; padding: 0px;">OP_DUP OP_HASH160 &lt;PubkeyHash&gt; OP_EQUALVERIFY OP_CHECKSIG
</code></pre>
</div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-327">花费者的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature-script" style="color: #2c6fad; text-decoration-line: none;" title="Data generated by a spender which is almost always used as variables to satisfy a pubkey script. Signature Scripts are called scriptSig in code.">签名脚本</a>被评估并作为脚本的开头。</span><span class="yiyi-st" id="yiyi-328">在P2PKH事务中，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature-script" style="color: #2c6fad; text-decoration-line: none;" title="Data generated by a spender which is almost always used as variables to satisfy a pubkey script. Signature Scripts are called scriptSig in code.">签名脚本</a>包含<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature" style="color: #2c6fad; text-decoration-line: none;" title="A value related to a public key which could only have reasonably been created by someone who has the private key that created that public key. Used in Bitcoin to authorize spending satoshis previously sent to a public key.">secp256k1签名</a>（sig）和完整的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>（<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">pubkey</a>），创建以下连接：</span></div>
<div class="highlighter-rouge">
<pre style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 12px; line-height: 1.5em; overflow-y: auto; padding: 17px;"><code style="border-radius: 3px; border: 0px; font-family: monospace, serif; padding: 0px;">&lt;Sig&gt; &lt;PubKey&gt; OP_DUP OP_HASH160 &lt;PubkeyHash&gt; OP_EQUALVERIFY OP_CHECKSIG
</code></pre>
</div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-329">脚本语言是一种<a href="https://en.wikipedia.org/wiki/Forth_%28programming_language%29" style="color: #2c6fad; text-decoration-line: none;">类似</a>Forth基于堆栈的语言，故意设计为无状态，而不是图灵完备的。</span><span class="yiyi-st" id="yiyi-330">无状态确保一旦交易被添加到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>，就没有任何条件使其永久不可用。</span><span class="yiyi-st" id="yiyi-331">图灵不完备（特别是缺少循环或gotos）使脚本语言灵活性更低，更可预测，大大简化了安全模型。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-332"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature-script" style="color: #2c6fad; text-decoration-line: none;" title="Data generated by a spender which is almost always used as variables to satisfy a pubkey script. Signature Scripts are called scriptSig in code."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature-script" style="color: #2c6fad; text-decoration-line: none;" title="Data generated by a spender which is almost always used as variables to satisfy a pubkey script. Signature Scripts are called scriptSig in code."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code."></a>为了测试交易是否有效，从Bob的签名脚本开始到Alice的pubkey脚本的末尾，签名脚本和pubkey脚本操作一次执行一个条目。</span><span class="yiyi-st" id="yiyi-333">下图显示了标准<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/p2pkh-address" style="color: #2c6fad; text-decoration-line: none;" title="A Bitcoin payment address comprising a hashed public key, allowing the spender to create a standard pubkey script that Pays To PubKey Hash (P2PKH).">P2PKH公钥脚本</a>的评估过程；下图是对该过程的描述。</span></div>
<div style="line-height: 1.5em;">
<img alt="P2PKH Stack Evaluation" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-p2pkh-stack.svg" style="border: 0px; max-width: 100%;" /></div>
<ul style="margin-left: 0px; padding-left: 20px;">
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-334">将<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature" style="color: #2c6fad; text-decoration-line: none;" title="A value related to a public key which could only have reasonably been created by someone who has the private key that created that public key. Used in Bitcoin to authorize spending satoshis previously sent to a public key.">签名</a>（来自Bob的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature-script" style="color: #2c6fad; text-decoration-line: none;" title="Data generated by a spender which is almost always used as variables to satisfy a pubkey script. Signature Scripts are called scriptSig in code.">签名脚本</a>）添加（压入）一个空堆栈。</span><span class="yiyi-st" id="yiyi-335">因为它只是数据，除了将它添加到堆栈之外什么都不做。</span><span class="yiyi-st" id="yiyi-336"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>（也来自<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature-script" style="color: #2c6fad; text-decoration-line: none;" title="Data generated by a spender which is almost always used as variables to satisfy a pubkey script. Signature Scripts are called scriptSig in code.">签名脚本</a>）被压入到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature" style="color: #2c6fad; text-decoration-line: none;" title="A value related to a public key which could only have reasonably been created by someone who has the private key that created that public key. Used in Bitcoin to authorize spending satoshis previously sent to a public key.">签名</a>之上。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-337">从Alice的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code.">pubkey脚本</a>，执行<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#term-op-dup" style="color: #2c6fad; text-decoration-line: none;" title="Operation which duplicates the entry below it on the stack"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">OP_DUP</code></a>操作。</span><span class="yiyi-st" id="yiyi-338"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#term-op-dup" style="color: #2c6fad; text-decoration-line: none;" title="Operation which duplicates the entry below it on the stack"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">OP_DUP</code></a>将当前位于其顶部的数据的副本压入堆栈，在这种情况下创建一个Bob提供的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>的副本。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-339"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#term-op-hash160" style="color: #2c6fad; text-decoration-line: none;" title="Operation which converts the entry below it on the stack into a RIPEMD(SHA256()) hashed version of itself"></a><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;"></code><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair."></a>接下来执行的操作OP_HASH160将当前位于其上的数据即Bob的公钥的哈希值压入堆栈 。</span><span class="yiyi-st" id="yiyi-340">这创建了一个Bob的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>的散列。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-341"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/p2pkh-address" style="color: #2c6fad; text-decoration-line: none;" title="A Bitcoin payment address comprising a hashed public key, allowing the spender to create a standard pubkey script that Pays To PubKey Hash (P2PKH)."></a>然后，Alice的pubkey脚本将Bob在第一个交易时给她的pubkey哈希值压入。</span><span class="yiyi-st" id="yiyi-342"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/p2pkh-address" style="color: #2c6fad; text-decoration-line: none;" title="A Bitcoin payment address comprising a hashed public key, allowing the spender to create a standard pubkey script that Pays To PubKey Hash (P2PKH)."></a>这样，在堆栈顶端有两个Bob的pubkey哈希值。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-343"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#term-op-equalverify" style="color: #2c6fad; text-decoration-line: none;" title="Operation which terminates the script in failure unless the two entries below it on the stack are equivalent"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;"></code></a>现在变得有趣，Alice的pubkey脚本执行OP_EQUALVERIFY，</span><span class="yiyi-st" id="yiyi-344"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#term-op-equalverify" style="color: #2c6fad; text-decoration-line: none;" title="Operation which terminates the script in failure unless the two entries below it on the stack are equivalent"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">OP_EQUALVERIFY</code></a>相当于执行<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#term-op-equal" style="color: #2c6fad; text-decoration-line: none;" title="Operation which returns true if the two entries below it on the stack are equivalent"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">OP_EQUAL</code></a>，后跟<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#term-op-verify" style="color: #2c6fad; text-decoration-line: none;" title="Operation which terminates the script if the entry below it on the stack is non-true (zero)"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">OP_VERIFY</code></a>（未显示）。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-345"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#term-op-equal" style="color: #2c6fad; text-decoration-line: none;" title="Operation which returns true if the two entries below it on the stack are equivalent"></a><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;"></code><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/p2pkh-address" style="color: #2c6fad; text-decoration-line: none;" title="A Bitcoin payment address comprising a hashed public key, allowing the spender to create a standard pubkey script that Pays To PubKey Hash (P2PKH)."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/p2pkh-address" style="color: #2c6fad; text-decoration-line: none;" title="A Bitcoin payment address comprising a hashed public key, allowing the spender to create a standard pubkey script that Pays To PubKey Hash (P2PKH)."></a>OP_EQUAL（未显示）检查堆栈顶部的两个值；在这种情况下，它检查从Bob提供的完整的公钥生成的pubkey哈希值是否等于当Alice创建事务#1时提供的pubkey哈希值 。</span><span class="yiyi-st" id="yiyi-346"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#term-op-equal" style="color: #2c6fad; text-decoration-line: none;" title="Operation which returns true if the two entries below it on the stack are equivalent"></a><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;"></code><em></em><em></em>OP_EQUAL弹出（从堆栈顶部移除）要比较的两个值，并用比较结果替换它们：0（false）或1（true）。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-347"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#term-op-verify" style="color: #2c6fad; text-decoration-line: none;" title="Operation which terminates the script if the entry below it on the stack is non-true (zero)"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">OP_VERIFY</code></a>（未显示）检查堆栈顶部的这个值。</span><span class="yiyi-st" id="yiyi-348">如果值为<em>false</em>，则会立即终止评估，并且交易验证失败。</span><span class="yiyi-st" id="yiyi-349">否则，它从堆栈中弹出<em>true</em>值。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-350"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#term-op-checksig" style="color: #2c6fad; text-decoration-line: none;" title="Opcode which returns true if a signature signs the correct parts of a transaction and matches a provided public key"></a><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;"></code><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature" style="color: #2c6fad; text-decoration-line: none;" title="A value related to a public key which could only have reasonably been created by someone who has the private key that created that public key. Used in Bitcoin to authorize spending satoshis previously sent to a public key."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair."></a>最后，Alice的pubkey脚本执行OP_CHECKSIG，它检查Bob提供的签名与Bob提供的现在认证的公钥是否匹配。</span><span class="yiyi-st" id="yiyi-351">如果<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature" style="color: #2c6fad; text-decoration-line: none;" title="A value related to a public key which could only have reasonably been created by someone who has the private key that created that public key. Used in Bitcoin to authorize spending satoshis previously sent to a public key.">签名</a>与<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>匹配，并是由所有需要签名的数据生成的，则<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#term-op-checksig" style="color: #2c6fad; text-decoration-line: none;" title="Opcode which returns true if a signature signs the correct parts of a transaction and matches a provided public key"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">OP_CHECKSIG</code></a><em>true 压入堆栈的顶部。</em></span></div>
</li>
</ul>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-352">评估<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code.">pubkey脚本</a>后，如果<em>false</em>不在堆栈的顶部，则交易是有效的（只要没有其他问题）。</span></div>
<h3 class=" anchorAf" id="p2sh-scripts" style="color: #383838; font-size: 20.8px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-353">P2SH脚本</span></h3>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_transactions.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-354"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_transactions.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_transactions.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_transactions.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-355"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code.">Pubkey脚本</a>是由对脚本所做的不太感兴趣的消费者创建的。</span><span class="yiyi-st" id="yiyi-356">接收者关心脚本条件，如果他们想要，他们可以要求消费者使用特定的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code.">公钥脚本</a>。</span><span class="yiyi-st" id="yiyi-357"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information."></a><a class="auto-link" href="https://github.com/bitcoin/bips/blob/master/bip-0070.mediawiki" style="color: #2c6fad; text-decoration-line: none;"></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/payment-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The protocol defined in BIP70 (and other BIPs) which lets spenders get signed payment details from receivers."></a>不幸的是，自定义的pubkey脚本不如短的比特币地址方便，并且稍后讨论的在BIP70支付协议普及实现之前，没有标准的方式在程序之间相互通信。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-358">为了解决这些问题，在2012年创建了pay-to-script-hash（<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/p2sh-address" id="term-p2sh" style="color: black; text-decoration-line: none;" title="A Bitcoin payment address comprising a hashed script, allowing the spender to create a standard pubkey script that Pays To Script Hash (P2SH). The script can be almost any valid pubkey script.">P2SH</a>）事务，让一个发起人创建一个包含第二个脚本的哈希的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code.">pubkey脚本</a><a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/redeem-script" id="term-redeem-script" style="color: black; text-decoration-line: none;" title="A script similar in function to a pubkey script. One copy of it is hashed to create a P2SH address (used in an actual pubkey script) and another copy is placed in the spending signature script to enforce its conditions.">redeem脚本</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-359">基本的P2SH工作流程如下图所示，看起来与P2PKH工作流程几乎相同。</span><span class="yiyi-st" id="yiyi-360">Bob用任何他想要的脚本创建一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/redeem-script" style="color: #2c6fad; text-decoration-line: none;" title="A script similar in function to a pubkey script. One copy of it is hashed to create a P2SH address (used in an actual pubkey script) and another copy is placed in the spending signature script to enforce its conditions.">兑换脚本</a>，将<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/redeem-script" style="color: #2c6fad; text-decoration-line: none;" title="A script similar in function to a pubkey script. One copy of it is hashed to create a P2SH address (used in an actual pubkey script) and another copy is placed in the spending signature script to enforce its conditions.">兑换脚本</a>哈希，并将<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/redeem-script" style="color: #2c6fad; text-decoration-line: none;" title="A script similar in function to a pubkey script. One copy of it is hashed to create a P2SH address (used in an actual pubkey script) and another copy is placed in the spending signature script to enforce its conditions.">兑换脚本哈希</a>提供给Alice。</span><span class="yiyi-st" id="yiyi-361">Alice创建一个包含Bob的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/redeem-script" style="color: #2c6fad; text-decoration-line: none;" title="A script similar in function to a pubkey script. One copy of it is hashed to create a P2SH address (used in an actual pubkey script) and another copy is placed in the spending signature script to enforce its conditions.">redeem脚本哈希</a>的P2SH样式的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>。</span></div>
<div style="line-height: 1.5em;">
<img alt="Creating A P2SH Redeem Script And Hash" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-creating-p2sh-output.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-362"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature" style="color: #2c6fad; text-decoration-line: none;" title="A value related to a public key which could only have reasonably been created by someone who has the private key that created that public key. Used in Bitcoin to authorize spending satoshis previously sent to a public key."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/redeem-script" style="color: #2c6fad; text-decoration-line: none;" title="A script similar in function to a pubkey script. One copy of it is hashed to create a P2SH address (used in an actual pubkey script) and another copy is placed in the spending signature script to enforce its conditions."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature-script" style="color: #2c6fad; text-decoration-line: none;" title="Data generated by a spender which is almost always used as variables to satisfy a pubkey script. Signature Scripts are called scriptSig in code."></a>当Bob想要花费输出时，他提供签名以及有完整序列化redeem脚本。</span><span class="yiyi-st" id="yiyi-363"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks"></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/redeem-script" style="color: #2c6fad; text-decoration-line: none;" title="A script similar in function to a pubkey script. One copy of it is hashed to create a P2SH address (used in an actual pubkey script) and another copy is placed in the spending signature script to enforce its conditions."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/redeem-script" style="color: #2c6fad; text-decoration-line: none;" title="A script similar in function to a pubkey script. One copy of it is hashed to create a P2SH address (used in an actual pubkey script) and another copy is placed in the spending signature script to enforce its conditions."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/redeem-script" style="color: #2c6fad; text-decoration-line: none;" title="A script similar in function to a pubkey script. One copy of it is hashed to create a P2SH address (used in an actual pubkey script) and another copy is placed in the spending signature script to enforce its conditions."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/redeem-script" style="color: #2c6fad; text-decoration-line: none;" title="A script similar in function to a pubkey script. One copy of it is hashed to create a P2SH address (used in an actual pubkey script) and another copy is placed in the spending signature script to enforce its conditions."></a>P2P网络确保完整的redeem脚本哈希值和Alice放在输出的脚本哈希值相等； 然后如果是主pubkey脚本的话，它处理输出redeem脚本， 如果redeem脚本不返回false的话让Bob花费输出。</span></div>
<div style="line-height: 1.5em;">
<img alt="Unlocking A P2SH Output For Spending" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-unlocking-p2sh-output.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-364"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/redeem-script" style="color: #2c6fad; text-decoration-line: none;" title="A script similar in function to a pubkey script. One copy of it is hashed to create a P2SH address (used in an actual pubkey script) and another copy is placed in the spending signature script to enforce its conditions."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/p2pkh-address" style="color: #2c6fad; text-decoration-line: none;" title="A Bitcoin payment address comprising a hashed public key, allowing the spender to create a standard pubkey script that Pays To PubKey Hash (P2PKH)."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information."></a>redeem脚本的哈希值具有与pubkey哈希相通的属性 - 可以将其转换为标准Bitcoin地址格式，只有一个小改变以区别标准的地址。</span><span class="yiyi-st" id="yiyi-365">这使得获取一个P2SH样式<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">的地址</a>就像获取P2PKH样式<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>一样简单。</span><span class="yiyi-st" id="yiyi-366">该哈希还混淆了<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/redeem-script" style="color: #2c6fad; text-decoration-line: none;" title="A script similar in function to a pubkey script. One copy of it is hashed to create a P2SH address (used in an actual pubkey script) and another copy is placed in the spending signature script to enforce its conditions.">redeem 脚本</a>中的任意<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>，因此P2SH脚本与P2PKH&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/p2pkh-address" style="color: #2c6fad; text-decoration-line: none;" title="A Bitcoin payment address comprising a hashed public key, allowing the spender to create a standard pubkey script that Pays To PubKey Hash (P2PKH).">pubkey哈希</a>一样安全。</span></div>
<h3 class=" anchorAf" id="standard-transactions" style="color: #383838; font-size: 20.8px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-367">标准交易</span></h3>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_transactions.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-368"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_transactions.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_transactions.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_transactions.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-369">在比特币早期版本中发现几个危险的错误之后，添加了一个测试，它只接受来自<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>的交易，如果他们的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code.">pubkey脚本</a>和<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature-script" style="color: #2c6fad; text-decoration-line: none;" title="Data generated by a spender which is almost always used as variables to satisfy a pubkey script. Signature Scripts are called scriptSig in code.">签名脚本</a>匹配一小组相信为安全的模板，并且如果其余的交易没有违反确保良好的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>行为的另一个小规则集。</span><span class="yiyi-st" id="yiyi-370">这就是<code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">IsStandard()</code>测试，通过测试的交易称为<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/standard-transaction" style="color: #2c6fad; text-decoration-line: none;" title="A transaction that passes Bitcoin Core's IsStandard() and IsStandardTx() tests. Only standard transactions are mined or broadcast by peers running the default Bitcoin Core software.">标准交易</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-371"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/standard-transaction" style="color: #2c6fad; text-decoration-line: none;" title="A transaction that passes Bitcoin Core's IsStandard() and IsStandardTx() tests. Only standard transactions are mined or broadcast by peers running the default Bitcoin Core software.">非标准交易</a>&nbsp;- 测试失败当不使用默认的Bitcoin Core设置时可能会被<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>接受。</span><span class="yiyi-st" id="yiyi-372">如果它们被包含在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">区块</a>中，它们也将避免IsStandard测试并被处理。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-373">除了通过广播有害的交易来攻击Bitcoin更加困难，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/standard-transaction" style="color: #2c6fad; text-decoration-line: none;" title="A transaction that passes Bitcoin Core's IsStandard() and IsStandardTx() tests. Only standard transactions are mined or broadcast by peers running the default Bitcoin Core software.">标准交易</a>测试也有助于防止用户今天创建交易，而使添加未来的新交易功能更加困难。</span><span class="yiyi-st" id="yiyi-374">例如，如上所述，每个交易包括版本号 - 如果用户开始任意地改变版本号，则作为引入向后不兼容特征的工具将变得无用。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-375">从Bitcoin Core 0.9开始，标准的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code.">pubkey脚本</a>类型是：</span></div>
<h4 class="no_toc anchorAf" id="pay-to-public-key-hash-p2pkh" style="color: #383838; font-size: 17.6px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-376">支付公钥哈希（P2PKH）</span></h4>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_transactions.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-377"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_transactions.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_transactions.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_transactions.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-378">P2PKH是用于将交易发送到一个或多个Bitcoin&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>的最常见的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code.">pubkey脚本形式</a>。</span></div>
<div class="highlighter-rouge">
<pre style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 12px; line-height: 1.5em; overflow-y: auto; padding: 17px;"><code style="border-radius: 3px; border: 0px; font-family: monospace, serif; padding: 0px;">Pubkey script: OP_DUP OP_HASH160 &lt;PubKeyHash&gt; OP_EQUALVERIFY OP_CHECKSIG
Signature script: &lt;sig&gt; &lt;pubkey&gt;
</code></pre>
</div>
<h4 class="no_toc anchorAf" id="pay-to-script-hash-p2sh" style="color: #383838; font-size: 17.6px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-379">支付脚本哈希（P2SH）</span></h4>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_transactions.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-380"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_transactions.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_transactions.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_transactions.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-381">P2SH用于将交易发送到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/redeem-script" style="color: #2c6fad; text-decoration-line: none;" title="A script similar in function to a pubkey script. One copy of it is hashed to create a P2SH address (used in an actual pubkey script) and another copy is placed in the spending signature script to enforce its conditions.">脚本哈希</a>。</span><span class="yiyi-st" id="yiyi-382">每个标准的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code.">pubkey脚本</a>可以用作P2SH&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/redeem-script" style="color: #2c6fad; text-decoration-line: none;" title="A script similar in function to a pubkey script. One copy of it is hashed to create a P2SH address (used in an actual pubkey script) and another copy is placed in the spending signature script to enforce its conditions.">redeem脚本</a>，但实际上只有<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/multisig" style="color: #2c6fad; text-decoration-line: none;" title="A pubkey script that provides *n* number of pubkeys and requires the corresponding signature script provide *m* minimum number signatures corresponding to the provided pubkeys.">multisig</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code.">pubkey脚本</a>有意义的是，直到更多的交易类型成为标准。</span></div>
<div class="highlighter-rouge">
<pre style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 12px; line-height: 1.5em; overflow-y: auto; padding: 17px;"><code style="border-radius: 3px; border: 0px; font-family: monospace, serif; padding: 0px;">Pubkey script: OP_HASH160 &lt;Hash160(redeemScript)&gt; OP_EQUAL
Signature script: &lt;sig&gt; [sig] [sig...] &lt;redeemScript&gt;
</code></pre>
</div>
<h4 class="no_toc anchorAf" id="multisig" style="color: #383838; font-size: 17.6px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-383">Multisig</span></h4>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_transactions.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-384"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_transactions.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_transactions.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_transactions.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-385"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/p2sh-multisig" style="color: #2c6fad; text-decoration-line: none;" title="A P2SH output where the redeem script uses one of the multisig opcodes. Up until Bitcoin Core 0.10.0, P2SH multisig scripts were standard transactions, but most other P2SH scripts were not."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/multisig" style="color: #2c6fad; text-decoration-line: none;" title="A pubkey script that provides *n* number of pubkeys and requires the corresponding signature script provide *m* minimum number signatures corresponding to the provided pubkeys."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature" style="color: #2c6fad; text-decoration-line: none;" title="A value related to a public key which could only have reasonably been created by someone who has the private key that created that public key. Used in Bitcoin to authorize spending satoshis previously sent to a public key."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/unspent-transaction-output" style="color: #2c6fad; text-decoration-line: none;" title="An Unspent Transaction Output (UTXO) that can be spent as an input in a new transaction."></a>虽然现在在mutlisig交易中广泛使用P2SH multisig脚本，但是在UTXO被花费之前，这个基本的脚本可用于要求多个签名。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-386"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/multisig" style="color: #2c6fad; text-decoration-line: none;" title="A pubkey script that provides *n* number of pubkeys and requires the corresponding signature script provide *m* minimum number signatures corresponding to the provided pubkeys."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/multisig" style="color: #2c6fad; text-decoration-line: none;" title="A pubkey script that provides *n* number of pubkeys and requires the corresponding signature script provide *m* minimum number signatures corresponding to the provided pubkeys."></a><em></em><em></em><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature" style="color: #2c6fad; text-decoration-line: none;" title="A value related to a public key which could only have reasonably been created by someone who has the private key that created that public key. Used in Bitcoin to authorize spending satoshis previously sent to a public key."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair."></a><em></em><em></em><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair."></a>在multisig pubkey脚本中，称为m-of-n, m是需要匹配公钥的签名的最小数量，n是提供的公钥数量。</span><span class="yiyi-st" id="yiyi-387"><em>m</em>和<em>n</em>应该是<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/op-code" style="color: #2c6fad; text-decoration-line: none;" title="Operation codes from the Bitcoin Script language which push data or perform functions within a pubkey script or signature script.">操作码</a>&nbsp;<code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">OP_1</code>到<code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">OP_16</code>，对应于期望的号码。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-388"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#term-op-checkmultisig" style="color: #2c6fad; text-decoration-line: none;" title="Opcode which returns true if one or more provided signatures (m) sign the correct parts of a transaction and match one or more provided public keys (n)"></a><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;"></code><em></em><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature" style="color: #2c6fad; text-decoration-line: none;" title="A value related to a public key which could only have reasonably been created by someone who has the private key that created that public key. Used in Bitcoin to authorize spending satoshis previously sent to a public key."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature-script" style="color: #2c6fad; text-decoration-line: none;" title="Data generated by a spender which is almost always used as variables to satisfy a pubkey script. Signature Scripts are called scriptSig in code."></a><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;"></code>由于必须和原始Bitcoin实现中的一个错误保持兼容性，OP_CHECKMULTISIG比m多消耗一个值，因此签名脚本的secp256k1签名列表必须以一个无用的占位的额外值OP_0开始。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-389"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature-script" style="color: #2c6fad; text-decoration-line: none;" title="Data generated by a spender which is almost always used as variables to satisfy a pubkey script. Signature Scripts are called scriptSig in code."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature" style="color: #2c6fad; text-decoration-line: none;" title="A value related to a public key which could only have reasonably been created by someone who has the private key that created that public key. Used in Bitcoin to authorize spending satoshis previously sent to a public key."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/redeem-script" style="color: #2c6fad; text-decoration-line: none;" title="A script similar in function to a pubkey script. One copy of it is hashed to create a P2SH address (used in an actual pubkey script) and another copy is placed in the spending signature script to enforce its conditions."></a>签名脚本的签名顺序必须根据公钥出现在pubkey脚本或redeem脚本的顺序对应。</span><span class="yiyi-st" id="yiyi-390">有关详细信息，请参阅<a href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#term-op-checkmultisig" style="color: #2c6fad; text-decoration-line: none;" title="Opcode which returns true if one or more provided signatures (m) sign the correct parts of a transaction and match one or more provided public keys (n)"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">OP_CHECKMULTISIG</code></a>中的说明。</span></div>
<div class="highlighter-rouge">
<pre style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 12px; line-height: 1.5em; overflow-y: auto; padding: 17px;"><code style="border-radius: 3px; border: 0px; font-family: monospace, serif; padding: 0px;">Pubkey script: &lt;m&gt; &lt;A pubkey&gt; [B pubkey] [C pubkey...] &lt;n&gt; OP_CHECKMULTISIG
Signature script: OP_0 &lt;A sig&gt; [B sig] [C sig...]
</code></pre>
</div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-391">虽然它不是一个单独的交易类型，但它是一个具有2-of-3的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/p2sh-multisig" style="color: #2c6fad; text-decoration-line: none;" title="A P2SH output where the redeem script uses one of the multisig opcodes. Up until Bitcoin Core 0.10.0, P2SH multisig scripts were standard transactions, but most other P2SH scripts were not.">P2SH multisig</a>：</span></div>
<div class="highlighter-rouge">
<pre style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 12px; line-height: 1.5em; overflow-y: auto; padding: 17px;"><code style="border-radius: 3px; border: 0px; font-family: monospace, serif; padding: 0px;">Pubkey script: OP_HASH160 &lt;Hash160(redeemScript)&gt; OP_EQUAL
Redeem script: &lt;OP_2&gt; &lt;A pubkey&gt; &lt;B pubkey&gt; &lt;C pubkey&gt; &lt;OP_3&gt; OP_CHECKMULTISIG
Signature script: OP_0 &lt;A sig&gt; &lt;C sig&gt; &lt;redeemScript&gt;
</code></pre>
</div>
<h4 class="no_toc anchorAf" id="pubkey" style="color: #383838; font-size: 17.6px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-392">Pubkey</span></h4>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_transactions.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-393"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_transactions.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_transactions.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_transactions.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-394"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">Pubkey</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>是<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/p2pkh-address" style="color: #2c6fad; text-decoration-line: none;" title="A Bitcoin payment address comprising a hashed public key, allowing the spender to create a standard pubkey script that Pays To PubKey Hash (P2PKH).">P2PKH pubkey脚本</a>的简化形式，但它们不像P2PKH那样安全，因此一般在新的交易不使用了。</span></div>
<div class="highlighter-rouge">
<pre style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 12px; line-height: 1.5em; overflow-y: auto; padding: 17px;"><code style="border-radius: 3px; border: 0px; font-family: monospace, serif; padding: 0px;">Pubkey script: &lt;pubkey&gt; OP_CHECKSIG
Signature script: &lt;sig&gt;
</code></pre>
</div>
<h4 class="no_toc anchorAf" id="null-data" style="color: #383838; font-size: 17.6px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-395">Null数据</span></h4>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_transactions.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-396"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_transactions.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_transactions.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_transactions.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-397"><a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/null-data-transaction" id="term-null-data" style="color: black; text-decoration-line: none;" title="A transaction type relayed and mined by default in Bitcoin Core 0.9.0 and later that adds arbitrary data to a provably unspendable pubkey script that full nodes don't have to store in their UTXO database."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/release/v0.9.0" style="color: #2c6fad; text-decoration-line: none;"></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/unspent-transaction-output" style="color: #2c6fad; text-decoration-line: none;" title="An Unspent Transaction Output (UTXO) that can be spent as an input in a new transaction."></a>Null数据交易类型默认在Bitcoin Core 0.9.0中继承并开采，并且后来添加任意的数据到全节点不需要在他们的UTXO数据库中存储的一个证实不可花费的pubkey脚本中。</span><span class="yiyi-st" id="yiyi-398">因为不能自动修剪<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/unspent-transaction-output" style="color: #2c6fad; text-decoration-line: none;" title="An Unspent Transaction Output (UTXO) that can be spent as an input in a new transaction.">UTXO</a>数据库的交易，最好使用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/null-data-transaction" style="color: #2c6fad; text-decoration-line: none;" title="A transaction type relayed and mined by default in Bitcoin Core 0.9.0 and later that adds arbitrary data to a provably unspendable pubkey script that full nodes don't have to store in their UTXO database.">null数据交易</a>；然而如果可能的话通常将数据存储在交易之外更好。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-399"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/consensus-rules" style="color: #2c6fad; text-decoration-line: none;" title="The block validation rules that full nodes follow to stay in consensus with other nodes."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/consensus-rules" style="color: #2c6fad; text-decoration-line: none;" title="The block validation rules that full nodes follow to stay in consensus with other nodes."></a>共识规则允许null数据输出达到提供它们所遵循的所有其他共识规则的最大允许10000字节的pubkey脚本的大小，其他规则例如没有任何数据推送大于520字节。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-400"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/null-data-transaction" style="color: #2c6fad; text-decoration-line: none;" title="A transaction type relayed and mined by default in Bitcoin Core 0.9.0 and later that adds arbitrary data to a provably unspendable pubkey script that full nodes don't have to store in their UTXO database."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis."></a>Bitcoin Core 0.9.x到0.10.x默认情况下，在单个数据推送中中继和挖掘最多40个字节的null数据交易，并且只有一个null数据输出，它正好支付0 satoshis。</span></div>
<div class="highlighter-rouge">
<pre style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 12px; line-height: 1.5em; overflow-y: auto; padding: 17px;"><code style="border-radius: 3px; border: 0px; font-family: monospace, serif; padding: 0px;">Pubkey Script: OP_RETURN &lt;0 to 40 bytes of data&gt;
(Null data scripts cannot be spent, so there's no signature script.)
</code></pre>
</div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-401">Bitcoin Core 0.11.x将此默认值增加到80个字节，其他规则保持不变。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-402">Bitcoin Core 0.12.0默认中继和挖掘null数据输出最多可以有83个字节，可以包含任意数量的数据推送，只要不超过总字节数限制。</span><span class="yiyi-st" id="yiyi-403">但是仍然只有一个null数据输出，它仍然必须正确地支付0 satoshis。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-404">Bitcoin Core配置选项<code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">-datacarriersize</code>&nbsp;允许您设置要传送或挖掘的null数据输出中的最大字节数。</span></div>
<h4 class=" anchorAf" id="non-standard-transactions" style="color: #383838; font-size: 17.6px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-405">非标准化交易</span></h4>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_transactions.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-406"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_transactions.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_transactions.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_transactions.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-407"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a>如果你使用了非标准的pubkey脚本在一个输出中，使用默认Bitcoin Core设置的节点和矿工不会接受，广播或挖掘你的交易。</span><span class="yiyi-st" id="yiyi-408">当您尝试将交易广播到运行默认设置的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>时，您将收到错误。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-409"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/redeem-script" style="color: #2c6fad; text-decoration-line: none;" title="A script similar in function to a pubkey script. One copy of it is hashed to create a P2SH address (used in an actual pubkey script) and another copy is placed in the spending signature script to enforce its conditions."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/p2sh-address" style="color: #2c6fad; text-decoration-line: none;" title="A Bitcoin payment address comprising a hashed script, allowing the spender to create a standard pubkey script that Pays To Script Hash (P2SH). The script can be almost any valid pubkey script."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks"></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/redeem-script" style="color: #2c6fad; text-decoration-line: none;" title="A script similar in function to a pubkey script. One copy of it is hashed to create a P2SH address (used in an actual pubkey script) and another copy is placed in the spending signature script to enforce its conditions."></a>如果您创建redeem脚本，将其进行哈希放入P2SH输出中的一个哈希值，则网络只会看到这个哈希值，因此它不管redeem脚本在说什么就接受输出有效。</span><span class="yiyi-st" id="yiyi-410">这允许支付给非标准脚本，并且从Bitcoin Core 0.11起，几乎针对所有有效的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/redeem-script" style="color: #2c6fad; text-decoration-line: none;" title="A script similar in function to a pubkey script. One copy of it is hashed to create a P2SH address (used in an actual pubkey script) and another copy is placed in the spending signature script to enforce its conditions.">redeem脚本</a>。</span><span class="yiyi-st" id="yiyi-411">有个例外是那些使用未分配的<a href="https://en.bitcoin.it/wiki/Script#Reserved_words" style="color: #2c6fad; text-decoration-line: none;">NOP操作码</a>的脚本；这些<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/op-code" style="color: #2c6fad; text-decoration-line: none;" title="Operation codes from the Bitcoin Script language which push data or perform functions within a pubkey script or signature script.">操作码</a>被保留用于将来的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/soft-fork" style="color: #2c6fad; text-decoration-line: none;" title="A softfork is a change to the bitcoin protocol wherein only previously valid blocks/transactions are made invalid. Since old nodes will recognise the new blocks as valid, a softfork is backward-compatible.">软分叉</a>，并且只能由不遵循标准内存池规则的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>进行中继或开采。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-412">注意：<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/standard-transaction" style="color: #2c6fad; text-decoration-line: none;" title="A transaction that passes Bitcoin Core's IsStandard() and IsStandardTx() tests. Only standard transactions are mined or broadcast by peers running the default Bitcoin Core software.">标准交易</a>旨在保护和帮助<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>，而不会阻止您发生错误。</span><span class="yiyi-st" id="yiyi-413">很容易创建<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/standard-transaction" style="color: #2c6fad; text-decoration-line: none;" title="A transaction that passes Bitcoin Core's IsStandard() and IsStandardTx() tests. Only standard transactions are mined or broadcast by peers running the default Bitcoin Core software.">标准交易</a>，把未花费的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>发送给他们。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-414">从<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/release/v0.9.3" style="color: #2c6fad; text-decoration-line: none;">Bitcoin Core 0.9.3</a>，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/standard-transaction" style="color: #2c6fad; text-decoration-line: none;" title="A transaction that passes Bitcoin Core's IsStandard() and IsStandardTx() tests. Only standard transactions are mined or broadcast by peers running the default Bitcoin Core software.">标准交易</a>也必须符合以下条件：</span></div>
<ul style="margin-left: 0px; padding-left: 20px;">
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-415"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/locktime" style="color: #2c6fad; text-decoration-line: none;" title="Part of a transaction which indicates the earliest time or earliest block when that transaction may be added to the block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-height" style="color: #2c6fad; text-decoration-line: none;" title="The number of blocks preceding a particular block on a block chain. For example, the genesis block has a height of zero because zero block preceded it."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/sequence-number" style="color: #2c6fad; text-decoration-line: none;" title="Part of all transactions. A number intended to allow unconfirmed time-locked transactions to be updated before being finalized; not currently used except to disable locktime in a transaction"></a>交易必须完成：它的locktime必须在过去（或小于等于当前块高），或它里面的所有序列号都是0xffffffff。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-416">交易必须小于100,000字节。</span><span class="yiyi-st" id="yiyi-417"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a>这大约是一个典型的单输入单输出的P2PKH交易的200倍。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-418">每个交易的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature-script" style="color: #2c6fad; text-decoration-line: none;" title="Data generated by a spender which is almost always used as variables to satisfy a pubkey script. Signature Scripts are called scriptSig in code.">签名脚本</a>必须小于1,650字节。</span><span class="yiyi-st" id="yiyi-419"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/multisig" style="color: #2c6fad; text-decoration-line: none;" title="A pubkey script that provides *n* number of pubkeys and requires the corresponding signature script provide *m* minimum number signatures corresponding to the provided pubkeys."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/compressed-public-key" style="color: #2c6fad; text-decoration-line: none;" title="An ECDSA public key that is 33 bytes long rather than the 65 bytes of an uncompressed public key."></a>这个足够大来允许使用压缩公钥的P2SH 15-of-15 multisig交易。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-420">需要超过3个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公共密钥</a>的Bare（非P2SH）<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/multisig" style="color: #2c6fad; text-decoration-line: none;" title="A pubkey script that provides *n* number of pubkeys and requires the corresponding signature script provide *m* minimum number signatures corresponding to the provided pubkeys.">multisig</a>事务当前是非标准的。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-421">交易的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature-script" style="color: #2c6fad; text-decoration-line: none;" title="Data generated by a spender which is almost always used as variables to satisfy a pubkey script. Signature Scripts are called scriptSig in code.">签名脚本</a>只能将数据压入到脚本评估堆栈。</span><span class="yiyi-st" id="yiyi-422">除了仅将数据压入到堆栈的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/op-code" style="color: #2c6fad; text-decoration-line: none;" title="Operation codes from the Bitcoin Script language which push data or perform functions within a pubkey script or signature script.">操作码</a>之外，它不能压入新的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/op-code" style="color: #2c6fad; text-decoration-line: none;" title="Operation codes from the Bitcoin Script language which push data or perform functions within a pubkey script or signature script.">操作码</a>。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-423"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it."></a>交易不能包含比输入少1/3的satoshis的输出。</span><span class="yiyi-st" id="yiyi-424"><a href="https://github.com/bitcoin/bitcoin/commit/6a4c196dd64da2fd33dc7ae77a8cdd3e4cf0eff1" style="color: #2c6fad; text-decoration-line: none;"></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/p2sh-address" style="color: #2c6fad; text-decoration-line: none;" title="A Bitcoin payment address comprising a hashed script, allowing the spender to create a standard pubkey script that Pays To Script Hash (P2SH). The script can be almost any valid pubkey script."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/minimum-relay-fee" style="color: #2c6fad; text-decoration-line: none;" title="The minimum transaction fee a transaction must pay (if it isn't a high-priority transaction) for a full node to relay that transaction to other nodes. There is no one minimum relay fee---each node chooses its own policy."></a>Bitcoin Core节点当前默认的中继费一个P2PKH或P2SH输出 546satoshis。</span><span class="yiyi-st" id="yiyi-425"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis."></a>有个例外，标准null数据输出必须接收0 satoshis。</span></div>
</li>
</ul>
<h3 class=" anchorAf" id="signature-hash-types" style="color: #383838; font-size: 20.8px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-426">签名哈希类型</span></h3>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_transactions.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-427"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_transactions.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_transactions.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_transactions.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-428"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#term-op-checksig" style="color: #2c6fad; text-decoration-line: none;" title="Opcode which returns true if a signature signs the correct parts of a transaction and matches a provided public key"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">OP_CHECKSIG</code></a>从每个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature" style="color: #2c6fad; text-decoration-line: none;" title="A value related to a public key which could only have reasonably been created by someone who has the private key that created that public key. Used in Bitcoin to authorize spending satoshis previously sent to a public key.">签名</a>中提取一个非堆栈参数，使得签名者可以决定交易的哪些部分需要签名。</span><span class="yiyi-st" id="yiyi-429">由于<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature" style="color: #2c6fad; text-decoration-line: none;" title="A value related to a public key which could only have reasonably been created by someone who has the private key that created that public key. Used in Bitcoin to authorize spending satoshis previously sent to a public key.">签名</a>保护交易的这些部分不被修改，这使得签名者有选择地让其他人修改其交易。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-430">要签署的各种选项称为<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature-hash" id="term-signature-hash" style="color: black; text-decoration-line: none;" title="A flag to Bitcoin signatures that indicates what parts of the transaction the signature signs. (The default is SIGHASH_ALL.) The unsigned parts of the transaction may be modified.">签名哈希</a>类型。</span><span class="yiyi-st" id="yiyi-431">目前有三种基本的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature-hash" style="color: #2c6fad; text-decoration-line: none;" title="A flag to Bitcoin signatures that indicates what parts of the transaction the signature signs. (The default is SIGHASH_ALL.) The unsigned parts of the transaction may be modified.">SIGHASH</a>类型：</span></div>
<ul style="margin-left: 0px; padding-left: 20px;">
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-432"><a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/sighash-all" id="term-sighash-all" style="color: black; text-decoration-line: none;" title="Default signature hash type which signs the entire transaction except any signature scripts, preventing modification of the signed parts."><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); color: #646464; font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">SIGHASH_ALL</code></a>，默认签名所有<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it.">输入</a>和<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>，保护除<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature-script" style="color: #2c6fad; text-decoration-line: none;" title="Data generated by a spender which is almost always used as variables to satisfy a pubkey script. Signature Scripts are called scriptSig in code.">签名脚本</a>之外的所有内容不受修改。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-433"><a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/sighash-none" id="term-sighash-none" style="color: black; text-decoration-line: none;" title="Signature hash type which only signs the inputs, allowing anyone to change the outputs however they'd like."></a><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;"></code><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature" style="color: #2c6fad; text-decoration-line: none;" title="A value related to a public key which could only have reasonably been created by someone who has the private key that created that public key. Used in Bitcoin to authorize spending satoshis previously sent to a public key."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature-hash" style="color: #2c6fad; text-decoration-line: none;" title="A flag to Bitcoin signatures that indicates what parts of the transaction the signature signs. (The default is SIGHASH_ALL.) The unsigned parts of the transaction may be modified."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a>SIGHASH_NONE签名所有输入，不签名任何输出，运行任何人更改satoshis的取消，除非有使用其他签名标记的签名保护输出。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-434"><a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/sighash-single" id="term-sighash-single" style="color: black; text-decoration-line: none;" title="Signature hash type that signs the output corresponding to this input (the one with the same index value), this input, and any other inputs partially. Allows modification of other outputs and the sequence number of other inputs."></a><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;"></code><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-output-index" style="color: #2c6fad; text-decoration-line: none;" title="The sequentially-numbered index of outputs in a single transaction starting from 0"></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it."></a>SIGHASH_SINGLE与输入索引好相同的唯一的输出被签名，确保没有人能修改交易的属于你的部分，到但是运行其他签名者修改交易的属于他们的部分。</span><span class="yiyi-st" id="yiyi-435">相应的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>必须存在，或者值“1”将被签名，打破了安全性方案。</span><span class="yiyi-st" id="yiyi-436">这个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it.">输入</a>以及其他<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it.">输入</a>都包含在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature" style="color: #2c6fad; text-decoration-line: none;" title="A value related to a public key which could only have reasonably been created by someone who has the private key that created that public key. Used in Bitcoin to authorize spending satoshis previously sent to a public key.">签名</a>中。</span><span class="yiyi-st" id="yiyi-437">其他<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it.">输入</a>的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/sequence-number" style="color: #2c6fad; text-decoration-line: none;" title="Part of all transactions. A number intended to allow unconfirmed time-locked transactions to be updated before being finalized; not currently used except to disable locktime in a transaction">序列号</a>不包括在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature" style="color: #2c6fad; text-decoration-line: none;" title="A value related to a public key which could only have reasonably been created by someone who has the private key that created that public key. Used in Bitcoin to authorize spending satoshis previously sent to a public key.">签名</a>中，可以更新。</span></div>
</li>
</ul>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-438">基本类型可以使用<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/sighash-anyonecanpay" id="term-sighash-anyonecanpay" style="color: black; text-decoration-line: none;" title="A signature hash type which signs only the current input."><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); color: #646464; font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">SIGHASH_ANYONECANPAY</code></a>（任何人都可以支付）标志来修改，于是创建三种新的组合类型：</span></div>
<ul style="margin-left: 0px; padding-left: 20px;">
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-439"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/sighash-anyonecanpay" style="color: #2c6fad; text-decoration-line: none;" title="A signature hash type which signs only the current input."></a><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;"></code><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis."></a>SIGHASH_ALL|SIGHASH_ANYONECANPAY签名这个输入及其所有输出，允许任何人添加或删除其他输入，以便任何人能贡献额外的satoshis，但是他们不能改名他们发送satoshis的数量和去向。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-440"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/sighash-anyonecanpay" style="color: #2c6fad; text-decoration-line: none;" title="A signature hash type which signs only the current input."></a><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;"></code><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it."></a>SIGHASH_NONE|SIGHASH_ANYONECANPAY仅签名这个输入，任何人添加或删除其他输入或输出，以便得到这个输入的副本的任何人想花的话就去花费它。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-441"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/sighash-anyonecanpay" style="color: #2c6fad; text-decoration-line: none;" title="A signature hash type which signs only the current input."></a><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;"></code><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a>SIGHASH_SINGLE|SIGHASH_ANYONECANPAY签名一个输入和它相应的输出。</span><span class="yiyi-st" id="yiyi-442">允许任何人添加或删除其他<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it.">输入</a>。</span></div>
</li>
</ul>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-443"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature-hash" style="color: #2c6fad; text-decoration-line: none;" title="A flag to Bitcoin signatures that indicates what parts of the transaction the signature signs. (The default is SIGHASH_ALL.) The unsigned parts of the transaction may be modified."></a>因为每个输入就要被签名，所以一个有多个输入的交易包含多个签名哈希来签名交易的不同部分。</span><span class="yiyi-st" id="yiyi-444"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it."></a><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;"></code><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain."></a>例如使用NONE签名的单输入交易有能被把它添加到区块链的公开修改的输出。</span><span class="yiyi-st" id="yiyi-445">另一方面，如果两<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it.">输入</a>交易有一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it.">输入</a>用<code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">NONE</code>签名和一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it.">输入</a>用&nbsp;<code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">ALL</code>签名，<code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">ALL</code>签名者可以选择在哪花费<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>而不需要咨询<code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">NONE</code>签名者，但是没有其他人可以修改交易。</span></div>
<h3 class=" anchorAf" id="locktime-and-sequence-number" style="color: #383838; font-size: 20.8px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-446">锁定时间和序列号</span></h3>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_transactions.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-447"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_transactions.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_transactions.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_transactions.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-448"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature-hash" style="color: #2c6fad; text-decoration-line: none;" title="A flag to Bitcoin signatures that indicates what parts of the transaction the signature signs. (The default is SIGHASH_ALL.) The unsigned parts of the transaction may be modified."></a><a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/locktime" id="term-locktime" style="color: black; text-decoration-line: none;" title="Part of a transaction which indicates the earliest time or earliest block when that transaction may be added to the block chain."></a>所有签名哈希类型都签名的一个东西就是交易的locktime。</span><span class="yiyi-st" id="yiyi-449">（在Bitcoin Core源代码中称为<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/locktime" style="color: #2c6fad; text-decoration-line: none;" title="Part of a transaction which indicates the earliest time or earliest block when that transaction may be added to the block chain.">nLockTime</a>）</span><span class="yiyi-st" id="yiyi-450"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/locktime" style="color: #2c6fad; text-decoration-line: none;" title="Part of a transaction which indicates the earliest time or earliest block when that transaction may be added to the block chain.">locktime</a>表示交易可以添加到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>的最早时间。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-451"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/locktime" style="color: #2c6fad; text-decoration-line: none;" title="Part of a transaction which indicates the earliest time or earliest block when that transaction may be added to the block chain.">Locktime</a>允许签名者创建时间锁定的交易，这将只会在将来生效，使签名者有机会改变主意。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-452">如果任何签名者改变主意，他们可以创建一个新的非<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/locktime" style="color: #2c6fad; text-decoration-line: none;" title="Part of a transaction which indicates the earliest time or earliest block when that transaction may be added to the block chain.">locktime</a>的交易。</span><span class="yiyi-st" id="yiyi-453"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/locktime" style="color: #2c6fad; text-decoration-line: none;" title="Part of a transaction which indicates the earliest time or earliest block when that transaction may be added to the block chain."></a>新交易使用被用于locktime交易输入的相同的一个输出作为它的一个输入。</span><span class="yiyi-st" id="yiyi-454"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/locktime" style="color: #2c6fad; text-decoration-line: none;" title="Part of a transaction which indicates the earliest time or earliest block when that transaction may be added to the block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain."></a>如果新交易在时间锁过期之前被加入区块链，那么这个locktime交易时将失效。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-455">当时间锁快到期时候需要特别小心。</span><span class="yiyi-st" id="yiyi-456"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks"></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/locktime" style="color: #2c6fad; text-decoration-line: none;" title="Part of a transaction which indicates the earliest time or earliest block when that transaction may be added to the block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain."></a>P2P网络允许区块时间比真实时间提前两小时，因此一个locktime交易可以比它的时间锁正式过期最多提前两个小时加入区块链。</span><span class="yiyi-st" id="yiyi-457">此外，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>不是以确定的时间间隔创建，因此任何尝试取消有价值的交易都应在时间锁到期前几个小时来实施。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-458">以前版本的Bitcoin Core提供了一个功能，防止交易签名者使用上述方法来取消时间锁定的交易，但禁用此功能的必要部分以防止拒绝服务攻击。</span><span class="yiyi-st" id="yiyi-459">该系统的遗留是每个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it.">输入</a>中的四字节<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/sequence-number" id="term-sequence-number" style="color: black; text-decoration-line: none;" title="Part of all transactions. A number intended to allow unconfirmed time-locked transactions to be updated before being finalized; not currently used except to disable locktime in a transaction">序列号</a>。</span><span class="yiyi-st" id="yiyi-460"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/sequence-number" style="color: #2c6fad; text-decoration-line: none;" title="Part of all transactions. A number intended to allow unconfirmed time-locked transactions to be updated before being finalized; not currently used except to disable locktime in a transaction"></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/sequence-number" style="color: #2c6fad; text-decoration-line: none;" title="Part of all transactions. A number intended to allow unconfirmed time-locked transactions to be updated before being finalized; not currently used except to disable locktime in a transaction"></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain."></a>该序列号旨在允许多个签名者去更新交易；当他们更新完交易，他们统一将每个输入的序列号设置为四字节无符号最大值(0xffffffff)，允许这个交易被加入一个区块，甚至当它的时间锁还没过期时候。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-461">即使在今天，将所有<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/sequence-number" style="color: #2c6fad; text-decoration-line: none;" title="Part of all transactions. A number intended to allow unconfirmed time-locked transactions to be updated before being finalized; not currently used except to disable locktime in a transaction">序列号</a>设置为0xffffffff（Bitcoin Core中的默认值）仍然可以禁用时间锁定，因此，如果要使用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/locktime" style="color: #2c6fad; text-decoration-line: none;" title="Part of a transaction which indicates the earliest time or earliest block when that transaction may be added to the block chain.">locktime</a>，至少需要一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it.">输入</a>必须有<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/sequence-number" style="color: #2c6fad; text-decoration-line: none;" title="Part of all transactions. A number intended to allow unconfirmed time-locked transactions to be updated before being finalized; not currently used except to disable locktime in a transaction">序列号</a>低于最大值。</span><span class="yiyi-st" id="yiyi-462">由于<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/sequence-number" style="color: #2c6fad; text-decoration-line: none;" title="Part of all transactions. A number intended to allow unconfirmed time-locked transactions to be updated before being finalized; not currently used except to disable locktime in a transaction">序列号</a>不被<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>用于任何其他目的，将任何<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/sequence-number" style="color: #2c6fad; text-decoration-line: none;" title="Part of all transactions. A number intended to allow unconfirmed time-locked transactions to be updated before being finalized; not currently used except to disable locktime in a transaction">序列号</a>设置为零足以启用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/locktime" style="color: #2c6fad; text-decoration-line: none;" title="Part of a transaction which indicates the earliest time or earliest block when that transaction may be added to the block chain.">locktime</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-463"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/locktime" style="color: #2c6fad; text-decoration-line: none;" title="Part of a transaction which indicates the earliest time or earliest block when that transaction may be added to the block chain.">Locktime</a>本身是一个无符号的4字节整数，可以通过两种方式进行解析：</span></div>
<ul style="margin-left: 0px; padding-left: 20px;">
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-464">如果小于500万，则将<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/locktime" style="color: #2c6fad; text-decoration-line: none;" title="Part of a transaction which indicates the earliest time or earliest block when that transaction may be added to the block chain.">locktime</a>解析为<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-height" style="color: #2c6fad; text-decoration-line: none;" title="The number of blocks preceding a particular block on a block chain. For example, the genesis block has a height of zero because zero block preceded it.">块高度</a>。</span><span class="yiyi-st" id="yiyi-465">该交易可以添加到任何具有该<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-height" style="color: #2c6fad; text-decoration-line: none;" title="The number of blocks preceding a particular block on a block chain. For example, the genesis block has a height of zero because zero block preceded it.">高度</a>或更高的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-466">如果大于等于500万，则使用<a class="auto-link" href="https://en.wikipedia.org/wiki/Unix_time" style="color: #2c6fad; text-decoration-line: none;">Unix纪元时间</a>格式解析<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/locktime" style="color: #2c6fad; text-decoration-line: none;" title="Part of a transaction which indicates the earliest time or earliest block when that transaction may be added to the block chain.">locktime</a>（从1970-01-01T00：00 UTC到目前为止已经过去的秒数，当前超过13.95亿）。</span><span class="yiyi-st" id="yiyi-467">交易可以被添加到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>时间大于<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/locktime" style="color: #2c6fad; text-decoration-line: none;" title="Part of a transaction which indicates the earliest time or earliest block when that transaction may be added to the block chain.">locktime</a>的任何<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>。</span></div>
</li>
</ul>
<h3 class=" anchorAf" id="transaction-fees-and-change" style="color: #383838; font-size: 20.8px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-468">交易费及其变动</span></h3>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_transactions.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-469"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_transactions.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_transactions.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_transactions.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-470">交易根据签名交易的总字节大小支付交易费。</span><span class="yiyi-st" id="yiyi-471"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain."></a>基于在挖出区块中的当前空间需求来计算每字节的交易费，需求增加，交易费增加。</span><span class="yiyi-st" id="yiyi-472"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/transaction-fee" style="color: #2c6fad; text-decoration-line: none;" title="The amount remaining when the value of all outputs in a transaction are subtracted from all inputs in a transaction; the fee is paid to the miner who includes that transaction in a block."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#block-chain" style="color: #2c6fad; text-decoration-line: none;"></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/transaction-fee" style="color: #2c6fad; text-decoration-line: none;" title="The amount remaining when the value of all outputs in a transaction are subtracted from all inputs in a transaction; the fee is paid to the miner who includes that transaction in a block."></a>交易费是给比特币矿工的，因此最终送达每个矿工去选择他们接受的最小交易费。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-473"><a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/high-priority-transaction" id="term-high-priority-transactions" style="color: black; text-decoration-line: none;" title="Transactions that don't have to pay a transaction fee because their inputs have been idle long enough to accumulated large amounts of priority. Note: miners choose whether to accept free transactions."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis."></a>这就是所谓的高优先级交易的概念，它们花费长期没挪用的satoshis。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-474">过去，这些“优先”交易往往免除正常的费用要求。</span><span class="yiyi-st" id="yiyi-475">在Bitcoin Core 0.12之前，每个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>的50KB将被保留用于这些<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/high-priority-transaction" style="color: #2c6fad; text-decoration-line: none;" title="Transactions that don't have to pay a transaction fee because their inputs have been idle long enough to accumulated large amounts of priority. Note: miners choose whether to accept free transactions.">高优先级事务</a>，但是默认情况下现在设置为0KB。</span><span class="yiyi-st" id="yiyi-476">在优先级区域之后，所有交易都将按照每字节的费用进行优先排序，同时按顺序添加更高费用的交易，直到所有可用空间都被填满。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-477">从Bitcoin Core 0.9开始，在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>之间广播事务有<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/minimum-relay-fee" id="term-minimum-fee" style="color: black; text-decoration-line: none;" title="The minimum transaction fee a transaction must pay (if it isn't a high-priority transaction) for a full node to relay that transaction to other nodes. There is no one minimum relay fee---each node chooses its own policy.">最低费用</a>（目前为1000&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>）。</span><span class="yiyi-st" id="yiyi-478">任何仅支付<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/minimum-relay-fee" style="color: #2c6fad; text-decoration-line: none;" title="The minimum transaction fee a transaction must pay (if it isn't a high-priority transaction) for a full node to relay that transaction to other nodes. There is no one minimum relay fee---each node chooses its own policy.">最低费用的交易</a>应该准备好等待很长时间才能在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>中有足够的备用空间来包含它。</span><span class="yiyi-st" id="yiyi-479">请参阅<a href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#verifying-payment" style="color: #2c6fad; text-decoration-line: none;">验证支付部分</a>去明白为什么这很重要。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-480"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/unspent-transaction-output" style="color: #2c6fad; text-decoration-line: none;" title="An Unspent Transaction Output (UTXO) that can be spent as an input in a new transaction."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/unspent-transaction-output" style="color: #2c6fad; text-decoration-line: none;" title="An Unspent Transaction Output (UTXO) that can be spent as an input in a new transaction."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/unspent-transaction-output" style="color: #2c6fad; text-decoration-line: none;" title="An Unspent Transaction Output (UTXO) that can be spent as an input in a new transaction."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/transaction-fee" style="color: #2c6fad; text-decoration-line: none;" title="The amount remaining when the value of all outputs in a transaction are subtracted from all inputs in a transaction; the fee is paid to the miner who includes that transaction in a block."></a>由于每个交易都花费未消费的交易输出UTXOs，并且一个UTXO只能被花费一次，UTXOs的全额必须被花费或作为交易费支付给矿工。</span><span class="yiyi-st" id="yiyi-481"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/unspent-transaction-output" style="color: #2c6fad; text-decoration-line: none;" title="An Unspent Transaction Output (UTXO) that can be spent as an input in a new transaction."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/change-address" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which returns satoshis to the spender, thus preventing too much of the input value from going to transaction fees."></a>很少有人有与他们想支付的数额完全相符的UTXOs，因此多数交易都包含一个找零输出。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-482"><a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/change-address" id="term-change-output" style="color: black; text-decoration-line: none;" title="An output in a transaction which returns satoshis to the spender, thus preventing too much of the input value from going to transaction fees."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/unspent-transaction-output" style="color: #2c6fad; text-decoration-line: none;" title="An Unspent Transaction Output (UTXO) that can be spent as an input in a new transaction."></a>找零输出是花费UXTOs中剩余的satoshis返回到花费者的常规输出。</span><span class="yiyi-st" id="yiyi-483">它们可以重复使用与<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/unspent-transaction-output" style="color: #2c6fad; text-decoration-line: none;" title="An Unspent Transaction Output (UTXO) that can be spent as an input in a new transaction.">UTXO</a>中使用的相同的P2PKH&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/p2pkh-address" style="color: #2c6fad; text-decoration-line: none;" title="A Bitcoin payment address comprising a hashed public key, allowing the spender to create a standard pubkey script that Pays To PubKey Hash (P2PKH).">pubkey哈希</a>或P2SH&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/redeem-script" style="color: #2c6fad; text-decoration-line: none;" title="A script similar in function to a pubkey script. One copy of it is hashed to create a P2SH address (used in an actual pubkey script) and another copy is placed in the spending signature script to enforce its conditions.">脚本哈希</a>，但是由于<a href="http://usyiyi.cn/documents/bitcoin/developer-guide.html#avoiding-key-reuse" style="color: #2c6fad; text-decoration-line: none;">下一小节</a>，强烈建议将<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/change-address" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which returns satoshis to the spender, thus preventing too much of the input value from going to transaction fees.">找零输出</a>发送到新的P2PKH或<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/p2sh-address" style="color: #2c6fad; text-decoration-line: none;" title="A Bitcoin payment address comprising a hashed script, allowing the spender to create a standard pubkey script that Pays To Script Hash (P2SH). The script can be almost any valid pubkey script.">P2SH地址</a>。</span></div>
<h3 class=" anchorAf" id="avoiding-key-reuse" style="color: #383838; font-size: 20.8px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-484">避免公钥重用</span></h3>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_transactions.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-485"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_transactions.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_transactions.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_transactions.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-486"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information."></a>在交易中，花费者和接收者各自显示交易中使用的所有公钥或地址。</span><span class="yiyi-st" id="yiyi-487">这允许任何一个人使用公开<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>跟踪涉及其他人相同的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>或<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>的过去和未来交易。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-488">如果经常使用相同的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>，就像人们将Bitcoin&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>（哈希后<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>）一样，作为静态支付<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址一样，其他人可以轻松跟踪该人的接收和消费习惯，包括他们在已知的</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>中控制的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>数额。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-489">它不一定是这样的。</span><span class="yiyi-st" id="yiyi-490">如果每个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>被使用两次，一次就可以收到付款，并且一次支付这笔款项，用户就可以获得大量的财务隐私。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-491"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair."></a><a class="term" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-unique-address" id="term-unique-address" style="color: black; text-decoration-line: none;" title="Address which are only used once to protect privacy and increase security"></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/change-address" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which returns satoshis to the spender, thus preventing too much of the input value from going to transaction fees."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-merge-avoidance" style="color: #2c6fad; text-decoration-line: none;" title="A strategy for selecting which outputs to spend that avoids merging outputs with different histories that could leak private information"></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis."></a>更好的是，在接受付款时使用新的公钥或唯一地址，创建找零输出时混合使用后面讨论的其他技术，比如CoinJoin或合并规避，使得非常难以使用区块链本身来可靠地跟踪用户如何接收和花费他们的satoshis。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-492">避免密钥重用还可以提供安全性，防止可能允许从<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>（假设）或<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature" style="color: #2c6fad; text-decoration-line: none;" title="A value related to a public key which could only have reasonably been created by someone who has the private key that created that public key. Used in Bitcoin to authorize spending satoshis previously sent to a public key.">签名</a>比较来重建<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>（在下面描述的某些情况下，假设更普遍的攻击）。</span></div>
<ol style="margin-left: 0px; padding-left: 20px;">
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-493"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/p2sh-address" style="color: #2c6fad; text-decoration-line: none;" title="A Bitcoin payment address comprising a hashed script, allowing the spender to create a standard pubkey script that Pays To Script Hash (P2SH). The script can be almost any valid pubkey script."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain."></a>唯一（非重用）P2PKH和P2SH地址通过保持ECDSA公钥隐藏（哈希后的）直到发送到那些地址的satoshis第一次被花费来保护对抗第一种类型的攻击， 所以这种攻击实际上是无效的，除非他们能一两个小时内重构私钥，这段时间内交易通过区块链得到很好的保护。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-494"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature" style="color: #2c6fad; text-decoration-line: none;" title="A value related to a public key which could only have reasonably been created by someone who has the private key that created that public key. Used in Bitcoin to authorize spending satoshis previously sent to a public key."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature" style="color: #2c6fad; text-decoration-line: none;" title="A value related to a public key which could only have reasonably been created by someone who has the private key that created that public key. Used in Bitcoin to authorize spending satoshis previously sent to a public key."></a>唯一（非重用）的私钥通过一个私钥仅生成一个签名来保护免于第二种类型的攻击，所以攻击者永远得不到后续的签名用于基于比较的攻击。</span><span class="yiyi-st" id="yiyi-495">现有的基于比较的攻击仅在当前使用熵不足的情况下才能实现，或者当所使用的熵被暴露在某些方面（例如<a href="https://en.wikipedia.org/wiki/Side_channel_attack" style="color: #2c6fad; text-decoration-line: none;">侧信道攻击</a>）时。</span></div>
</li>
</ol>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-496">因此，为了隐私和安全，我们鼓励您构建应用程序，以避免<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>重用，并在可能的情况下阻止用户重用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>。</span><span class="yiyi-st" id="yiyi-497"><a href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#bitcoin-uri" style="color: #2c6fad; text-decoration-line: none;"></a><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;"></code>如果您的应用程序需要提供一个固定的URI来发送付款，请参阅下面的bitcoin:URI部分。</span></div>
<h3 class=" anchorAf" id="transaction-malleability" style="color: #383838; font-size: 20.8px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-498">交易可扩展性</span></h3>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_transactions.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-499"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_transactions.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_transactions.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_transactions.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-500"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature-hash" style="color: #2c6fad; text-decoration-line: none;" title="A flag to Bitcoin signatures that indicates what parts of the transaction the signature signs. (The default is SIGHASH_ALL.) The unsigned parts of the transaction may be modified."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature-script" style="color: #2c6fad; text-decoration-line: none;" title="Data generated by a spender which is almost always used as variables to satisfy a pubkey script. Signature Scripts are called scriptSig in code."></a><a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/malleability" id="term-transaction-malleability" style="color: black; text-decoration-line: none;" title="The ability of someone to change (mutate) unconfirmed transactions without making them invalid, which changes the transaction's txid, making child transactions invalid."></a>Bitcoin没有哪种类型的签名哈希能保护签名脚本，这样给限定的拒绝服务攻击及交易可扩展性留了后门。</span><span class="yiyi-st" id="yiyi-501"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature-script" style="color: #2c6fad; text-decoration-line: none;" title="Data generated by a spender which is almost always used as variables to satisfy a pubkey script. Signature Scripts are called scriptSig in code.">签名脚本</a>包含<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature" style="color: #2c6fad; text-decoration-line: none;" title="A value related to a public key which could only have reasonably been created by someone who has the private key that created that public key. Used in Bitcoin to authorize spending satoshis previously sent to a public key.">secp256k1签名</a>，它不能自签，允许攻击者对事务进行非功能修改，而不会使其无效。</span><span class="yiyi-st" id="yiyi-502">例如，攻击者可以向<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature-script" style="color: #2c6fad; text-decoration-line: none;" title="Data generated by a spender which is almost always used as variables to satisfy a pubkey script. Signature Scripts are called scriptSig in code.">签名脚本</a>添加一些数据，该脚本将在前一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code.">pubkey脚本</a>被处理之前被删除。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-503">虽然这些修改是非功能的，因此它们不会改变交易使用的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it.">输入</a>以及它支付的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>&nbsp;- 它们会改变交易的计算到的哈希值。</span><span class="yiyi-st" id="yiyi-504">由于每个交易使用散列作为<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/txid" style="color: #2c6fad; text-decoration-line: none;" title="An identifier used to uniquely identify a particular transaction; specifically, the sha256d hash of the transaction.">交易标识符</a>（<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/txid" style="color: #2c6fad; text-decoration-line: none;" title="An identifier used to uniquely identify a particular transaction; specifically, the sha256d hash of the transaction.">txid</a>）链接到以前的交易，所以修改的交易将不会有其预期的创建者的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/txid" style="color: #2c6fad; text-decoration-line: none;" title="An identifier used to uniquely identify a particular transaction; specifically, the sha256d hash of the transaction.">txid</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-505">对于设计为立即添加到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>的大多数比特币交易来说，这不是问题。</span><span class="yiyi-st" id="yiyi-506">但是，当交易被添加到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>之前，事务的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>被花费时，确实会成为一个问题。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-507">比特币开发人员一直致力于在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/standard-transaction" style="color: #2c6fad; text-decoration-line: none;" title="A transaction that passes Bitcoin Core's IsStandard() and IsStandardTx() tests. Only standard transactions are mined or broadcast by peers running the default Bitcoin Core software.">标准交易</a>类型中减少<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/malleability" style="color: #2c6fad; text-decoration-line: none;" title="The ability of someone to change (mutate) unconfirmed transactions without making them invalid, which changes the transaction's txid, making child transactions invalid.">交易可扩展性</a>，但是完整的修复仍然还在规划阶段。</span><span class="yiyi-st" id="yiyi-508">目前，新交易不应该依赖于尚未添加到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>的先前交易，特别是如果大量的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>受到威胁。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-509"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/malleability" style="color: #2c6fad; text-decoration-line: none;" title="The ability of someone to change (mutate) unconfirmed transactions without making them invalid, which changes the transaction's txid, making child transactions invalid.">交易可扩展性</a>也会影响付款跟踪。</span><span class="yiyi-st" id="yiyi-510">Bitcoin Core的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#remote-procedure-calls-rpcs" style="color: #2c6fad; text-decoration-line: none;">RPC</a>接口让您可以通过<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/txid" style="color: #2c6fad; text-decoration-line: none;" title="An identifier used to uniquely identify a particular transaction; specifically, the sha256d hash of the transaction.">txid</a>跟踪交易，但是如果<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/txid" style="color: #2c6fad; text-decoration-line: none;" title="An identifier used to uniquely identify a particular transaction; specifically, the sha256d hash of the transaction.">txid</a>因为交易被修改而改变，那么可能会出现交易已从<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>中消失。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-511">交易跟踪的当前最佳做法规定，交易应该由它作为<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it.">输入</a>的交易<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>（<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/unspent-transaction-output" style="color: #2c6fad; text-decoration-line: none;" title="An Unspent Transaction Output (UTXO) that can be spent as an input in a new transaction.">UTXOs</a>）进行跟踪，因为它们不能更改而不会使交易无效。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-512">最佳做法进一步规定，如果交易确实似乎从<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>中消失，需要重新发行，则会以无效的丢失交易方式重新发行。</span><span class="yiyi-st" id="yiyi-513">始终工作的一种方法是确保重新发放的支付花费与<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it.">输入</a>所使用的丢失交易的所有相同的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>。</span></div>
<h2 class=" anchorAf" id="contracts" style="color: #383838; font-family: Ubuntu, sans-serif; font-size: 24px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-514">合约</span></h2>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_contracts.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-515"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_contracts.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_contracts.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_contracts.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-516">合约是使用去中心化的比特币系统来执行财务协议的交易。</span><span class="yiyi-st" id="yiyi-517">通常可以制定比特币合约，以尽量减少对外部代理的依赖，例如法院系统，这显著降低了与金融交易中未知实体交易的风险。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-518">以下小节将描述已经使用的各种比特币合约。</span><span class="yiyi-st" id="yiyi-519">因为合约是与真人打交道，而不仅仅是交易，它们在特定故事格式框架之中。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-520">除了下述的合约类型，还提出了许多其他合约类型。</span><span class="yiyi-st" id="yiyi-521">其中几个收集在Bitcoin Wiki的<a href="https://en.bitcoin.it/wiki/Contracts" style="color: #2c6fad; text-decoration-line: none;">合约页面</a>。</span></div>
<h3 class=" anchorAf" id="escrow-and-arbitration" style="color: #383838; font-size: 20.8px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-522">托管和仲裁</span></h3>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_contracts.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-523"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_contracts.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_contracts.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_contracts.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-524">Charlie客户想从Bob商人购买一种产品，但他们都不信任对方，所以他们使用合同帮助确保Charlie获得商品，Bob获得付款。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-525">一个简单的合同可以说Charlie会把<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>花费到某个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>，只有Charlie和Bob都签名了这个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it.">输入</a>才能花费它。</span><span class="yiyi-st" id="yiyi-526">这意味着鲍勃不会得到报酬，除非查理得到他的商品，但查理无法获得商品和保留他的付款。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-527">如果有争议，这个简单的合约没有什么帮助，所以Bob和Charlie征求了Alice仲裁员的帮助来创建一个<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/escrow-contract" id="term-escrow-contract" style="color: black; text-decoration-line: none;" title="A transaction in which a spender and receiver place funds in a 2-of-2 (or other m-of-n) multisig output so that neither can spend the funds until they're both satisfied with some external outcome.">托管合约</a>。</span><span class="yiyi-st" id="yiyi-528"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it."></a>Charlie花费这些satoshis到一个输出，这个输出只有三人中的两人都签名输入的话才能被花费。</span><span class="yiyi-st" id="yiyi-529">现在如果一切正常Charlie可以支付给Bob，如果有问题的话Bob可以<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#issuing-refunds" style="color: #2c6fad; text-decoration-line: none;" title="A transaction which refunds some or all satoshis received in a previous transaction">退款</a>，或者如果有争议的话爱丽丝可以仲裁并决定谁应该得到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-530">要创建一个多重<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature" style="color: #2c6fad; text-decoration-line: none;" title="A value related to a public key which could only have reasonably been created by someone who has the private key that created that public key. Used in Bitcoin to authorize spending satoshis previously sent to a public key.">签名</a>（<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/multisig" id="term-multisig" style="color: black; text-decoration-line: none;" title="A pubkey script that provides *n* number of pubkeys and requires the corresponding signature script provide *m* minimum number signatures corresponding to the provided pubkeys.">multisig</a>）<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>，他们每个给他人一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>。</span><span class="yiyi-st" id="yiyi-531">然后，Bob创建以下<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/p2sh-multisig" id="term-p2sh-multisig" style="color: black; text-decoration-line: none;" title="A P2SH output where the redeem script uses one of the multisig opcodes. Up until Bitcoin Core 0.10.0, P2SH multisig scripts were standard transactions, but most other P2SH scripts were not.">P2SH multisig</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/redeem-script" style="color: #2c6fad; text-decoration-line: none;" title="A script similar in function to a pubkey script. One copy of it is hashed to create a P2SH address (used in an actual pubkey script) and another copy is placed in the spending signature script to enforce its conditions.">redeem脚本</a>：</span></div>
<div class="highlighter-rouge">
<pre style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 12px; line-height: 1.5em; overflow-y: auto; padding: 17px;"><code style="border-radius: 3px; border: 0px; font-family: monospace, serif; padding: 0px;">OP_2 [A's pubkey] [B's pubkey] [C's pubkey] OP_3 OP_CHECKMULTISIG
</code></pre>
</div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-532">（将<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>压入堆栈的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/op-code" style="color: #2c6fad; text-decoration-line: none;" title="Operation codes from the Bitcoin Script language which push data or perform functions within a pubkey script or signature script.">Opcodes</a>未显示。）</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-533"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">OP_2</code>和<code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">OP_3</code>将实际数字2和3压入堆栈上。</span><span class="yiyi-st" id="yiyi-534"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;"></code><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature" style="color: #2c6fad; text-decoration-line: none;" title="A value related to a public key which could only have reasonably been created by someone who has the private key that created that public key. Used in Bitcoin to authorize spending satoshis previously sent to a public key."></a><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;"></code><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair."></a>OP_2指定需要2个签名，OP_3指定需要提供3个未哈希过的公钥。</span><span class="yiyi-st" id="yiyi-535"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/multisig" style="color: #2c6fad; text-decoration-line: none;" title="A pubkey script that provides *n* number of pubkeys and requires the corresponding signature script provide *m* minimum number signatures corresponding to the provided pubkeys."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/multisig" style="color: #2c6fad; text-decoration-line: none;" title="A pubkey script that provides *n* number of pubkeys and requires the corresponding signature script provide *m* minimum number signatures corresponding to the provided pubkeys."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code."></a><em></em><em></em><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature" style="color: #2c6fad; text-decoration-line: none;" title="A value related to a public key which could only have reasonably been created by someone who has the private key that created that public key. Used in Bitcoin to authorize spending satoshis previously sent to a public key."></a><em></em><em></em><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair."></a>这是一个2-of-3 multisig pubkey脚本，更一般地称为m-of-n pubkey脚本（m是需要的最小匹配的签名，n是提供公钥的数量）。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-536">Bob向Charlie发送<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/redeem-script" style="color: #2c6fad; text-decoration-line: none;" title="A script similar in function to a pubkey script. One copy of it is hashed to create a P2SH address (used in an actual pubkey script) and another copy is placed in the spending signature script to enforce its conditions.">redeem脚本</a>，Charlie检查确定他的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>和Alice的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>。</span><span class="yiyi-st" id="yiyi-537">然后，他将<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/redeem-script" style="color: #2c6fad; text-decoration-line: none;" title="A script similar in function to a pubkey script. One copy of it is hashed to create a P2SH address (used in an actual pubkey script) and another copy is placed in the spending signature script to enforce its conditions.">redeem 脚本</a>求哈希，来创建P2SH&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/redeem-script" style="color: #2c6fad; text-decoration-line: none;" title="A script similar in function to a pubkey script. One copy of it is hashed to create a P2SH address (used in an actual pubkey script) and another copy is placed in the spending signature script to enforce its conditions.">redeem脚本</a>，并向其支付<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>。</span><span class="yiyi-st" id="yiyi-538">Bob看到付款被添加到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>并运送商品。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-539">不幸的是，商品在运输途中受到轻微破坏。</span><span class="yiyi-st" id="yiyi-540">Charlie想要一个完整的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#issuing-refunds" style="color: #2c6fad; text-decoration-line: none;" title="A transaction which refunds some or all satoshis received in a previous transaction">退款</a>，但Bob认为10％<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#issuing-refunds" style="color: #2c6fad; text-decoration-line: none;" title="A transaction which refunds some or all satoshis received in a previous transaction">退款</a>是足够的。</span><span class="yiyi-st" id="yiyi-541">他们转向Alice来解决这个问题。</span><span class="yiyi-st" id="yiyi-542"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/redeem-script" style="color: #2c6fad; text-decoration-line: none;" title="A script similar in function to a pubkey script. One copy of it is hashed to create a P2SH address (used in an actual pubkey script) and another copy is placed in the spending signature script to enforce its conditions."></a>Alice要求Charlie的照片证据，以及Bob创建查理检查过的redeem脚本的副本。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-543"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#issuing-refunds" style="color: #2c6fad; text-decoration-line: none;" title="A transaction which refunds some or all satoshis received in a previous transaction"></a>在查看证据后，Alice认为40％的退款是足够的，所以她创建并签署两个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>的交易，一个花费<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>到Bob的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公开密钥</a>，剩下的40％花到Charlie的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-544">在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature-script" style="color: #2c6fad; text-decoration-line: none;" title="Data generated by a spender which is almost always used as variables to satisfy a pubkey script. Signature Scripts are called scriptSig in code.">签名脚本</a>中，Alice把她的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature" style="color: #2c6fad; text-decoration-line: none;" title="A value related to a public key which could only have reasonably been created by someone who has the private key that created that public key. Used in Bitcoin to authorize spending satoshis previously sent to a public key.">签名</a>和Bob创建的未哈希序列化的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/redeem-script" style="color: #2c6fad; text-decoration-line: none;" title="A script similar in function to a pubkey script. One copy of it is hashed to create a P2SH address (used in an actual pubkey script) and another copy is placed in the spending signature script to enforce its conditions.">兑换redeem</a>的副本放入其中。</span><span class="yiyi-st" id="yiyi-545">她向Bob和Charlie提供了不完整交易的副本。</span><span class="yiyi-st" id="yiyi-546">他们中的任何一个可以通过添加他的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature" style="color: #2c6fad; text-decoration-line: none;" title="A value related to a public key which could only have reasonably been created by someone who has the private key that created that public key. Used in Bitcoin to authorize spending satoshis previously sent to a public key.">签名</a>来完成它，以创建以下<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature-script" style="color: #2c6fad; text-decoration-line: none;" title="Data generated by a spender which is almost always used as variables to satisfy a pubkey script. Signature Scripts are called scriptSig in code.">签名脚本</a>：</span></div>
<div class="highlighter-rouge">
<pre style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 12px; line-height: 1.5em; overflow-y: auto; padding: 17px;"><code style="border-radius: 3px; border: 0px; font-family: monospace, serif; padding: 0px;">OP_0 [A's signature] [B's or C's signature] [serialized redeem script]
</code></pre>
</div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-547">（将<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature" style="color: #2c6fad; text-decoration-line: none;" title="A value related to a public key which could only have reasonably been created by someone who has the private key that created that public key. Used in Bitcoin to authorize spending satoshis previously sent to a public key.">签名</a>和<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/redeem-script" style="color: #2c6fad; text-decoration-line: none;" title="A script similar in function to a pubkey script. One copy of it is hashed to create a P2SH address (used in an actual pubkey script) and another copy is placed in the spending signature script to enforce its conditions.">redeem脚本</a>压入堆栈的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/op-code" style="color: #2c6fad; text-decoration-line: none;" title="Operation codes from the Bitcoin Script language which push data or perform functions within a pubkey script or signature script.">Opcodes</a>未显示。</span><span class="yiyi-st" id="yiyi-548"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">OP_0</code>是原始实现中一个错误的解决方法，必须保留兼容性。</span><span class="yiyi-st" id="yiyi-549">请注意，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature-script" style="color: #2c6fad; text-decoration-line: none;" title="Data generated by a spender which is almost always used as variables to satisfy a pubkey script. Signature Scripts are called scriptSig in code.">签名脚本</a>必须以与<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/redeem-script" style="color: #2c6fad; text-decoration-line: none;" title="A script similar in function to a pubkey script. One copy of it is hashed to create a P2SH address (used in an actual pubkey script) and another copy is placed in the spending signature script to enforce its conditions.">redeem脚本</a>中出现的相应的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>相同的顺序提供<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature" style="color: #2c6fad; text-decoration-line: none;" title="A value related to a public key which could only have reasonably been created by someone who has the private key that created that public key. Used in Bitcoin to authorize spending satoshis previously sent to a public key.">签名</a>&nbsp;。</span><span class="yiyi-st" id="yiyi-550">有关详细信息，请参见<a href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#term-op-checkmultisig" style="color: #2c6fad; text-decoration-line: none;" title="Opcode which returns true if one or more provided signatures (m) sign the correct parts of a transaction and match one or more provided public keys (n)"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">OP_CHECKMULTISIG</code></a>中的说明。）</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-551"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks"></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature-script" style="color: #2c6fad; text-decoration-line: none;" title="Data generated by a spender which is almost always used as variables to satisfy a pubkey script. Signature Scripts are called scriptSig in code."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/p2sh-address" style="color: #2c6fad; text-decoration-line: none;" title="A Bitcoin payment address comprising a hashed script, allowing the spender to create a standard pubkey script that Pays To Script Hash (P2SH). The script can be almost any valid pubkey script."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/redeem-script" style="color: #2c6fad; text-decoration-line: none;" title="A script similar in function to a pubkey script. One copy of it is hashed to create a P2SH address (used in an actual pubkey script) and another copy is placed in the spending signature script to enforce its conditions."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/redeem-script" style="color: #2c6fad; text-decoration-line: none;" title="A script similar in function to a pubkey script. One copy of it is hashed to create a P2SH address (used in an actual pubkey script) and another copy is placed in the spending signature script to enforce its conditions."></a>当交易被广播到网络时，每个节点根据Charlie先前支付的P2SH输出检查签名脚本，确保redeem脚本和之前提供的redeem脚本哈希值相匹配。</span><span class="yiyi-st" id="yiyi-552">然后评估将两个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature" style="color: #2c6fad; text-decoration-line: none;" title="A value related to a public key which could only have reasonably been created by someone who has the private key that created that public key. Used in Bitcoin to authorize spending satoshis previously sent to a public key.">签名</a>用作输入数据的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/redeem-script" style="color: #2c6fad; text-decoration-line: none;" title="A script similar in function to a pubkey script. One copy of it is hashed to create a P2SH address (used in an actual pubkey script) and another copy is placed in the spending signature script to enforce its conditions.">兑换脚本</a>。</span><span class="yiyi-st" id="yiyi-553">假设<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/redeem-script" style="color: #2c6fad; text-decoration-line: none;" title="A script similar in function to a pubkey script. One copy of it is hashed to create a P2SH address (used in an actual pubkey script) and another copy is placed in the spending signature script to enforce its conditions.">兑换脚本</a>验证成功，两个交易<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>显示在Bob和Charlie的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>中作为可支付余额。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-554"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/multisig" style="color: #2c6fad; text-decoration-line: none;" title="A pubkey script that provides *n* number of pubkeys and requires the corresponding signature script provide *m* minimum number signatures corresponding to the provided pubkeys."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/redeem-script" style="color: #2c6fad; text-decoration-line: none;" title="A script similar in function to a pubkey script. One copy of it is hashed to create a P2SH address (used in an actual pubkey script) and another copy is placed in the spending signature script to enforce its conditions."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair."></a>然而，如果Alice创建并签名了一个交易，他们都不会同意，例如将所有的satoshis支付给她自己，Bob和Charlie可以找到一个新的仲裁员，并签署一个支付satoshis的交易到另一个2-of-3 mutlisig redeem脚本哈希, 这个包括一个新的仲裁员的公钥。</span><span class="yiyi-st" id="yiyi-555">这意味着鲍勃和查理从来不需要担心他们的仲裁员偷他们的钱。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-556"><strong>资源：</strong>&nbsp;<a href="https://www.bitrated.com/" style="color: #2c6fad; text-decoration-line: none;">BitRated</a>在GNU AGPL授权网站上使用HTML/JavaScript提供了一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/multisig" style="color: #2c6fad; text-decoration-line: none;" title="A pubkey script that provides *n* number of pubkeys and requires the corresponding signature script provide *m* minimum number signatures corresponding to the provided pubkeys.">multisig</a>仲裁服务接口。</span></div>
<h3 class=" anchorAf" id="micropayment-channel" style="color: #383838; font-size: 20.8px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-557">微支付渠道</span></h3>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_contracts.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-558"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_contracts.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_contracts.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_contracts.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-559">Alice还为Bob兼职审核论坛帖子。</span><span class="yiyi-st" id="yiyi-560">每当有人发帖到Bob的论坛，Alice都要浏览它，确保它不会令人反感或垃圾帖子。</span><span class="yiyi-st" id="yiyi-561">但Bob经常忘记付钱给她，所以Alice要求在她批准或拒绝的每个帖子后立即支付。</span><span class="yiyi-st" id="yiyi-562">鲍勃说他不能这么做，因为数百笔小额付款会在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/transaction-fee" style="color: #2c6fad; text-decoration-line: none;" title="The amount remaining when the value of all outputs in a transaction are subtracted from all inputs in a transaction; the fee is paid to the miner who includes that transaction in a block.">交易费用</a>中花费成千上万的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>，所以Alice建议使用<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-micropayment-channel" id="term-micropayment-channel" style="color: black; text-decoration-line: none;">微支付渠道</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-563">Bob向Alice询问她的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>，然后创建两个交易。</span><span class="yiyi-st" id="yiyi-564"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/p2sh-address" style="color: #2c6fad; text-decoration-line: none;" title="A Bitcoin payment address comprising a hashed script, allowing the spender to create a standard pubkey script that Pays To Script Hash (P2SH). The script can be almost any valid pubkey script."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/multisig" style="color: #2c6fad; text-decoration-line: none;" title="A pubkey script that provides *n* number of pubkeys and requires the corresponding signature script provide *m* minimum number signatures corresponding to the provided pubkeys."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/redeem-script" style="color: #2c6fad; text-decoration-line: none;" title="A script similar in function to a pubkey script. One copy of it is hashed to create a P2SH address (used in an actual pubkey script) and another copy is placed in the spending signature script to enforce its conditions."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature" style="color: #2c6fad; text-decoration-line: none;" title="A value related to a public key which could only have reasonably been created by someone who has the private key that created that public key. Used in Bitcoin to authorize spending satoshis previously sent to a public key."></a>第一笔交易支付100 millibitcoins到一个P2SH输出，它的2-of-2 multisig redeem 脚本需要Alice和Bob都签名。</span><span class="yiyi-st" id="yiyi-565">这就是债券交易。</span><span class="yiyi-st" id="yiyi-566">广播此交易将让Alice持有<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">millibitcoins</a>质押币，所以Bob现在将交易私有，并创建第二个交易。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-567"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/transaction-fee" style="color: #2c6fad; text-decoration-line: none;" title="The amount remaining when the value of all outputs in a transaction are subtracted from all inputs in a transaction; the fee is paid to the miner who includes that transaction in a block."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/locktime" style="color: #2c6fad; text-decoration-line: none;" title="Part of a transaction which indicates the earliest time or earliest block when that transaction may be added to the block chain."></a>第二个交易花费所有第一个交易的millibitcoins（减去交易费）在由locktime强制执行的24小时延时后返回给Bob。</span><span class="yiyi-st" id="yiyi-568">这是<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#issuing-refunds" style="color: #2c6fad; text-decoration-line: none;" title="A transaction which refunds some or all satoshis received in a previous transaction">退款</a>交易。</span><span class="yiyi-st" id="yiyi-569">Bob不能自己签名<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#issuing-refunds" style="color: #2c6fad; text-decoration-line: none;" title="A transaction which refunds some or all satoshis received in a previous transaction">退款</a>交易，所以他把它交给Alice签字，如下图所示。</span></div>
<div style="line-height: 1.5em;">
<img alt="Micropayment Channel Example" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-micropayment-channel.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-570">Alice检查<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#issuing-refunds" style="color: #2c6fad; text-decoration-line: none;" title="A transaction which refunds some or all satoshis received in a previous transaction">退款</a>交易的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/locktime" style="color: #2c6fad; text-decoration-line: none;" title="Part of a transaction which indicates the earliest time or earliest block when that transaction may be added to the block chain.">locktime</a>是未来24小时，签名，并将其副本返回给Bob。</span><span class="yiyi-st" id="yiyi-571">然后，她询问Bob进行债券交易，并检查<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#issuing-refunds" style="color: #2c6fad; text-decoration-line: none;" title="A transaction which refunds some or all satoshis received in a previous transaction">退款</a>交易是否支付债券交易的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>。</span><span class="yiyi-st" id="yiyi-572">她现在可以将债券交易广播到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>，以确保鲍勃必须等待时间锁定到期，然后再进一步消费他的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">millibitcoins</a>。</span><span class="yiyi-st" id="yiyi-573">Bob迄今为止还没有花费任何东西，除了可能还有一个小的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/transaction-fee" style="color: #2c6fad; text-decoration-line: none;" title="The amount remaining when the value of all outputs in a transaction are subtracted from all inputs in a transaction; the fee is paid to the miner who includes that transaction in a block.">交易费</a>，他将能够在24小时内广播一个完整的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#issuing-refunds" style="color: #2c6fad; text-decoration-line: none;" title="A transaction which refunds some or all satoshis received in a previous transaction">退款</a>的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#issuing-refunds" style="color: #2c6fad; text-decoration-line: none;" title="A transaction which refunds some or all satoshis received in a previous transaction">退款</a>交易。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-574">现在，当Alice做值1&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">millibitcoin</a>的工作时，她要求Bob创建并签署新版本的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#issuing-refunds" style="color: #2c6fad; text-decoration-line: none;" title="A transaction which refunds some or all satoshis received in a previous transaction">退款</a>交易。</span><span class="yiyi-st" id="yiyi-575">交易的第二版将1&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">millibitcoin</a>花费到Alice，另一个99返回给Bob；它没有<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/locktime" style="color: #2c6fad; text-decoration-line: none;" title="Part of a transaction which indicates the earliest time or earliest block when that transaction may be added to the block chain.">锁定时间</a>，所以Alice只要她想要就可以签署并花费它。</span><span class="yiyi-st" id="yiyi-576">（但她不会立即这样做）</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-577">Alice和Bob重复这些工作和付款步骤，直到Alice完成一天的工作，或者直到时间锁定即将到期。</span><span class="yiyi-st" id="yiyi-578">Alice签署了<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#issuing-refunds" style="color: #2c6fad; text-decoration-line: none;" title="A transaction which refunds some or all satoshis received in a previous transaction">退款</a>交易的最终版本，并将其广播，支付给自己，并将余下的余额退还给Bob。</span><span class="yiyi-st" id="yiyi-579">第二天，当Alice开始工作时，他们创建一个新的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-micropayment-channel" style="color: #2c6fad; text-decoration-line: none;">微支付渠道</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-580">如果Alice在时间锁定到期之前未能广播<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#issuing-refunds" style="color: #2c6fad; text-decoration-line: none;" title="A transaction which refunds some or all satoshis received in a previous transaction">退款</a>事务的新版本，则Bob可以广播第一个版本并收到一个完整的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#issuing-refunds" style="color: #2c6fad; text-decoration-line: none;" title="A transaction which refunds some or all satoshis received in a previous transaction">退款</a>。</span><span class="yiyi-st" id="yiyi-581">这是<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-micropayment-channel" style="color: #2c6fad; text-decoration-line: none;">微支付渠道</a>最适合小额付款的一个原因 - 如果Alice的互联网服务在时间锁定到期时间断了几个小时，她可能会被骗走付款。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-582"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/malleability" style="color: #2c6fad; text-decoration-line: none;" title="The ability of someone to change (mutate) unconfirmed transactions without making them invalid, which changes the transaction's txid, making child transactions invalid.">交易可扩展性</a>，在上面交易部分讨论过，是限制<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-micropayment-channel" style="color: #2c6fad; text-decoration-line: none;">微支付渠道</a>的价值的另一个原因。</span><span class="yiyi-st" id="yiyi-583">如果有人使用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/malleability" style="color: #2c6fad; text-decoration-line: none;" title="The ability of someone to change (mutate) unconfirmed transactions without making them invalid, which changes the transaction's txid, making child transactions invalid.">交易可扩展性</a>来破坏两个交易之间的链接，即使没有完成任何工作，Alice也可以保留Bob的100&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">millibitcoins</a>质押币。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-584">对于较大的付款，比特币<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/transaction-fee" style="color: #2c6fad; text-decoration-line: none;" title="The amount remaining when the value of all outputs in a transaction are subtracted from all inputs in a transaction; the fee is paid to the miner who includes that transaction in a block.">交易费用</a>占交易总额的百分比非常低，因此使用立即广播的单独交易来保护付款更有意义。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-585"><strong>资源：</strong>&nbsp;<a href="http://bitcoinj.github.io/" style="color: #2c6fad; text-decoration-line: none;">bitcoinj</a>&nbsp;Java库提供了一组完整的微支付功能，一个示例实现，以及<a href="https://bitcoinj.github.io/working-with-micropayments" style="color: #2c6fad; text-decoration-line: none;">一个教程</a>，全部基于Apache许可证。</span></div>
<h3 class=" anchorAf" id="coinjoin" style="color: #383838; font-size: 20.8px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-586">CoinJoin混币技术</span></h3>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_contracts.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-587"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_contracts.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_contracts.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_contracts.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-588">Alice很担心她的隐私。</span><span class="yiyi-st" id="yiyi-589">她知道每个交易都被添加到公共<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>中，所以当Bob和Charlie付钱时，他们可以轻松跟踪<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>来了解她支付过的Bitcoin&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址，支付多少钱，还有她还剩多少</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-590"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis."></a>Alice不是一个犯罪分子，她只是希望对获知她花费及她剩余的satoshis合理地拒绝，所以她在她的电脑上启动了Tor匿名服务，并以"AnnoGirl"登陆到IRC聊天室。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-591">同样“Nemo”和“Neminem”也在聊天室，他们共同地同意将<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>彼此转移，除了他们之外，没有人可以肯定谁控制这些<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>。</span><span class="yiyi-st" id="yiyi-592">但是他们面临两难的境地：谁先将他们的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>转移到另外两个假名的人之一？</span><span class="yiyi-st" id="yiyi-593">CoinJoin风格的合约如下图所示，使得这个决定变得容易：他们创造了一个单一的交易，同时进行所有的支出，确保没有人能够窃取他人的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoyis</a>。</span></div>
<div style="line-height: 1.5em;">
<img alt="Example CoinJoin Transaction" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-coinjoin.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-594"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/unspent-transaction-output" style="color: #2c6fad; text-decoration-line: none;" title="An Unspent Transaction Output (UTXO) that can be spent as an input in a new transaction."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis."></a>每个参与者都可以查看他们可以花费的100 millibitcoins的UTXOs的集合信息。</span><span class="yiyi-st" id="yiyi-595">然后，他们每个都会生成一个全新的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>，并向协调人提供<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/unspent-transaction-output" style="color: #2c6fad; text-decoration-line: none;" title="An Unspent Transaction Output (UTXO) that can be spent as an input in a new transaction.">UTXO</a>细节和<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/p2pkh-address" style="color: #2c6fad; text-decoration-line: none;" title="A Bitcoin payment address comprising a hashed public key, allowing the spender to create a standard pubkey script that Pays To PubKey Hash (P2PKH).">pubkey哈希</a>。</span><span class="yiyi-st" id="yiyi-596">在这种情况下，协调者是AnonGirl；她将每个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/unspent-transaction-output" style="color: #2c6fad; text-decoration-line: none;" title="An Unspent Transaction Output (UTXO) that can be spent as an input in a new transaction.">UTXO</a>的交易创建到三个相等大小的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>。</span><span class="yiyi-st" id="yiyi-597">一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>转到每个参与者<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/p2pkh-address" style="color: #2c6fad; text-decoration-line: none;" title="A Bitcoin payment address comprising a hashed public key, allowing the spender to create a standard pubkey script that Pays To PubKey Hash (P2PKH).">pubkey哈希</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-598">AnonGirl然后使用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/sighash-all" style="color: #2c6fad; text-decoration-line: none;" title="Default signature hash type which signs the entire transaction except any signature scripts, preventing modification of the signed parts."><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">SIGHASH_ALL</code></a>签名<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it.">输入</a>，以确保没有人可以更改<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it.">输入</a>或<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>详细信息。</span><span class="yiyi-st" id="yiyi-599">她向Nemo提供部分签名的交易，他们以相同的方式签署他的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it.">输入</a>，并将其传递给同样的方式签署的Neminem。</span><span class="yiyi-st" id="yiyi-600">Neminem然后将交易广播到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">P2P网络</a>，将所有<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">millibitcoins</a>混合在一个交易中。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-601"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a>如图所示，除了AnonGirl，Nemo和Neminem之外，任何人都无法肯定谁收到哪个输出，所以他们可以不可追踪地花费他们的输出。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-602">现在当Bob或Charlie尝试通过<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>跟踪Alice的交易时，他们还将看到Nemo和Neminem所做的交易。</span><span class="yiyi-st" id="yiyi-603">如果Alice做了更多的混币交易，Bob和Charlie可能不得不猜测几十个或几百个人中哪些实际上是由爱丽丝制造的交易。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-604">Alice's&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>的完整历史仍然在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>中，所以一个确定的调查员可以和AnonGirl CoinJoined的人交谈，找出她的最终来源<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>，可能会将AnonGirl显露为Alice。</span><span class="yiyi-st" id="yiyi-605">但是，对于随便查看<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">区块链</a>历史信息的人来说，爱丽丝获得了合理的可否认性。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-606">上文所述的CoinJoin技术使参与者花费少量<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>来支付<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/transaction-fee" style="color: #2c6fad; text-decoration-line: none;" title="The amount remaining when the value of all outputs in a transaction are subtracted from all inputs in a transaction; the fee is paid to the miner who includes that transaction in a block.">交易费</a>。</span><span class="yiyi-st" id="yiyi-607">一种替代技术，购买者CoinJoin，实际上可以保存他们<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>，同时提高他们的隐私。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-608">AnonGirl等待IRC聊天室，直到她想要购买。</span><span class="yiyi-st" id="yiyi-609">她宣布她打算使用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>，等待有人想要从另一个商家进行购买。</span><span class="yiyi-st" id="yiyi-610">然后，它们以与之前相同的方式组合它们的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it.">输入</a>，但将<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>设置为单独的商户<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>，所以没有人能够仅从<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>历史单独指出其中一个人从商人那里买了什么。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-611">由于他们不得不支付<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/transaction-fee" style="color: #2c6fad; text-decoration-line: none;" title="The amount remaining when the value of all outputs in a transaction are subtracted from all inputs in a transaction; the fee is paid to the miner who includes that transaction in a block.">交易费</a>来进行购买，因此AnonGirl和她的共同消费者不需要支付任何额外费用，但是由于它们通过组合多个交易减少开销，节省了字节数，他们可能能够支付较小的集合<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/transaction-fee" style="color: #2c6fad; text-decoration-line: none;" title="The amount remaining when the value of all outputs in a transaction are subtracted from all inputs in a transaction; the fee is paid to the miner who includes that transaction in a block.">交易费</a>，从而为他们致以节省少量的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-612"><strong>资源：在撰写本文时，</strong>去中心化的CoinJoin的Alpha版本的实现是<a href="http://coinmux.com/" style="color: #2c6fad; text-decoration-line: none;">CoinMux</a>，仍然是Apache许可。</span></div>
<h2 class=" anchorAf" id="wallets" style="color: #383838; font-family: Ubuntu, sans-serif; font-size: 24px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-613">钱包</span></h2>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_wallets.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-614"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_wallets.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_wallets.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_wallets.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-615">比特币<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>可以指代<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>程序或<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>文件。</span><span class="yiyi-st" id="yiyi-616"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">电子钱包</a>程序创建<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公共密钥</a>接收<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>，并使用相应的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>花费<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis 。</a></span><span class="yiyi-st" id="yiyi-617"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">电子钱包</a>文件存储<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>和（可选的）与<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>程序的交易相关的其他信息。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-618"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>程序和<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>文件在下面的不同小节中介绍，本文档试图澄清我们在谈论是<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>程序或<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>文件。</span></div>
<h3 class=" anchorAf" id="wallet-programs" style="color: #383838; font-size: 20.8px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-619">钱包软件</span></h3>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_wallets.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-620"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_wallets.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_wallets.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_wallets.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-621">允许<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>的接收和支出是<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>软件的唯一基本特征，但是特定的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>程序不需都要做这两件事情。</span><span class="yiyi-st" id="yiyi-622">两个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>程序可以一起工作，一个程序分发<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>以便接收<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>，另一个程序签名交易来花费那些&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-623"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>程序还需要与<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">P2P网络</a>进行交互，以从<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>获取信息并广播新的交易。</span><span class="yiyi-st" id="yiyi-624">然而，分发<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>或签名交易的程序就不需要与<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">P2P网络</a>本身进行交互。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-625">这使我们有一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>系统的三个必要但可分离的部分：一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>分发程序，签名程序和联网程序。</span><span class="yiyi-st" id="yiyi-626">在下面的小节中，我们将介绍这些部分的常见组合。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-627">注意：我们讲通常是分发<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>。</span><span class="yiyi-st" id="yiyi-628">在许多情况下，将分发P2PKH或P2SH哈希来代替<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>，实际的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>仅在它们控制的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>被花费时候分发。</span></div>
<h4 class=" anchorAf" id="full-service-wallets" style="color: #383838; font-size: 17.6px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-629">全服务的钱包</span></h4>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_wallets.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-630"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_wallets.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_wallets.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_wallets.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-631">最简单的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>是一个执行所有三个功能的程序：它产生<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>，导出相应的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>，根据需要帮助分发<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>，监视花费在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>上的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>，创建并签名花费那些<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>的交易，并广播签名过的交易。</span></div>
<div style="line-height: 1.5em;">
<img alt="Full-Service Wallets" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-wallets-full-service.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-632">在撰写本文时，几乎所有流行的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>可用作全服务<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-633">全方位服务<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>的主要优点是易于使用。</span><span class="yiyi-st" id="yiyi-634">一个程序执行用户需要接收的所有东西，并花费<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-635">全服务<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>的主要缺点是它们在连接到互联网的设备上存储<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>。</span><span class="yiyi-st" id="yiyi-636">这种设备被入侵是常见的事情，因特网连接使得容易将<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>从被感染的设备发送给攻击者。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-637">为了防盗，许多<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>程序为用户提供可选项加密包含<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>文件。</span><span class="yiyi-st" id="yiyi-638"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key."></a>当私钥不被使用时，它可以提供保护，但是它不能防止捕获密钥的攻击或从内存中读取解密密钥。</span></div>
<h4 class=" anchorAf" id="signing-only-wallets" style="color: #383838; font-size: 17.6px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-639">只签名钱包</span></h4>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_wallets.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-640"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_wallets.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_wallets.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_wallets.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-641">为了提高安全性，可以通过在更安全的环境中运行的单独的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>程序来生成和存储<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>。</span><span class="yiyi-st" id="yiyi-642">这些仅签名的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>与与<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">对等网络</a>交互的网络<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>配合使用。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-643"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/parent-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key used to derive child keys. The key can be either a private key or a public key, and the key derivation may also require a chain code."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/child-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key derived from a parent key. The key can be either a private key or a public key, and the key derivation may also require a chain code."></a>典型的只签名钱包软件使用确定的密钥产生器（稍后描述）去创建父私钥公钥，它们可以创建新的子私钥公钥。</span></div>
<div style="line-height: 1.5em;">
<img alt="Signing-Only Wallets" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-wallets-signing-only.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-644">首次运行时，只签名的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>创建一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/parent-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key used to derive child keys. The key can be either a private key or a public key, and the key derivation may also require a chain code.">父私钥</a>，并将相应的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/parent-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key used to derive child keys. The key can be either a private key or a public key, and the key derivation may also require a chain code.">父公钥</a>传送到联网的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包。</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-645"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/parent-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key used to derive child keys. The key can be either a private key or a public key, and the key derivation may also require a chain code."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/child-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key derived from a parent key. The key can be either a private key or a public key, and the key derivation may also require a chain code."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis."></a>联网的钱包使用父公钥导出子公钥，可选的帮助分发它们，或者监控花费在那些公钥上的输出，为花费那些输出创建未签名的交易，并传输未签名的交易到只签名钱包。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-646"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis."></a>通常用户使用只签名钱包有机会看到未签名交易的细节特别是输出细节。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-647"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/parent-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key used to derive child keys. The key can be either a private key or a public key, and the key derivation may also require a chain code."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/child-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key derived from a parent key. The key can be either a private key or a public key, and the key derivation may also require a chain code."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis."></a>在可选的检查步骤之后，只签名钱包使用父私钥导出合适的子私钥，并签名那些交易，发送签名过的交易给联网的钱包。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-648"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks"></a>然后联网的钱包将签名过的交易广播到P2P网络上。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-649">以下小节描述了只签名<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>的两个最常见的变体：离线&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>和硬件<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>。</span></div>
<h5 class=" anchorAf" id="offline-wallets" style="color: #383838; font-size: 16px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-650">离线钱包</span></h5>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_wallets.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-651"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_wallets.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_wallets.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_wallets.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-652"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis."></a>一些完整的全服务钱包程序可以作为两种独立的钱包运行：一个程序实例作为只签名钱包（通常称为离线钱包），另外一个程序实例联网钱包（通常称为在线钱包或只观看钱包）。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-653">离线<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>如此命名，因为它打算在不连接到任何<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>的设备上运行，大大减少了攻击次数。</span><span class="yiyi-st" id="yiyi-654">如果是这种情况，通常由用户使用可移动介质（如USB驱动器）处理所有数据传输。</span><span class="yiyi-st" id="yiyi-655">用户的工作流程如下：</span></div>
<ol style="margin-left: 0px; padding-left: 20px;">
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-656">（离线）禁用设备上的所有<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>连接，并安装<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>软件。</span><span class="yiyi-st" id="yiyi-657">在离线模式下启动<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>软件，以创建<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/parent-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key used to derive child keys. The key can be either a private key or a public key, and the key derivation may also require a chain code.">父私钥和公钥</a>。</span><span class="yiyi-st" id="yiyi-658">将<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/parent-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key used to derive child keys. The key can be either a private key or a public key, and the key derivation may also require a chain code.">父公钥</a>复制到可移动媒体。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-659">（在线）将<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>软件安装在另一台设备上，该设备联网，并从可移动媒体导入<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/parent-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key used to derive child keys. The key can be either a private key or a public key, and the key derivation may also require a chain code.">父公钥</a>。</span><span class="yiyi-st" id="yiyi-660">像使用全服务<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>一样，分发<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>来接收付款。</span><span class="yiyi-st" id="yiyi-661">当准备花费<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>时，填写<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>细节，并将<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>生成的未签名交易保存到可移动媒体。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-662">（离线）在脱机实例中打开未签名的事务，查看<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>详细信息，确保他们将正确的金额用于正确的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>。</span><span class="yiyi-st" id="yiyi-663">这可以防止在线<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>上的恶意软件欺骗用户签署支付给攻击者的交易。</span><span class="yiyi-st" id="yiyi-664">经过审查，将交易签名并将其保存到可移动媒体上。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-665">（在线）在在线实例中打开签名的交易，以便将其广播到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">P2P网络</a>。</span></div>
</li>
</ol>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-666">脱机<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>的主要优点是可以大大提高全服务<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>的安全性。</span><span class="yiyi-st" id="yiyi-667">只要离线<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>不会受到损害（或有缺陷），用户在签署之前审核所有外发交易，即使在线<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包被破坏，用户的</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>也是安全的。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-668">离线<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>的主要缺点是麻烦。</span><span class="yiyi-st" id="yiyi-669">为了安全最大化，它们要求用户仅将一个设备专用于离线任务。</span><span class="yiyi-st" id="yiyi-670">离线钱包必须在资金花费时启动，用户必须将数据在在线设备和离线设备中来回复制。</span></div>
<h5 class=" anchorAf" id="hardware-wallets" style="color: #383838; font-size: 16px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-671">硬件钱包</span></h5>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_wallets.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-672"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_wallets.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_wallets.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_wallets.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-673">硬件<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>是专用于运行只签名<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>的设备。</span><span class="yiyi-st" id="yiyi-674">他们的奉献使他们能够消除设计用于一般用途的操作系统中存在的许多漏洞，从而允许他们直接与其他设备通信，以便用户不需要手动传输数据。</span><span class="yiyi-st" id="yiyi-675">用户的工作流程如下：</span></div>
<ol style="margin-left: 0px; padding-left: 20px;">
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-676">（硬件）创建<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/parent-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key used to derive child keys. The key can be either a private key or a public key, and the key derivation may also require a chain code.">父私钥和公钥</a>。</span><span class="yiyi-st" id="yiyi-677">将硬件<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>连接到网络设备，以便它可以获取<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/parent-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key used to derive child keys. The key can be either a private key or a public key, and the key derivation may also require a chain code.">父公钥</a>。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-678">（网络）正如使用全服务<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>一样，分发<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>来接收付款。</span><span class="yiyi-st" id="yiyi-679">当准备花费<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>时，填写交易详情，连接硬件<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>，然后点击支出。</span><span class="yiyi-st" id="yiyi-680">联网的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>将自动发送交易详细信息到硬件<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-681">（硬件）在硬件<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包的</a>屏幕上查看交易详情。</span><span class="yiyi-st" id="yiyi-682">某些硬件<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>可能会提示输入密码或PIN码。</span><span class="yiyi-st" id="yiyi-683">硬件<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>将事务签名并上传到联网的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-684">（网络化）联网的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>从硬件<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>接收签名的交易，并将其广播到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>。</span></div>
</li>
</ol>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-685">硬件<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>的主要优点是可以大大提高全服务<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>的安全性，而且不需要比离线<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>更麻烦。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-686">硬件<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>的主要缺点是麻烦。</span><span class="yiyi-st" id="yiyi-687"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis."></a>即使麻烦小于离线钱包，用户仍然必须购买硬件钱包设备，并在他们需要使用签名钱包签名交易时候随身携带。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-688">一个额外的（希望是暂时的）缺点是，在撰写本文时，流行的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>程序很少支持硬件<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>&nbsp;- 虽然几乎所有流行的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>程序已宣布有意外去至少支持一种硬件<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包型号</a>。</span></div>
<h4 class=" anchorAf" id="distributing-only-wallets" style="color: #383838; font-size: 17.6px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-689">仅分发钱包</span></h4>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_wallets.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-690"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_wallets.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_wallets.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_wallets.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-691"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包程序</a>在难以安全的环境中运行（如Web服务器）可以设计为只分发<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>（包括P2PKH或<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/p2sh-address" style="color: #2c6fad; text-decoration-line: none;" title="A Bitcoin payment address comprising a hashed script, allowing the spender to create a standard pubkey script that Pays To Script Hash (P2SH). The script can be almost any valid pubkey script.">P2SH地址</a>&nbsp;）而没有更多功能。</span><span class="yiyi-st" id="yiyi-692">设计这些极简<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>有两种常见的方法：</span></div>
<div style="line-height: 1.5em;">
<img alt="Distributing-Only Wallets" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-wallets-distributing-only.svg" style="border: 0px; max-width: 100%;" /></div>
<ul style="margin-left: 0px; padding-left: 20px;">
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-693">使用多个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公开密钥</a>或<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>预填充数据库，然后使用其中一个数据库条目根据请求分发<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code.">pubkey脚本</a>或<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址。</a></span><span class="yiyi-st" id="yiyi-694"><a href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#avoiding-key-reuse" style="color: #2c6fad; text-decoration-line: none;"></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair."></a>为了避免密钥重用，Web服务器应该跟踪使用的密钥，永远不会用完公钥。</span><span class="yiyi-st" id="yiyi-695">通过使用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/parent-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key used to derive child keys. The key can be either a private key or a public key, and the key derivation may also require a chain code.">父公钥</a>，可以使其更容易，如下一个方法中所建议的那样。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-696">使用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/parent-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key used to derive child keys. The key can be either a private key or a public key, and the key derivation may also require a chain code.">父公钥</a>创建<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/child-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key derived from a parent key. The key can be either a private key or a public key, and the key derivation may also require a chain code.">子公钥</a>。</span><span class="yiyi-st" id="yiyi-697">为了避免密钥重用，必须使用一种方法来确保相同的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>不分发两次。</span><span class="yiyi-st" id="yiyi-698">这可以是分配的每个密钥的数据库条目或指向<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-key-index" style="color: #2c6fad; text-decoration-line: none;" title="An index number used in the HD wallet formula to generate child keys from a parent key">密钥索引</a>号码的递增指针。</span></div>
</li>
</ul>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-699"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair."></a>这两种方法都不会增加大量的开销，特别是如果数据库被用于关联输入的付款和一个单独的公钥来跟踪付款的时候。</span><span class="yiyi-st" id="yiyi-700">有关详细信息，请参阅<a href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#payment-processing" style="color: #2c6fad; text-decoration-line: none;">支付流程</a>部分。</span></div>
<h3 class=" anchorAf" id="wallet-files" style="color: #383838; font-size: 20.8px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-701">钱包文件</span></h3>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_wallets.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-702"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_wallets.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_wallets.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_wallets.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-703"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key."></a>比特币钱包核心就是私钥的集合。</span><span class="yiyi-st" id="yiyi-704">这些集合以数字方式存储在文件中，甚至可以物理存储在纸张上。</span></div>
<h4 class=" anchorAf" id="private-key-formats" style="color: #383838; font-size: 17.6px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-705">私钥格式</span></h4>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_wallets.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-706"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_wallets.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_wallets.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_wallets.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-707"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>是用于从特定的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>解锁<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>。</span><span class="yiyi-st" id="yiyi-708">在比特币中，标准格式的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>只是一个256位数字，在值的范围是：</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-709">0x01 and 0xFFFF FFFF FFFF FFFF FFFF FFFF FFFF FFFE BAAE DCE6 AF48 A03B BFD2 5E8C D036 4140, 几乎覆盖 2<span style="font-size: 12px; line-height: 0; position: relative; top: -0.5em; vertical-align: baseline;">256</span>-1个数值的整个范围.</span><span class="yiyi-st" id="yiyi-710">该范围由比特币使用的<a class="auto-link" href="http://www.secg.org/sec2-v2.pdf" style="color: #2c6fad; text-decoration-line: none;">secp256k1</a>&nbsp;<a class="auto-link" href="https://en.wikipedia.org/wiki/Elliptic_Curve_DSA" style="color: #2c6fad; text-decoration-line: none;">ECDSA</a>加密标准决定。</span></div>
<h5 class=" anchorAf" id="wallet-import-format-wif" style="color: #383838; font-size: 16px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-711">钱包导入格式（WIF）</span></h5>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_wallets.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-712"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_wallets.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_wallets.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_wallets.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-713">为了使<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>的复制不容易出错，<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet-import-format" id="term-wallet-import-format" style="color: black; text-decoration-line: none;" title="A data interchange format designed to allow exporting and importing a single private key with a flag indicating whether or not it uses a compressed public key.">可以使用钱包导入格式WIF</a>。</span><span class="yiyi-st" id="yiyi-714"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet-import-format" style="color: #2c6fad; text-decoration-line: none;" title="A data interchange format designed to allow exporting and importing a single private key with a flag indicating whether or not it uses a compressed public key.">WIF</a>在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>上使用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/base58check" style="color: #2c6fad; text-decoration-line: none;" title="The method used in Bitcoin for converting 160-bit hashes into P2PKH and P2SH addresses. Also used in other parts of Bitcoin, such as encoding private keys for backup in WIP format. Not the same as other base58 implementations.">base58Check</a>编码，大大降低了复制错误的几率，这和标准比特币<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>很类似 。</span></div>
<ol style="margin-left: 0px; padding-left: 20px;">
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-715">拿出一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-716">在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mainnet" style="color: #2c6fad; text-decoration-line: none;" title="The original and main network for Bitcoin transactions, where satoshis have real economic value.">mainnet</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>之前添加一个0x80字节或<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/testnet" style="color: #2c6fad; text-decoration-line: none;" title="A global testing environment in which developers can obtain and spend satoshis that have no real-world value on a network that is very similar to the Bitcoin mainnet.">testnet</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>添加一个0xef字节。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-717">如果它与<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/compressed-public-key" style="color: #2c6fad; text-decoration-line: none;" title="An ECDSA public key that is 33 bytes long rather than the 65 bytes of an uncompressed public key.">压缩的公钥</a>一起使用（在后面的小节中描述），则会添加一个0x01字节。</span><span class="yiyi-st" id="yiyi-718">如果与未压缩的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>一起使用，则不附加任何内容。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-719">在扩展密钥上执行SHA-256哈希。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-720">对SHA-256哈希的结果执行SHA-256哈希。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-721">取第二个SHA-256哈希的前四个字节；这是校验和。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-722">从第2点的扩展密钥的末尾添加第5点的四个校验和字节。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-723">使用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/base58check" style="color: #2c6fad; text-decoration-line: none;" title="The method used in Bitcoin for converting 160-bit hashes into P2PKH and P2SH addresses. Also used in other parts of Bitcoin, such as encoding private keys for backup in WIP format. Not the same as other base58 implementations.">Base58Check</a>编码将结果从字节字符串转换为<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/base58check" style="color: #2c6fad; text-decoration-line: none;" title="The method used in Bitcoin for converting 160-bit hashes into P2PKH and P2SH addresses. Also used in other parts of Bitcoin, such as encoding private keys for backup in WIP format. Not the same as other base58 implementations.">Base58</a>字符串。</span></div>
</li>
</ol>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-724">该过程很容易可逆，使用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/base58check" style="color: #2c6fad; text-decoration-line: none;" title="The method used in Bitcoin for converting 160-bit hashes into P2PKH and P2SH addresses. Also used in other parts of Bitcoin, such as encoding private keys for backup in WIP format. Not the same as other base58 implementations.">Base58</a>解码功能，并删除填充。</span></div>
<h5 class=" anchorAf" id="mini-private-key-format" style="color: #383838; font-size: 16px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-725">迷你私钥格式</span></h5>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_wallets.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-726"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_wallets.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_wallets.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_wallets.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-727">Mini&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>格式是一种用于在30个字符内编码<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>的方法，可以将密钥嵌入在小物理空间中，例如物理比特币令牌，抗损害的QR码。</span></div>
<ol style="margin-left: 0px; padding-left: 20px;">
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-728">迷你密钥的第一个字符是'S'。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-729">为了确定迷你<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>是否格式正确，在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>中添加了一个问号。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-730">计算SHA256哈希。</span><span class="yiyi-st" id="yiyi-731">如果产生的第一个字节为“00”，则格式良好。</span><span class="yiyi-st" id="yiyi-732">这个关键的限制是错误检测机制。</span><span class="yiyi-st" id="yiyi-733">用户使用随机数强制穷举，直到产生格式正确的迷你<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-734">为了导出完整的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>，用户只需要使用原始迷你<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>的单个SHA256哈希。</span><span class="yiyi-st" id="yiyi-735">这个过程是单向的：从派生密钥很难计算出迷你<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>格式。</span></div>
</li>
</ol>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-736">由于与'l'的视觉相似性，许多实现不允许迷你<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>中使用字符'1'。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-737"><strong>资源：</strong>创建和兑现这些密钥的常用工具是<a href="https://github.com/casascius/Bitcoin-Address-Utility" style="color: #2c6fad; text-decoration-line: none;">Casascius Bitcoin Address Utility</a>。</span></div>
<h4 class=" anchorAf" id="public-key-formats" style="color: #383838; font-size: 17.6px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-738">公钥格式</span></h4>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_wallets.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-739"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_wallets.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_wallets.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_wallets.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-740">比特币<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">ECDSA公钥</a>表示在<a class="auto-link" href="http://www.secg.org/sec2-v2.pdf" style="color: #2c6fad; text-decoration-line: none;">secp256k1</a>中定义的特定椭圆曲线（EC）上的一个点。</span><span class="yiyi-st" id="yiyi-741">在其传统的未压缩形式中，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>包含一个标识字节，一个32字节的X坐标和一个32字节的Y坐标。</span><span class="yiyi-st" id="yiyi-742">下面非常简化的图表显示了比特币在连续数字字段上使用的椭圆曲线y&nbsp;<span style="font-size: 12px; line-height: 0; position: relative; top: -0.5em; vertical-align: baseline;">2</span>&nbsp;= x&nbsp;<span style="font-size: 12px; line-height: 0; position: relative; top: -0.5em; vertical-align: baseline;">3</span>&nbsp;+ 7上的这一点。</span></div>
<div style="line-height: 1.5em;">
<img alt="Point On ECDSA Curve" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-ecdsa-compressed-public-key.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-743">（<a class="auto-link" href="http://www.secg.org/sec2-v2.pdf" style="color: #2c6fad; text-decoration-line: none;">Secp256k1</a>实际上是一个大素数的modulos坐标，尽管原理是相同的，但是它产生非连续整数的字段和明显不太清楚的图。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-744">通过去除Y坐标，可以实现<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>大小几乎减少50％，而不会改变任何基本法则。</span><span class="yiyi-st" id="yiyi-745">这是可能的，因为沿曲线上只有两个点共享任何特定的X坐标，因此32位Y坐标可以用一个位来代替，表示点在图示中出现的是顶部还是底部。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-746">创建这些<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/compressed-public-key" style="color: #2c6fad; text-decoration-line: none;" title="An ECDSA public key that is 33 bytes long rather than the 65 bytes of an uncompressed public key.">压缩的公钥</a>不会丢失任何数据 - 只需要少量的CPU来重建Y坐标和访问未压缩的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>。</span><span class="yiyi-st" id="yiyi-747">官方的<a class="auto-link" href="http://www.secg.org/sec2-v2.pdf" style="color: #2c6fad; text-decoration-line: none;">secp256k1</a>文档中描述了未压缩和<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/compressed-public-key" style="color: #2c6fad; text-decoration-line: none;" title="An ECDSA public key that is 33 bytes long rather than the 65 bytes of an uncompressed public key.">压缩的公钥</a>，并在广泛使用的OpenSSL库中默认支持。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-748"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/compressed-public-key" style="color: #2c6fad; text-decoration-line: none;" title="An ECDSA public key that is 33 bytes long rather than the 65 bytes of an uncompressed public key."></a>因为他们易于使用，并减少了存储每次花费输出的将近一半的链空间，压缩公钥是Bitcoin Core默认的，并是所有比特币软件推荐使用的。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-749">然而，Bitcoin Core在0.6之前使用未压缩的密钥。</span><span class="yiyi-st" id="yiyi-750"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/p2pkh-address" style="color: #2c6fad; text-decoration-line: none;" title="A Bitcoin payment address comprising a hashed public key, allowing the spender to create a standard pubkey script that Pays To PubKey Hash (P2PKH)."></a>这造成一些麻烦，因为非压缩密钥的哈希格式不同于压缩密钥的哈希格式，所以同一个密钥要有两个不同的P2PKH地址。</span><span class="yiyi-st" id="yiyi-751">这也意味着密钥必须在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature-script" style="color: #2c6fad; text-decoration-line: none;" title="Data generated by a spender which is almost always used as variables to satisfy a pubkey script. Signature Scripts are called scriptSig in code.">签名脚本</a>中以正确的格式提交，能匹配上一个先前<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出的</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code.">pubkey脚本</a>中的哈希。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-752">因此，Bitcoin Core使用几个不同的标识符字节来帮助程序识别如何使用密钥：</span></div>
<ul style="margin-left: 0px; padding-left: 20px;">
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-753"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/compressed-public-key" style="color: #2c6fad; text-decoration-line: none;" title="An ECDSA public key that is 33 bytes long rather than the 65 bytes of an uncompressed public key."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/base58check" style="color: #2c6fad; text-decoration-line: none;" title="The method used in Bitcoin for converting 160-bit hashes into P2PKH and P2SH addresses. Also used in other parts of Bitcoin, such as encoding private keys for backup in WIP format. Not the same as other base58 implementations."></a>私钥意味着在被Base-58编码前使用添加了0x01的压缩公钥。</span><span class="yiyi-st" id="yiyi-754">（参见上面的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>编码部分。）</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-755">未压缩的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>以0x04开头；&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/compressed-public-key" style="color: #2c6fad; text-decoration-line: none;" title="An ECDSA public key that is 33 bytes long rather than the 65 bytes of an uncompressed public key.">压缩的公开密钥</a>以0x03或0x02开头，取决于它们是否大于或小于曲线的中点。</span><span class="yiyi-st" id="yiyi-756">这些前缀字节都在官方的<a class="auto-link" href="http://www.secg.org/sec2-v2.pdf" style="color: #2c6fad; text-decoration-line: none;">secp256k1</a>文档中定义使用。</span></div>
</li>
</ul>
<h4 class=" anchorAf" id="hierarchical-deterministic-key-creation" style="color: #383838; font-size: 17.6px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-757">分层确定性密钥创建</span></h4>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_wallets.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-758"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_wallets.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_wallets.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_wallets.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-759"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/hd-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The Hierarchical Deterministic (HD) key creation and transfer protocol (BIP32), which allows creating child keys from parent keys in a hierarchy. Wallets using the HD protocol are called HD wallets.">分层确定性</a>密钥创建和传输协议（<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/hd-protocol" id="term-hd-protocol" style="color: black; text-decoration-line: none;" title="The Hierarchical Deterministic (HD) key creation and transfer protocol (BIP32), which allows creating child keys from parent keys in a hierarchy. Wallets using the HD protocol are called HD wallets.">HD协议</a>）极大地简化了<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>的备份，无需相同<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>的多个程序之间重复通信，允许创建可以独立运作的子帐户，即使子帐户遭到入侵，也能使每个父账户监控或控制其子帐户，并将每个账户划分为完全访问和受限访问部分，可以允许不受信任的用户或程序接收或监视付款但不能花费它们。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-760"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/hd-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The Hierarchical Deterministic (HD) key creation and transfer protocol (BIP32), which allows creating child keys from parent keys in a hierarchy. Wallets using the HD protocol are called HD wallets.">HD协议</a>利用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">ECDSA公钥</a>创建函数<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-point-function" id="term-point-function" style="color: black; text-decoration-line: none;" title="The ECDSA function used to create a public key from a private key"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); color: #646464; font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">point()</code></a>，其占用一个大整数（<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>），并将其转换为图形点（即<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>）：</span></div>
<div class="highlighter-rouge">
<pre style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 12px; line-height: 1.5em; overflow-y: auto; padding: 17px;"><code style="border-radius: 3px; border: 0px; font-family: monospace, serif; padding: 0px;">point(private_key) == public_key
</code></pre>
</div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-761"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-point-function" style="color: #2c6fad; text-decoration-line: none;" title="The ECDSA function used to create a public key from a private key"></a><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;"></code><a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/child-key" id="term-child-public-key" style="color: black; text-decoration-line: none;" title="In HD wallets, a key derived from a parent key. The key can be either a private key or a public key, and the key derivation may also require a chain code."></a><a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/parent-key" id="term-parent-public-key" style="color: black; text-decoration-line: none;" title="In HD wallets, a key used to derive child keys. The key can be either a private key or a public key, and the key derivation may also require a chain code."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair."></a><em></em>以point()的工作方式，可以通过将现有的父公钥和另外一个从整数值(i)创建的公钥组合起来创建子公钥。</span><span class="yiyi-st" id="yiyi-762"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/child-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key derived from a parent key. The key can be either a private key or a public key, and the key derivation may also require a chain code."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-point-function" style="color: #2c6fad; text-decoration-line: none;" title="The ECDSA function used to create a public key from a private key"></a><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;"></code><em></em><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key."></a><em></em>这个子公钥与初始父私钥加上i值除去所有Bitcoin软件使用的全局常量p的产生的余数经过point()函数而创建的公钥相同。</span></div>
<div class="highlighter-rouge">
<pre style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 12px; line-height: 1.5em; overflow-y: auto; padding: 17px;"><code style="border-radius: 3px; border: 0px; font-family: monospace, serif; padding: 0px;">point( (parent_private_key + i) % p ) == parent_public_key + point(i)
</code></pre>
</div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-763">这意味着两个或多个独立的程序使用一致的整数序列可以从单个<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/parent-key" id="term-parent-key" style="color: black; text-decoration-line: none;" title="In HD wallets, a key used to derive child keys. The key can be either a private key or a public key, and the key derivation may also require a chain code.">父键</a>对创建一系列唯一的<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/child-key" id="term-child-key" style="color: black; text-decoration-line: none;" title="In HD wallets, a key derived from a parent key. The key can be either a private key or a public key, and the key derivation may also require a chain code.">子键</a>，而无需任何进一步的通信。</span><span class="yiyi-st" id="yiyi-764"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair."></a>此外，分发新公钥的程序可以不得到私钥而接收付款，这样允许公钥分发器工作在一个可能不安全的平台比如公共Web服务器。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-765"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/child-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key derived from a parent key. The key can be either a private key or a public key, and the key derivation may also require a chain code."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/child-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key derived from a parent key. The key can be either a private key or a public key, and the key derivation may also require a chain code."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/child-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key derived from a parent key. The key can be either a private key or a public key, and the key derivation may also require a chain code."></a>子公钥还能通过重复子键推导操作来创建他们自己的子公钥（孙子公钥）。</span></div>
<div class="highlighter-rouge">
<pre style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 12px; line-height: 1.5em; overflow-y: auto; padding: 17px;"><code style="border-radius: 3px; border: 0px; font-family: monospace, serif; padding: 0px;">point( (child_private_key + i) % p ) == child_public_key + point(i)
</code></pre>
</div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-766">无论是创建<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/child-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key derived from a parent key. The key can be either a private key or a public key, and the key derivation may also require a chain code.">子公钥</a>还是进一步派生的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>，可预测的整数序列将不如对所有交易使用单个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>，因为知道一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/child-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key derived from a parent key. The key can be either a private key or a public key, and the key derivation may also require a chain code.">子公钥</a>的任何人可以找到从相同的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/parent-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key used to derive child keys. The key can be either a private key or a public key, and the key derivation may also require a chain code.">父公钥</a>创建的所有其他<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/child-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key derived from a parent key. The key can be either a private key or a public key, and the key derivation may also require a chain code.">子公钥</a>。</span><span class="yiyi-st" id="yiyi-767">相反，可以使用随机种子来确定性地生成整数序列，使得<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/child-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key derived from a parent key. The key can be either a private key or a public key, and the key derivation may also require a chain code.">子公钥</a>之间的关系对于没有该种子的任何人都是不可见的。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-768"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/hd-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The Hierarchical Deterministic (HD) key creation and transfer protocol (BIP32), which allows creating child keys from parent keys in a hierarchy. Wallets using the HD protocol are called HD wallets.">HD协议</a>使用单个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/hd-wallet-seed" style="color: #2c6fad; text-decoration-line: none;" title="A potentially-short value used as a seed to generate the master private key and master chain code for an HD wallet.">根种子</a>创建具有不可推导的整数值的子，孙和其他派生密钥。</span><span class="yiyi-st" id="yiyi-769"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/child-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key derived from a parent key. The key can be either a private key or a public key, and the key derivation may also require a chain code."></a><a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/chain-code" id="term-chain-code" style="color: black; text-decoration-line: none;" title="In HD wallets, 256 bits of entropy added to the public and private keys to help them generate secure child keys; the master chain code is usually derived from a seed along with the master private key"></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/chain-code" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, 256 bits of entropy added to the public and private keys to help them generate secure child keys; the master chain code is usually derived from a seed along with the master private key"></a><a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/master-chain-code-and-private-key" id="term-master-chain-code" style="color: black; text-decoration-line: none;" title="In HD wallets, the master chain code and master private key are the two pieces of data derived from the root seed."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair."></a>每个子密钥还可以从它的父密钥获取一个确定性产生的种子，称为链代码，所以一个链代码的损害不会影响整个层次的整数序列，允许主链代码即使例如基于Web的公钥分发器被hacked还能继续使用。</span></div>
<div style="line-height: 1.5em;">
<img alt="Overview Of Hierarchical Deterministic Key Derivation" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-hd-overview.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-770">如上所述，HD密钥导出需要四个输入：</span></div>
<ul style="margin-left: 0px; padding-left: 20px;">
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-771"><em></em><a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/parent-key" id="term-parent-private-key" style="color: black; text-decoration-line: none;" title="In HD wallets, a key used to derive child keys. The key can be either a private key or a public key, and the key derivation may also require a chain code."></a><em></em><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/parent-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key used to derive child keys. The key can be either a private key or a public key, and the key derivation may also require a chain code."></a><a class="auto-link" href="https://en.wikipedia.org/wiki/Elliptic_Curve_DSA" style="color: #2c6fad; text-decoration-line: none;"></a>父私钥和父公钥是常规的未压缩256位ECDSA密钥。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-772"><a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/chain-code" id="term-parent-chain-code" style="color: black; text-decoration-line: none;" title="In HD wallets, 256 bits of entropy added to the public and private keys to help them generate secure child keys; the master chain code is usually derived from a seed along with the master private key">父链代码</a>是256位的看似随机数据。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-773"><a class="term" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-key-index" id="term-key-index" style="color: black; text-decoration-line: none;" title="An index number used in the HD wallet formula to generate child keys from a parent key">索引</a>号是程序指定的32位整数。</span></div>
</li>
</ul>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-774">在上述图示中所示的正常格式中，将<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/chain-code" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, 256 bits of entropy added to the public and private keys to help them generate secure child keys; the master chain code is usually derived from a seed along with the master private key">父链代码</a>，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/parent-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key used to derive child keys. The key can be either a private key or a public key, and the key derivation may also require a chain code.">父公钥</a>和索引号馈送到单向加密散列（<a href="https://en.wikipedia.org/wiki/HMAC" style="color: #2c6fad; text-decoration-line: none;">HMAC-SHA512</a>），以产生512位的确定性生成但似乎随机的数据。</span><span class="yiyi-st" id="yiyi-775">哈希<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>右侧的看似随机的256位用作新的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/chain-code" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, 256 bits of entropy added to the public and private keys to help them generate secure child keys; the master chain code is usually derived from a seed along with the master private key">子链代码</a>。</span><span class="yiyi-st" id="yiyi-776">使用散列<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>的左侧的看似随机的256位作为与<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/parent-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key used to derive child keys. The key can be either a private key or a public key, and the key derivation may also require a chain code.">父私钥</a>或<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/parent-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key used to derive child keys. The key can be either a private key or a public key, and the key derivation may also require a chain code.">父公共密钥组合的整数值</a>分别创建<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/child-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key derived from a parent key. The key can be either a private key or a public key, and the key derivation may also require a chain code.">子私钥</a>或<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/child-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key derived from a parent key. The key can be either a private key or a public key, and the key derivation may also require a chain code.">子公钥</a>：</span></div>
<div class="highlighter-rouge">
<pre style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 12px; line-height: 1.5em; overflow-y: auto; padding: 17px;"><code style="border-radius: 3px; border: 0px; font-family: monospace, serif; padding: 0px;">child_private_key == (parent_private_key + lefthand_hash_output) % G
child_public_key == point( (parent_private_key + lefthand_hash_output) % G )
child_public_key == point(child_private_key) == parent_public_key + point(lefthand_hash_output)
</code></pre>
</div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-777">指定不同的索引号将从相同的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/parent-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key used to derive child keys. The key can be either a private key or a public key, and the key derivation may also require a chain code.">父键</a>创建不同的不可链接的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/child-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key derived from a parent key. The key can be either a private key or a public key, and the key derivation may also require a chain code.">子键</a>。</span><span class="yiyi-st" id="yiyi-778">使用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/chain-code" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, 256 bits of entropy added to the public and private keys to help them generate secure child keys; the master chain code is usually derived from a seed along with the master private key">子链代码</a>重复<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/child-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key derived from a parent key. The key can be either a private key or a public key, and the key derivation may also require a chain code.">子键</a>的过程将创建不可链接的孙子键。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-779">因为创建<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/child-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key derived from a parent key. The key can be either a private key or a public key, and the key derivation may also require a chain code.">子键</a>需要键和<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/chain-code" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, 256 bits of entropy added to the public and private keys to help them generate secure child keys; the master chain code is usually derived from a seed along with the master private key">链代码</a>，所以键和<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/chain-code" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, 256 bits of entropy added to the public and private keys to help them generate secure child keys; the master chain code is usually derived from a seed along with the master private key">链代码</a>一起被称为<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/extended-key" id="term-extended-key" style="color: black; text-decoration-line: none;" title="In the context of HD wallets, a public key or private key extended with the chain code to allow them to derive child keys.">扩展键。</a></span><span class="yiyi-st" id="yiyi-780"><a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/extended-key" id="term-extended-private-key" style="color: black; text-decoration-line: none;" title="In the context of HD wallets, a public key or private key extended with the chain code to allow them to derive child keys.">扩展私钥</a>及其相应的<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/extended-key" id="term-extended-public-key" style="color: black; text-decoration-line: none;" title="In the context of HD wallets, a public key or private key extended with the chain code to allow them to derive child keys.">扩展公钥</a>具有相同的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/chain-code" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, 256 bits of entropy added to the public and private keys to help them generate secure child keys; the master chain code is usually derived from a seed along with the master private key">链码</a>。</span><span class="yiyi-st" id="yiyi-781">（顶级父级）<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/master-chain-code-and-private-key" id="term-master-private-key" style="color: black; text-decoration-line: none;" title="In HD wallets, the master chain code and master private key are the two pieces of data derived from the root seed.">主密钥</a>和<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/master-chain-code-and-private-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, the master chain code and master private key are the two pieces of data derived from the root seed.">主链码</a>从随机数据派生，如下所示。</span></div>
<div style="line-height: 1.5em;">
<img alt="Creating A Root Extended Key Pair" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-hd-root-keys.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-782">根据128位，256位或512位随机数据​​创建一个<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/hd-wallet-seed" id="term-root-seed" style="color: black; text-decoration-line: none;" title="A potentially-short value used as a seed to generate the master private key and master chain code for an HD wallet.">根种子</a>。</span><span class="yiyi-st" id="yiyi-783">这个少于128位的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/hd-wallet-seed" style="color: #2c6fad; text-decoration-line: none;" title="A potentially-short value used as a seed to generate the master private key and master chain code for an HD wallet.">根种子</a>是用户需要备份的唯一数据，以便使用特定设置来导出由特定<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>程序创建的每个密钥。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-784"><img alt="Warning icon" src="http://usyiyi.cn/documents/bitcoin/img/icons/icon_warning.svg" style="border: 0px; max-width: 100%;" />&nbsp;<strong>警告：</strong>在撰写本文时，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/hd-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The Hierarchical Deterministic (HD) key creation and transfer protocol (BIP32), which allows creating child keys from parent keys in a hierarchy. Wallets using the HD protocol are called HD wallets.">HD钱包</a>程序预计不会完全兼容，因此用户只能使用相同的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/hd-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The Hierarchical Deterministic (HD) key creation and transfer protocol (BIP32), which allows creating child keys from parent keys in a hierarchy. Wallets using the HD protocol are called HD wallets.">HD钱包程序，具有与特定</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/hd-wallet-seed" style="color: #2c6fad; text-decoration-line: none;" title="A potentially-short value used as a seed to generate the master private key and master chain code for an HD wallet.">根种子</a>相同的HD相关设置。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-785"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/hd-wallet-seed" style="color: #2c6fad; text-decoration-line: none;" title="A potentially-short value used as a seed to generate the master private key and master chain code for an HD wallet.">根种子</a>被散列以创建512位的看似随机数据，从其中创建<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/master-chain-code-and-private-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, the master chain code and master private key are the two pieces of data derived from the root seed.">主专用密钥</a>和<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/master-chain-code-and-private-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, the master chain code and master private key are the two pieces of data derived from the root seed.">主链码</a>&nbsp;，主扩展<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>）。</span><span class="yiyi-st" id="yiyi-786">使用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-point-function" style="color: #2c6fad; text-decoration-line: none;" title="The ECDSA function used to create a public key from a private key"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">point()</code></a>从<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/master-chain-code-and-private-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, the master chain code and master private key are the two pieces of data derived from the root seed.">主密钥</a>派生主<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>，其中连同<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/master-chain-code-and-private-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, the master chain code and master private key are the two pieces of data derived from the root seed.">主链码，是主扩展</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>。</span><span class="yiyi-st" id="yiyi-787">主<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/extended-key" style="color: #2c6fad; text-decoration-line: none;" title="In the context of HD wallets, a public key or private key extended with the chain code to allow them to derive child keys.">扩展键</a>在功能上等同于其他<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/extended-key" style="color: #2c6fad; text-decoration-line: none;" title="In the context of HD wallets, a public key or private key extended with the chain code to allow them to derive child keys.">扩展键</a>；只有他们的位置在层次结构的顶部，使他们特别。</span></div>
<h5 class=" anchorAf" id="hardened-keys" style="color: #383838; font-size: 16px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-788">固化密钥</span></h5>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_wallets.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-789"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_wallets.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_wallets.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_wallets.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-790"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/hardened-extended-key" style="color: #2c6fad; text-decoration-line: none;" title="A variation on HD wallet extended keys where only the hardened extended private key can derive child keys. This prevents compromise of the chain code plus any private key from putting the whole wallet at risk.">固化扩展密钥</a>修复了普通<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/extended-key" style="color: #2c6fad; text-decoration-line: none;" title="In the context of HD wallets, a public key or private key extended with the chain code to allow them to derive child keys.">扩展密钥</a>的潜在问题。</span><span class="yiyi-st" id="yiyi-791">如果攻击者获得正常的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/chain-code" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, 256 bits of entropy added to the public and private keys to help them generate secure child keys; the master chain code is usually derived from a seed along with the master private key">父链接代码</a>和<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/parent-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key used to derive child keys. The key can be either a private key or a public key, and the key derivation may also require a chain code.">父公开密钥</a>，他可以强制所有从其派生的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/chain-code" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, 256 bits of entropy added to the public and private keys to help them generate secure child keys; the master chain code is usually derived from a seed along with the master private key">链码</a>。</span><span class="yiyi-st" id="yiyi-792">如果攻击者也获得了一个子孙，孙子或进一步的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>，他可以使用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/chain-code" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, 256 bits of entropy added to the public and private keys to help them generate secure child keys; the master chain code is usually derived from a seed along with the master private key">链码</a>生成所有扩展的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥从</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>下降，如下图所示的孙子孙子孙代。</span></div>
<div style="line-height: 1.5em;">
<img alt="Cross-Generational Key Compromise" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-hd-cross-generational-key-compromise.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-793">也许更糟的是，攻击者可以反转正常的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/child-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key derived from a parent key. The key can be either a private key or a public key, and the key derivation may also require a chain code.">子私钥</a>导出公式，并从<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/child-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key derived from a parent key. The key can be either a private key or a public key, and the key derivation may also require a chain code.">子私钥</a>中减去<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/chain-code" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, 256 bits of entropy added to the public and private keys to help them generate secure child keys; the master chain code is usually derived from a seed along with the master private key">父链代码</a>来恢复<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/parent-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key used to derive child keys. The key can be either a private key or a public key, and the key derivation may also require a chain code.">父私钥</a>，如上图所示的子代和父代。</span><span class="yiyi-st" id="yiyi-794">这意味着从其中获取扩展的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>和任何<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>的攻击者可以恢复<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥的</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥和所有键从它下降。</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-795">因此，扩展<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公开密钥</a>的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/chain-code" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, 256 bits of entropy added to the public and private keys to help them generate secure child keys; the master chain code is usually derived from a seed along with the master private key">链码</a>应该比标准的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>更好地保护，并且应该建议用户不要导出甚至非扩展的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>到可能不可信的环境。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-796">这可以通过用强化的密钥导出公式替换正常密钥推导公式来进行一些折衷。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-797">上述部分中描述的正常密钥导出公式将索引号<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/chain-code" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, 256 bits of entropy added to the public and private keys to help them generate secure child keys; the master chain code is usually derived from a seed along with the master private key">父链代码</a>和<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/parent-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key used to derive child keys. The key can be either a private key or a public key, and the key derivation may also require a chain code.">父公开</a>组合在一起，以创建<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/chain-code" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, 256 bits of entropy added to the public and private keys to help them generate secure child keys; the master chain code is usually derived from a seed along with the master private key">子链代码</a>和与<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/parent-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key used to derive child keys. The key can be either a private key or a public key, and the key derivation may also require a chain code.">父私钥</a>组合的整数值来创建<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/child-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key derived from a parent key. The key can be either a private key or a public key, and the key derivation may also require a chain code.">子私钥</a>。</span></div>
<div style="line-height: 1.5em;">
<img alt="Creating Child Public Keys From An Extended Private Key" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-hd-private-parent-to-private-child.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-798">如上所示的硬化公式将索引号<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/chain-code" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, 256 bits of entropy added to the public and private keys to help them generate secure child keys; the master chain code is usually derived from a seed along with the master private key">父链代码</a>和<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/parent-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key used to derive child keys. The key can be either a private key or a public key, and the key derivation may also require a chain code.">父私钥</a>组合在一起，以创建用于生成<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/chain-code" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, 256 bits of entropy added to the public and private keys to help them generate secure child keys; the master chain code is usually derived from a seed along with the master private key">子链的数据代码</a>和<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/child-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key derived from a parent key. The key can be either a private key or a public key, and the key derivation may also require a chain code.">子私钥</a>。</span><span class="yiyi-st" id="yiyi-799">该公式使得无法创建<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/child-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key derived from a parent key. The key can be either a private key or a public key, and the key derivation may also require a chain code.">子公共密钥</a>，而不知道<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/parent-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key used to derive child keys. The key can be either a private key or a public key, and the key derivation may also require a chain code.">父私钥</a>。</span><span class="yiyi-st" id="yiyi-800">换句话说，父扩展<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>不能创建硬化的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/child-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key derived from a parent key. The key can be either a private key or a public key, and the key derivation may also require a chain code.">子公共密钥</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-801">因此，<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/hardened-extended-key" id="term-hardened-extended-private-key" style="color: black; text-decoration-line: none;" title="A variation on HD wallet extended keys where only the hardened extended private key can derive child keys. This prevents compromise of the chain code plus any private key from putting the whole wallet at risk.">固化扩展私钥</a>比正常的扩展<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>或更无用，但是<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/hardened-extended-key" style="color: #2c6fad; text-decoration-line: none;" title="A variation on HD wallet extended keys where only the hardened extended private key can derive child keys. This prevents compromise of the chain code plus any private key from putting the whole wallet at risk.">固化扩展私钥</a>在多层密钥导出之间创建防火墙保证损害不能发生。</span><span class="yiyi-st" id="yiyi-802">因为硬化子扩展<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>不能自己生成孙子<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/chain-code" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, 256 bits of entropy added to the public and private keys to help them generate secure child keys; the master chain code is usually derived from a seed along with the master private key">链码</a>，父扩展<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>的妥协不能与妥协的孙子<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>来创建孙孙扩展<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-803"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/hd-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The Hierarchical Deterministic (HD) key creation and transfer protocol (BIP32), which allows creating child keys from parent keys in a hierarchy. Wallets using the HD protocol are called HD wallets.">HD协议</a>使用不同的索引号来指示是否应生成正常或硬化的密钥。</span><span class="yiyi-st" id="yiyi-804">索引号从0x00到0x7fffffff（0到2&nbsp;<span style="font-size: 12px; line-height: 0; position: relative; top: -0.5em; vertical-align: baseline;">31</span>&nbsp;-1）将产生正常的键；索引号从0x80000000到0xffffffff将生成一个硬化密钥。</span><span class="yiyi-st" id="yiyi-805">为了简化说明，许多开发人员使用<a href="https://en.wikipedia.org/wiki/Prime_%28symbol%29" style="color: #2c6fad; text-decoration-line: none;">素数符号</a>表示硬化密钥，因此第一个正常密钥（0x00）为0，第一个硬化密钥（0x80000000）为0。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-806">（Bitcoin开发人员通常使用ASCII撇号而不是unicode主要符号，这是我们以后的惯例）</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-807">该紧凑描述进一步与由<em>m</em>或<em>M</em>前缀的斜杠组合，以指示层次结构和键类型，其中<em>m</em>是<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>和<em>M</em>是<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>。</span><span class="yiyi-st" id="yiyi-808">例如，m / 0'/ 0/122'是指<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/master-chain-code-and-private-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, the master chain code and master private key are the two pieces of data derived from the root seed.">主私钥的第一个硬化子节点（按索引）的第一个正常子节点（按索引）的第123个硬化私有子节点（按索引号）。</a></span><span class="yiyi-st" id="yiyi-809">以下层次结构说明了主要符号和强化的关键防火墙。</span></div>
<div style="line-height: 1.5em;">
<img alt="Example HD Wallet Tree Using Prime Notation" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-hd-tree.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-810"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis."></a><a class="auto-link" href="https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki" style="color: #2c6fad; text-decoration-line: none;"></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/hd-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The Hierarchical Deterministic (HD) key creation and transfer protocol (BIP32), which allows creating child keys from parent keys in a hierarchy. Wallets using the HD protocol are called HD wallets."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/master-chain-code-and-private-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, the master chain code and master private key are the two pieces of data derived from the root seed."></a><em></em><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/child-key" style="color: #2c6fad; text-decoration-line: none;" title="In HD wallets, a key derived from a parent key. The key can be either a private key or a public key, and the key derivation may also require a chain code."></a>遵循BIP32 HD协议的钱包只能创建主私钥m的固化子密钥，以防止受损的子键损害主键。</span><span class="yiyi-st" id="yiyi-811">由于主密钥没有正常的孩子，所以在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/hd-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The Hierarchical Deterministic (HD) key creation and transfer protocol (BIP32), which allows creating child keys from parent keys in a hierarchy. Wallets using the HD protocol are called HD wallets.">HD钱包</a>中不使用主<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>。</span><span class="yiyi-st" id="yiyi-812">所有其他键可以有普通的孩子，所以可以使用相应的扩展的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-813"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/hd-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The Hierarchical Deterministic (HD) key creation and transfer protocol (BIP32), which allows creating child keys from parent keys in a hierarchy. Wallets using the HD protocol are called HD wallets.">HD协议</a>还描述了扩展<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>和扩展<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>的序列化格式。</span><span class="yiyi-st" id="yiyi-814">有关详细信息，请参阅开发者参考的<a href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#wallets" style="color: #2c6fad; text-decoration-line: none;">钱包部分</a>或<a class="auto-link" href="https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki" style="color: #2c6fad; text-decoration-line: none;">BIP32</a>中完整的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/hd-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The Hierarchical Deterministic (HD) key creation and transfer protocol (BIP32), which allows creating child keys from parent keys in a hierarchy. Wallets using the HD protocol are called HD wallets.">HD协议</a>规范。</span></div>
<h5 class=" anchorAf" id="storing-root-seeds" style="color: #383838; font-size: 16px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-815">储存根种子</span></h5>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_wallets.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-816"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_wallets.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_wallets.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_wallets.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-817"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/hd-wallet-seed" style="color: #2c6fad; text-decoration-line: none;" title="A potentially-short value used as a seed to generate the master private key and master chain code for an HD wallet."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/hd-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The Hierarchical Deterministic (HD) key creation and transfer protocol (BIP32), which allows creating child keys from parent keys in a hierarchy. Wallets using the HD protocol are called HD wallets."></a>HD协议中的根种子是必须精确备份的128，256或512位随机数据。</span><span class="yiyi-st" id="yiyi-818">为了更方便地使用诸如存储或手工复制的非数字备份方法，<a class="auto-link" href="https://github.com/bitcoin/bips/blob/master/bip-0039.mediawiki" style="color: #2c6fad; text-decoration-line: none;">BIP39</a>定义了一种从伪伪建立512位<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/hd-wallet-seed" style="color: #2c6fad; text-decoration-line: none;" title="A potentially-short value used as a seed to generate the master private key and master chain code for an HD wallet.">根种子</a>的方法普通自然语言词汇（助记符）本身是由128到256位的熵创建的，并且可选地受密码保护。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-819">所产生的词数与所用熵的数量有关：</span></div>
<table style="border-collapse: collapse; border-spacing: 0px; line-height: 1.5em;"><thead style="text-align: center;">
<tr><th style="border-color: rgb(221, 221, 221); border-image: initial; border-style: solid solid double; border-width: 1px 1px 3px; font-weight: normal; padding: 10px;"><span class="yiyi-st" id="yiyi-820">熵位</span></th><th style="border-color: rgb(221, 221, 221); border-image: initial; border-style: solid solid double; border-width: 1px 1px 3px; font-weight: normal; padding: 10px;"><span class="yiyi-st" id="yiyi-821">词数</span></th></tr>
</thead><tbody>
<tr><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-822">128</span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-823">12</span></td></tr>
<tr><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-824">160</span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-825">15</span></td></tr>
<tr><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-826">192</span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-827">18</span></td></tr>
<tr><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-828">224</span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-829">21</span></td></tr>
<tr><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-830">256</span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-831">24</span></td></tr>
</tbody></table>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-832">密码短语可以是任何长度的。</span><span class="yiyi-st" id="yiyi-833">它只是附加到助记符伪句子，然后使用HMAC-SHA512将助记符和密码两次散列2,048次，从而产生一个看似随机的512位种子。</span><span class="yiyi-st" id="yiyi-834">因为散列函数的任何输入都会创建一个看似随机的512位种子，所以没有一个基本的方式来证明用户输入正确的密码，可能允许用户保护种子即使在胁迫下。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-835">有关实现细节，请参阅<a class="auto-link" href="https://github.com/bitcoin/bips/blob/master/bip-0039.mediawiki" style="color: #2c6fad; text-decoration-line: none;">BIP39</a>。</span></div>
<h4 class=" anchorAf" id="loose-key-wallets" style="color: #383838; font-size: 17.6px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-836">松散密钥钱包</span></h4>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_wallets.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-837"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_wallets.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_wallets.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_wallets.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-838"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis."></a>也称为“Just a Bunch Of Keys（JBOK）”的Loose-Key钱包是来自Bitcoin Core客户端钱包的一种形式 。</span><span class="yiyi-st" id="yiyi-839">比特币核心客户端<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>将通过伪随机数生成器（PRNG）自动创建100&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>&nbsp;/&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>，以供以后使用。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-840">这些未使用的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>存储在虚拟“密钥池”中，每当使用以前生成的密钥时，将生成新密钥，确保池保持100个未使用的密钥。</span><span class="yiyi-st" id="yiyi-841">（如果<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>被加密，则仅在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>被解锁时才产生新密钥。）</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-842">考虑到备份必须手动运行以保存新生成的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>，这在备份密钥方面造成了相当大的困难。</span><span class="yiyi-st" id="yiyi-843">如果在备份之前生成，使用，然后丢失新的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-key-pair" style="color: #2c6fad; text-decoration-line: none;" title="A private key and its derived public key">密钥对</a>集，则存储的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>可能永远丢失。</span><span class="yiyi-st" id="yiyi-844">许多旧式移动<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>遵循类似的格式，但只有根据用户需求生成新的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-845">由于备份麻烦，此<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>类型正在被积极淘汰，不鼓励使用。</span></div>
<h2 class=" anchorAf" id="payment-processing" style="color: #383838; font-family: Ubuntu, sans-serif; font-size: 24px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-846">支付流程</span></h2>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_payment_processing.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-847"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_payment_processing.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_payment_processing.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_payment_processing.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-848">支付流程包括消费者和接收者为了交换产品或服务而做出和接受付款的步骤。</span><span class="yiyi-st" id="yiyi-849">从商业启蒙开始，基本步骤并没有改变，但技术在改变。</span><span class="yiyi-st" id="yiyi-850">本节将介绍接收者和消费者如何分别使用比特币来请求和付款，以及如何处理诸如<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#issuing-refunds" style="color: #2c6fad; text-decoration-line: none;" title="A transaction which refunds some or all satoshis received in a previous transaction">退款</a>和<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#rebilling-recurring-payments" style="color: #2c6fad; text-decoration-line: none;" title="Billing a spender on a regular schedule">循环付费</a>等复杂情况。</span></div>
<div style="line-height: 1.5em;">
<img alt="Bitcoin Payment Processing" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-payment-processing.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-851">上图显示了从接收者的角度来看，使用比特币进行支付处理，从新订单开始。</span><span class="yiyi-st" id="yiyi-852">以下小节将分别介绍三个常见步骤和三个偶然或可选步骤。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-853">值得一提的是，每个步骤都可以通过使用第三方API和服务进行外包。</span></div>
<h3 class=" anchorAf" id="pricing-orders" style="color: #383838; font-size: 20.8px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-854">价格订单</span></h3>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_payment_processing.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-855"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_payment_processing.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_payment_processing.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_payment_processing.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-856">由于<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>与本国货币（<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-fiat" id="term-fiat" style="color: black; text-decoration-line: none;" title="National currencies such as the dollar or euro">fiat</a>）之间的汇率变动性，许多Bitcoin订单的价格为<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-fiat" style="color: #2c6fad; text-decoration-line: none;" title="National currencies such as the dollar or euro">fiat</a>，但在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis ，需要进行价格转换。</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-857">汇率数据可以通过货币兑换提供的广泛使用的基于HTTP的API得到。</span><span class="yiyi-st" id="yiyi-858">几个组织还聚合来自多个兑换机构的数据，以创建索引价格，也可以使用基于HTTP的API。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-859">任何使用汇率数据自动计算订单总额的应用程序必须采取措施确保报价的价格反映了目前<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>的一般市值，或者应用程序对于正在销售的产品或服务可以接受太少的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>。</span><span class="yiyi-st" id="yiyi-860">或者，他们可以要求更多的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>，吓跑潜在的消费者。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-861">为了确保问题最小化，您的应用程序可能希望从至少两个独立的源收集数据，并将其进行比较，以查看它们有多大差异。</span><span class="yiyi-st" id="yiyi-862">如果差异很大，您的应用程序可以进入安全模式，直到人们能够评估情况。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-863">如果汇率正在迅速增加或下降，您可能还希望对您的应用程序进行编程，以进入安全模式，这表明在比特币市场可能会出现问题，这可能使得今天难以支付任何<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-864">汇率不在Bitcoin和相关技术的控制范围之内，因此没有新的或计划中的技术使您的程序更容易将订单总数从<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-fiat" style="color: #2c6fad; text-decoration-line: none;" title="National currencies such as the dollar or euro">fiat</a>转换为<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-865">由于汇率随时间而波动，与<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-fiat" style="color: #2c6fad; text-decoration-line: none;" title="National currencies such as the dollar or euro">fiat</a>挂钩的订单总额必须有过期时间，以防止消费者拖延付款来希望<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>将降价。</span><span class="yiyi-st" id="yiyi-866">最广泛使用的支付处理系统目前在10到20分钟之后到期。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-867">较短的到期期限会增加发票在收到付款之前到期的机会，可能需要手动干预以要求额外付款或发起<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#issuing-refunds" style="color: #2c6fad; text-decoration-line: none;" title="A transaction which refunds some or all satoshis received in a previous transaction">退款。</a></span><span class="yiyi-st" id="yiyi-868">更长的到期期限增加汇款在收到付款之前显著波动的机会。</span></div>
<h3 class=" anchorAf" id="requesting-payments" style="color: #383838; font-size: 20.8px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-869">要求付款</span></h3>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_payment_processing.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-870"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_payment_processing.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_payment_processing.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_payment_processing.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-871">在请求付款之前，您的应用程序必须创建比特币<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>，或从另一个程序（如Bitcoin Core）获取<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>。</span><span class="yiyi-st" id="yiyi-872">比特币<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>在<a href="http://usyiyi.cn/documents/bitcoin/developer-guide.html#transactions" style="color: #2c6fad; text-decoration-line: none;">交易</a>部分中有详细描述。</span><span class="yiyi-st" id="yiyi-873">在该部分中也描述了<a href="http://usyiyi.cn/documents/bitcoin/developer-guide.html#avoiding-key-reuse" style="color: #2c6fad; text-decoration-line: none;">避免多次使用同一个地址</a>的两个重要原因，但第三个原因特别适用于<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/payment-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The protocol defined in BIP70 (and other BIPs) which lets spenders get signed payment details from receivers.">支付请求</a>：</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-874">对于每个收到的付款，使用一个单独的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>使得确定哪些客户已经支付了他们的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/payment-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The protocol defined in BIP70 (and other BIPs) which lets spenders get signed payment details from receivers.">支付请求</a>是不重要的。</span><span class="yiyi-st" id="yiyi-875">您的应用程序只需跟踪特定的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/payment-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The protocol defined in BIP70 (and other BIPs) which lets spenders get signed payment details from receivers.">支付请求</a>和其中使用的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>之间的关联，然后扫描<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>以获得匹配的交易的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-876">接下来的小节将详细描述以下四种兼容方式，以便提供给花费者<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>并支付金额。</span><span class="yiyi-st" id="yiyi-877">为了提高方便性和兼容性，建议您在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/payment-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The protocol defined in BIP70 (and other BIPs) which lets spenders get signed payment details from receivers.">付款请求中提供所有这些选项。</a></span></div>
<ol style="margin-left: 0px; padding-left: 20px;">
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-878">所有<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>软件允许用户粘贴或手动输入<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>，并将其纳入付款屏幕。</span><span class="yiyi-st" id="yiyi-879">这当然是不方便的 - 但是它有有效的回退选项。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-880">几乎所有桌面<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>可以与<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-bitcoin-uri" style="color: #2c6fad; text-decoration-line: none;" title="A URI which allows receivers to encode payment details so spenders don't have to manually enter addresses and other details"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">比特币：</code>URIs</a>关联，所以消费者可以点击链接预先填写付款屏幕。</span><span class="yiyi-st" id="yiyi-881">这也适用于许多移动<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>，但是通常不支持基于Web的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>，除非消费者安装浏览器扩展或手动配置URI处理程序。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-882">大多数移动<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>支持以QR码编码的扫描<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-bitcoin-uri" style="color: #2c6fad; text-decoration-line: none;" title="A URI which allows receivers to encode payment details so spenders don't have to manually enter addresses and other details"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">比特币：</code>URI</a>，几乎所有<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>可以显示它们接受付款。</span><span class="yiyi-st" id="yiyi-883">虽然在线订单方便，QR码对于个人购买特别有用。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-884">最近的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>更新支持新的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/payment-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The protocol defined in BIP70 (and other BIPs) which lets spenders get signed payment details from receivers.">支付协议</a>，提供更高的安全性，使用<a class="auto-link" href="https://en.wikipedia.org/wiki/X.509" style="color: #2c6fad; text-decoration-line: none;">X.509</a>证书对接收者的身份进行身份验证，以及其他重要功能例如<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#issuing-refunds" style="color: #2c6fad; text-decoration-line: none;" title="A transaction which refunds some or all satoshis received in a previous transaction">退款</a>。</span></div>
</li>
</ol>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-885"><img alt="Warning icon" src="http://usyiyi.cn/documents/bitcoin/img/icons/icon_warning.svg" style="border: 0px; max-width: 100%;" />&nbsp;<strong>警告：</strong>必须特别注意避免收到的付款被盗。</span><span class="yiyi-st" id="yiyi-886">特别地，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/private-key" style="color: #2c6fad; text-decoration-line: none;" title="The private portion of a keypair which can create signatures that other people can verify using the public key.">私钥</a>不应存储在Web服务器上，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/payment-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The protocol defined in BIP70 (and other BIPs) which lets spenders get signed payment details from receivers.">支付请求</a>应通过HTTPS或其他安全方法发送，以防止<a class="auto-link" href="https://en.wikipedia.org/wiki/Man-in-the-middle_attack" style="color: #2c6fad; text-decoration-line: none;">中间人攻击使用攻击者的</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>替换比特币<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>。</span></div>
<h4 class=" anchorAf" id="plain-text" style="color: #383838; font-size: 17.6px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-887">纯文本</span></h4>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_payment_processing.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-888"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_payment_processing.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_payment_processing.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_payment_processing.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-889">要直接指定用于复制和粘贴的金额，您必须提供<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>，金额和<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">面额</a>。</span><span class="yiyi-st" id="yiyi-890">也可以指定要约的到期时间。</span><span class="yiyi-st" id="yiyi-891">例如：</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-892">（注：本节中的所有示例都使用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/testnet" style="color: #2c6fad; text-decoration-line: none;" title="A global testing environment in which developers can obtain and spend satoshis that have no real-world value on a network that is very similar to the Bitcoin mainnet.">testnet</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>）</span></div>
<div class="highlighter-rouge">
<pre style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 12px; line-height: 1.5em; overflow-y: auto; padding: 17px;"><code style="border-radius: 3px; border: 0px; font-family: monospace, serif; padding: 0px;">Pay: mjSk1Ny9spzU2fouzYgLqGUD8U41iR35QN
Amount: 100 BTC
You must pay by: 2014-04-01 at 23:00 UTC
</code></pre>
</div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-893">指示<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">面额</a>至关重要。</span><span class="yiyi-st" id="yiyi-894">在撰写本文时，流行的比特币<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>软件默认为<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">比特币</a>（BTC），<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">毫比特币</a>（mBTC）或<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">微比特币</a>（uBTC，“bits”）。</span><span class="yiyi-st" id="yiyi-895">广泛支持每个单位之间的选择，但是其他软件也可以让用户从以下部分或全部选项中选择<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">面额：</a></span></div>
<table style="border-collapse: collapse; border-spacing: 0px; line-height: 1.5em;"><thead style="text-align: center;">
<tr><th style="border-color: rgb(221, 221, 221); border-image: initial; border-style: solid solid double; border-width: 1px 1px 3px; font-weight: normal; padding: 10px;"><span class="yiyi-st" id="yiyi-896"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">比特币</a></span></th><th style="border-color: rgb(221, 221, 221); border-image: initial; border-style: solid solid double; border-width: 1px 1px 3px; font-weight: normal; padding: 10px;"><span class="yiyi-st" id="yiyi-897">单位（缩写）</span></th></tr>
</thead><tbody>
<tr><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-898">1.0</span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-899">比特币（BTC）</span></td></tr>
<tr><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-900">0.01</span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-901">比特分（cBTC）</span></td></tr>
<tr><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-902">0.001</span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-903"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">毫比特</a>&nbsp;(mBTC)</span></td></tr>
<tr><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-904">0.000001</span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-905"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">微比特</a>（uBTC，“bits”）</span></td></tr>
<tr><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-906">0.00000001</span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-907"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">聪</a></span></td></tr>
</tbody></table>
<h4 class=" anchorAf" id="bitcoin-uri" style="color: #383838; font-size: 17.6px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-908">比特币：URI</span></h4>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_payment_processing.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-909"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_payment_processing.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_payment_processing.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_payment_processing.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-910">在<a class="auto-link" href="https://github.com/bitcoin/bips/blob/master/bip-0021.mediawiki" style="color: #2c6fad; text-decoration-line: none;">BIP21</a>中定义的<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-bitcoin-uri" id="term-bitcoin-uri" style="color: black; text-decoration-line: none;" title="A URI which allows receivers to encode payment details so spenders don't have to manually enter addresses and other details"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); color: #646464; font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">比特币：</code>&nbsp;URI</a>方案消除了<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">面额</a>混淆，使消费者免于复制和粘贴两个单独的值。</span><span class="yiyi-st" id="yiyi-911">它还允许<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/payment-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The protocol defined in BIP70 (and other BIPs) which lets spenders get signed payment details from receivers.">支付请求</a>向消费者提供一些附加信息。</span><span class="yiyi-st" id="yiyi-912">一个例子：</span></div>
<div class="highlighter-rouge">
<pre style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 12px; line-height: 1.5em; overflow-y: auto; padding: 17px;"><code style="border-radius: 3px; border: 0px; font-family: monospace, serif; padding: 0px;">bitcoin:mjSk1Ny9spzU2fouzYgLqGUD8U41iR35QN?amount=100
</code></pre>
</div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-913">只有<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>是必需的，如果它是唯一指定的，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>将预先填写<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/payment-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The protocol defined in BIP70 (and other BIPs) which lets spenders get signed payment details from receivers.">付款请求</a>，然后让付款人输入金额</span><span class="yiyi-st" id="yiyi-914">指定的数量始终为十进制<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">比特币</a>（BTC）。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-915">其他两个参数得到了广泛的支持。</span><span class="yiyi-st" id="yiyi-916"><a class="term" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-label" id="term-label" style="color: black; text-decoration-line: none;" title="The label parameter of a bitcoin: URI which provides the spender with the receiver's name (unauthenticated)"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); color: #646464; font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">label</code></a>参数通常用于将收款人的姓名提供给<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>软件。</span><span class="yiyi-st" id="yiyi-917"><a class="term" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-message" id="term-message" style="color: black; text-decoration-line: none;" title="A parameter of bitcoin: URIs which allows the receiver to optionally specify a message to the spender"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); color: #646464; font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">message</code></a>参数通常用于描述花费者的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/payment-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The protocol defined in BIP70 (and other BIPs) which lets spenders get signed payment details from receivers.">支付请求</a>。</span><span class="yiyi-st" id="yiyi-918">标签和消息通常由销售商的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>软件存储，但是它们不会添加到实际的交易中，因此其他Bitcoin用户看不到它们。</span><span class="yiyi-st" id="yiyi-919">标签和消息都必须是<a href="https://tools.ietf.org/html/rfc3986" style="color: #2c6fad; text-decoration-line: none;">URI编码的</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-920">所有四个参数一起使用，具有适当的URI编码，可以在下面的换行示例中看到。</span></div>
<div class="highlighter-rouge">
<pre style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 12px; line-height: 1.5em; overflow-y: auto; padding: 17px;"><code style="border-radius: 3px; border: 0px; font-family: monospace, serif; padding: 0px;">bitcoin:mjSk1Ny9spzU2fouzYgLqGUD8U41iR35QN\
?amount=0.10\
&amp;label=Example+Merchant\
&amp;message=Order+of+flowers+%26+chocolates
</code></pre>
</div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-921">可以扩展URI方案，如下面的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/payment-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The protocol defined in BIP70 (and other BIPs) which lets spenders get signed payment details from receivers.">支付协议</a>部分所示，同时包含新的可选参数和必需的参数。</span><span class="yiyi-st" id="yiyi-922">在撰写本文时，除了上述四个之外，唯一广泛使用的参数是<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/payment-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The protocol defined in BIP70 (and other BIPs) which lets spenders get signed payment details from receivers.">支付协议</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-r-parameter" style="color: #2c6fad; text-decoration-line: none;" title="The payment request parameter in a bitcoin: URI"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">r</code></a>参数。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-923">接受任何形式的URI的程序必须在付款之前要求用户获得许可，除非用户明确禁用了提示（对于支付小额支付可能是这样）。</span></div>
<h4 class=" anchorAf" id="qr-codes" style="color: #383838; font-size: 17.6px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-924">QR码</span></h4>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_payment_processing.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-925"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_payment_processing.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_payment_processing.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_payment_processing.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-926">QR码是个人，图像或视频中交换<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-bitcoin-uri" style="color: #2c6fad; text-decoration-line: none;" title="A URI which allows receivers to encode payment details so spenders don't have to manually enter addresses and other details"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">比特币：</code>URIs</a>的流行方式。</span><span class="yiyi-st" id="yiyi-927">大多数移动Bitcoin&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>应用程序和一些桌面<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>，支持扫描QR码预先填写他们的付款屏幕。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-928">下图显示了在四个不同的纠错水平下，编码为四种不同的<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-uri-qr-code" id="term-uri-qr-code" style="color: black; text-decoration-line: none;" title="A QR code containing a bitcoin: URI">比特币QR码</a>的相同的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-bitcoin-uri" style="color: #2c6fad; text-decoration-line: none;" title="A URI which allows receivers to encode payment details so spenders don't have to manually enter addresses and other details"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">比特币：</code>URI</a>。</span><span class="yiyi-st" id="yiyi-929">QR码可以包括<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-label" style="color: #2c6fad; text-decoration-line: none;" title="The label parameter of a bitcoin: URI which provides the spender with the receiver's name (unauthenticated)"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">label</code></a>和<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-message" style="color: #2c6fad; text-decoration-line: none;" title="A parameter of bitcoin: URIs which allows the receiver to optionally specify a message to the spender"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">message</code></a>参数和任何其他可选参数 - 但是在这里省略了可选参数以便使QR码小，易于不稳定或低分辨率的移动摄像头扫描。</span></div>
<div style="line-height: 1.5em;">
<img alt="Bitcoin QR Codes" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-qr-code.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-930">错误校正与校验和相结合，以确保<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-uri-qr-code" style="color: #2c6fad; text-decoration-line: none;" title="A QR code containing a bitcoin: URI">比特币QR码</a>在数据丢失或意外更改时无法成功解码，因此您的应用程序应根据您可用的空间选择适当的纠错级别显示QR码。</span><span class="yiyi-st" id="yiyi-931">当空间有限时，低级别的损坏修正功能很好，四分位数的损坏修正有助于确保在高分辨率屏幕上显示时快速扫描。</span></div>
<h4 class=" anchorAf" id="payment-protocol" style="color: #383838; font-size: 17.6px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-932">付款协议</span></h4>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_payment_processing.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-933"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_payment_processing.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_payment_processing.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_payment_processing.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-934">Bitcoin Core 0.9支持新的<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/payment-protocol" id="term-payment-protocol" style="color: black; text-decoration-line: none;" title="The protocol defined in BIP70 (and other BIPs) which lets spenders get signed payment details from receivers.">支付协议</a>。</span><span class="yiyi-st" id="yiyi-935"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/payment-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The protocol defined in BIP70 (and other BIPs) which lets spenders get signed payment details from receivers.">付款协议</a>为<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/payment-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The protocol defined in BIP70 (and other BIPs) which lets spenders get signed payment details from receivers.">付款请求</a>添加了许多重要功能：</span></div>
<ul style="margin-left: 0px; padding-left: 20px;">
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-936">支持<a class="auto-link" href="https://en.wikipedia.org/wiki/X.509" style="color: #2c6fad; text-decoration-line: none;">X.509</a>证书和SSL加密，以验证接收者的身份，并帮助防止<a class="auto-link" href="https://en.wikipedia.org/wiki/Man-in-the-middle_attack" style="color: #2c6fad; text-decoration-line: none;">中间人</a>攻击。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-937">提供有关所需支付的更多细节给消费者。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-938">允许消费者直接向接收者提交交易，而无需通过<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">P2P网络</a>。</span><span class="yiyi-st" id="yiyi-939">这样可以加快付款处理速度，并使用计划功能（<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/transaction-fee" style="color: #2c6fad; text-decoration-line: none;" title="The amount remaining when the value of all outputs in a transaction are subtracted from all inputs in a transaction; the fee is paid to the miner who includes that transaction in a block.">如child-pays-for-parent交易费用</a>）和离线NFC或基于蓝牙的付款。</span></div>
</li>
</ul>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-940">诸如“mjSk1Ny9spzU2fouzYgLqGUD8U41iR35QN”的无意义的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>而不被要求,但要求消费者提供从接收方的<a class="auto-link" href="https://en.wikipedia.org/wiki/X.509" style="color: #2c6fad; text-decoration-line: none;">X.509</a>证书中支付公用名称（CN）描述，如“www.bitcoin.org”。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-941">要使用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/payment-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The protocol defined in BIP70 (and other BIPs) which lets spenders get signed payment details from receivers.">支付协议</a>请求付款，您可以使用扩展（但向后兼容）<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-bitcoin-uri" style="color: #2c6fad; text-decoration-line: none;" title="A URI which allows receivers to encode payment details so spenders don't have to manually enter addresses and other details"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">比特币：</code>&nbsp;URI</a>。</span><span class="yiyi-st" id="yiyi-942">例如：</span></div>
<div class="highlighter-rouge">
<pre style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 12px; line-height: 1.5em; overflow-y: auto; padding: 17px;"><code style="border-radius: 3px; border: 0px; font-family: monospace, serif; padding: 0px;">bitcoin:mjSk1Ny9spzU2fouzYgLqGUD8U41iR35QN\
?amount=0.10\
&amp;label=Example+Merchant\
&amp;message=Order+of+flowers+%26+chocolates\
&amp;r=https://example.com/pay/mjSk1Ny9spzU2fouzYgLqGUD8U41iR35QN
</code></pre>
</div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-943">除了<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-r-parameter" style="color: #2c6fad; text-decoration-line: none;" title="The payment request parameter in a bitcoin: URI"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">r</code></a>之外，上述提供的参数都不是<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/payment-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The protocol defined in BIP70 (and other BIPs) which lets spenders get signed payment details from receivers.">支付协议</a>所必需的，但您的应用程序可能会包含它们与<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>程序的向后兼容性其尚未处理<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/payment-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The protocol defined in BIP70 (and other BIPs) which lets spenders get signed payment details from receivers.">支付协议</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-944"><a class="term" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-r-parameter" id="term-r-parameter" style="color: black; text-decoration-line: none;" title="The payment request parameter in a bitcoin: URI"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); color: #646464; font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">r</code></a>参数指示支付协议感知<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>程序忽略其他参数，并从提供的URL中获取一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-examples#term-paymentrequest" style="color: #2c6fad; text-decoration-line: none;" title="The PaymentRequest of the payment protocol which contains and allows signing of the PaymentDetails">PaymentRequest</a>。</span><span class="yiyi-st" id="yiyi-945">浏览器，QR码阅读器或处理URI的其他程序打开URI上的花费者Bitcoin&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>程序。</span></div>
<div style="line-height: 1.5em;">
<img alt="BIP70 Payment Protocol" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-payment-protocol.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-946">在<a class="auto-link" href="https://github.com/bitcoin/bips/blob/master/bip-0070.mediawiki" style="color: #2c6fad; text-decoration-line: none;">BIP70</a>，<a class="auto-link" href="https://github.com/bitcoin/bips/blob/master/bip-0071.mediawiki" style="color: #2c6fad; text-decoration-line: none;">BIP71</a>和<a class="auto-link" href="https://github.com/bitcoin/bips/blob/master/bip-0072.mediawiki" style="color: #2c6fad; text-decoration-line: none;">BIP72</a>中深入描述了<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/payment-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The protocol defined in BIP70 (and other BIPs) which lets spenders get signed payment details from receivers.">付款协议</a>。</span><span class="yiyi-st" id="yiyi-947">开发者示例<a href="http://usyiyi.cn/documents/bitcoin/en/developer-examples#payment-protocol" style="color: #2c6fad; text-decoration-line: none;">付款协议</a>子节中提供了一个示例CGI程序和可在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/payment-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The protocol defined in BIP70 (and other BIPs) which lets spenders get signed payment details from receivers.">付款协议</a>中使用的所有参数的描述。</span><span class="yiyi-st" id="yiyi-948">在本小节中，我们将以故事形式简要介绍如何通常使用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/payment-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The protocol defined in BIP70 (and other BIPs) which lets spenders get signed payment details from receivers.">付款协议</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-949">Charlie客户，正在购买由Bob商人运营的网站。</span><span class="yiyi-st" id="yiyi-950">查理在购物车中添加了几个物品，并点击了“用比特币结帐”按钮。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-951">Bob的服务器会自动将以下信息添加到其发票数​​据库中：</span></div>
<ul style="margin-left: 0px; padding-left: 20px;">
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-952">查理订单的细节，包括订购和运送的商品<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-953"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>中的订单总数，可能是通过将<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-fiat" style="color: #2c6fad; text-decoration-line: none;" title="National currencies such as the dollar or euro">fiat</a>中的价格转换为<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>中的价格而创建的。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-954">该总计将不再可接受的到期时间。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-955">Charlie应向其发送付款的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code.">pubkey脚本</a>。</span><span class="yiyi-st" id="yiyi-956">通常这将是一个包含一个唯一的（从未使用过的）<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">secp256k1公钥</a>的P2PKH或者<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/p2sh-address" style="color: #2c6fad; text-decoration-line: none;" title="A Bitcoin payment address comprising a hashed script, allowing the spender to create a standard pubkey script that Pays To Script Hash (P2SH). The script can be almost any valid pubkey script.">P2SH pubkey脚本</a>。</span></div>
</li>
</ul>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-957">在将所有信息添加到数据库之后，Bob的服务器显示Charlie的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-bitcoin-uri" style="color: #2c6fad; text-decoration-line: none;" title="A URI which allows receivers to encode payment details so spenders don't have to manually enter addresses and other details"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">比特币：</code>&nbsp;URI</a>以点击付款。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-958">查理点击浏览器中的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-bitcoin-uri" style="color: #2c6fad; text-decoration-line: none;" title="A URI which allows receivers to encode payment details so spenders don't have to manually enter addresses and other details"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">比特币：</code>URI</a>。</span><span class="yiyi-st" id="yiyi-959">他的浏览器的URI处理程序将URI发送到他的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>程序。</span><span class="yiyi-st" id="yiyi-960"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>知道<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/payment-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The protocol defined in BIP70 (and other BIPs) which lets spenders get signed payment details from receivers.">付款协议</a>，因此它解析了<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-r-parameter" style="color: #2c6fad; text-decoration-line: none;" title="The payment request parameter in a bitcoin: URI"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">r</code></a>参数，并向该URL发送一个HTTP GET，查找一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-examples#term-paymentrequest" style="color: #2c6fad; text-decoration-line: none;" title="The PaymentRequest of the payment protocol which contains and allows signing of the PaymentDetails">PaymentRequest</a>消息。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-961">返回的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-examples#term-paymentrequest" style="color: #2c6fad; text-decoration-line: none;" title="The PaymentRequest of the payment protocol which contains and allows signing of the PaymentDetails">PaymentRequest</a>消息可能包括私人信息，例如Charlie的邮件<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>，但是<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>必须能够访问它而不使用先前的身份验证，例如HTTP Cookie，因此通常使用具有防猜测部件的可公开访问的HTTPS URL。</span><span class="yiyi-st" id="yiyi-962">为<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/payment-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The protocol defined in BIP70 (and other BIPs) which lets spenders get signed payment details from receivers.">支付请求</a>创建的唯一<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>可用于创建唯一标识符。</span><span class="yiyi-st" id="yiyi-963">这就是为什么在上面的示例URI中，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-examples#term-paymentrequest" style="color: #2c6fad; text-decoration-line: none;" title="The PaymentRequest of the payment protocol which contains and allows signing of the PaymentDetails">PaymentRequest</a>&nbsp;URL包含<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/p2pkh-address" style="color: #2c6fad; text-decoration-line: none;" title="A Bitcoin payment address comprising a hashed public key, allowing the spender to create a standard pubkey script that Pays To PubKey Hash (P2PKH).">P2PKH地址</a>：<code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">https://example.com/pay/mjSk1Ny9spzU2fouzYgLqGUD8U41iR35QN</code></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-964">在收到HTTP GET到上面的URL之后，Bob的Web服务器上的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-examples#term-paymentrequest" style="color: #2c6fad; text-decoration-line: none;" title="The PaymentRequest of the payment protocol which contains and allows signing of the PaymentDetails">PaymentRequest</a>生成CGI程序从URL获取唯一的标识符，并在数据库中查找相应的详细信息。</span><span class="yiyi-st" id="yiyi-965">然后，使用以下信息创建一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-examples#term-paymentdetails" style="color: #2c6fad; text-decoration-line: none;" title="The PaymentDetails of the payment protocol which allows the receiver to specify the payment details to the spender">PaymentDetails</a>消息：</span></div>
<ul style="margin-left: 0px; padding-left: 20px;">
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-966"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>和<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code.">pubkey脚本</a>中的订单金额将被支付。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-967">一个包含订购商品列表的备忘录，所以查理知道他付的是什么。</span><span class="yiyi-st" id="yiyi-968">它也可能包括查理邮寄<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>，所以他可以仔细检查。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-969"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-examples#term-paymentdetails" style="color: #2c6fad; text-decoration-line: none;" title="The PaymentDetails of the payment protocol which allows the receiver to specify the payment details to the spender">PaymentDetails</a>消息的创建时间加上它到期的时间。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-970">Charlie的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>应发送完成的交易的网址。</span></div>
</li>
</ul>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-971"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-examples#term-paymentdetails" style="color: #2c6fad; text-decoration-line: none;" title="The PaymentDetails of the payment protocol which allows the receiver to specify the payment details to the spender">PaymentDetails</a>消息放在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-examples#term-paymentrequest" style="color: #2c6fad; text-decoration-line: none;" title="The PaymentRequest of the payment protocol which contains and allows signing of the PaymentDetails">PaymentRequest</a>消息中。</span><span class="yiyi-st" id="yiyi-972"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/payment-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The protocol defined in BIP70 (and other BIPs) which lets spenders get signed payment details from receivers.">支付请求</a>允许Bob的服务器使用服务器的<a class="auto-link" href="https://en.wikipedia.org/wiki/X.509" style="color: #2c6fad; text-decoration-line: none;">X.509</a>&nbsp;SSL证书签署整个请求。</span><span class="yiyi-st" id="yiyi-973">（<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/payment-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The protocol defined in BIP70 (and other BIPs) which lets spenders get signed payment details from receivers.">付款协议</a>旨在允许将来允许其他签名方式。）</span><span class="yiyi-st" id="yiyi-974">Bob的服务器在向HTTP GET的回复中发送<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/payment-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The protocol defined in BIP70 (and other BIPs) which lets spenders get signed payment details from receivers.">付款请求</a>到Charlie的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>。</span></div>
<div style="line-height: 1.5em;">
<img alt="Bitcoin Core Showing Validated Payment Request" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-btcc-payment-request.png" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-975">Charlie的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>收到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-examples#term-paymentrequest" style="color: #2c6fad; text-decoration-line: none;" title="The PaymentRequest of the payment protocol which contains and allows signing of the PaymentDetails">PaymentRequest</a>消息，检查其<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature" style="color: #2c6fad; text-decoration-line: none;" title="A value related to a public key which could only have reasonably been created by someone who has the private key that created that public key. Used in Bitcoin to authorize spending satoshis previously sent to a public key.">签名</a>，然后从<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-examples#term-paymentdetails" style="color: #2c6fad; text-decoration-line: none;" title="The PaymentDetails of the payment protocol which allows the receiver to specify the payment details to the spender">PaymentDetails</a>消息中显示详细信息给Charlie 。</span><span class="yiyi-st" id="yiyi-976">Charlie同意支付，所以<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>构造了一个付款给<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code.">pubkey脚本</a>提供的Bob的服务器。</span><span class="yiyi-st" id="yiyi-977">与传统的比特币支付不同，Charlie的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>不一定会自动将此付款广播到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>。</span><span class="yiyi-st" id="yiyi-978">相反，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>构造一个付款消息，并将其作为HTTP POST发送到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-examples#term-paymentdetails" style="color: #2c6fad; text-decoration-line: none;" title="The PaymentDetails of the payment protocol which allows the receiver to specify the payment details to the spender">PaymentDetails</a>消息中提供的URL。</span><span class="yiyi-st" id="yiyi-979">其中包括：付款信息包含：</span></div>
<ul style="margin-left: 0px; padding-left: 20px;">
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-980">Charlie支付Bob的签名交易。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-981">可选备忘录Charlie可以发送给Bob。</span><span class="yiyi-st" id="yiyi-982">（不能保证Bob会读它。）</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-983">如果他需要返回Charlie的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>中的一些或全部，那么Bob可以支付的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#issuing-refunds" style="color: #2c6fad; text-decoration-line: none;" title="A transaction which refunds some or all satoshis received in a previous transaction">退款</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>（<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code.">pubkey脚本</a>） 。</span></div>
</li>
</ul>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-984">Bob的服务器接收到付款消息，验证交易是否向所提供的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>支付请求的金额，然后将交易广播到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>。</span><span class="yiyi-st" id="yiyi-985">它还使用PaymentACK消息回复HTTP POSTed Payment消息，其中包括Bob的服务器的可选备忘录，感谢Charlie的赞助，并提供有关订单的其他信息，如预计到达日期。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-986">Charlie的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>看到了PaymentACK，并通知Charlie付款已发送。</span><span class="yiyi-st" id="yiyi-987">PaymentACK并不意味着Bob已经验证了Charlie的付款 - 请参阅下面的验证付款部分，但这意味着Charlie可以在交易获得<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/confirmation-score" style="color: #2c6fad; text-decoration-line: none;" title="A score indicating the number of blocks on the best block chain that would need to be modified to remove or modify a particular transaction. A confirmed transaction has a confirmation score of one or higher.">确认</a>时执行其他操作。</span><span class="yiyi-st" id="yiyi-988">在Bob的服务器从<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>中验证Charlie的事务已经被<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/confirmation-score" style="color: #2c6fad; text-decoration-line: none;" title="A score indicating the number of blocks on the best block chain that would need to be modified to remove or modify a particular transaction. A confirmed transaction has a confirmation score of one or higher.">确认</a>之后，它授权运送Charlie的订单。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-989">在出现争议的情况下，Charlie可以从各种签名或其他证明的信息中生成经密码证明的<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-receipt" id="term-receipt" style="color: black; text-decoration-line: none;" title="A cryptographically-verifiable receipt created using parts of a payment request and a confirmed transaction">收据</a>。</span></div>
<ul style="margin-left: 0px; padding-left: 20px;">
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-990">Bob的网络服务器签名的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-examples#term-paymentdetails" style="color: #2c6fad; text-decoration-line: none;" title="The PaymentDetails of the payment protocol which allows the receiver to specify the payment details to the spender">PaymentDetails</a>消息证明，Charlie收到了一个发票，用于为指定的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>指定的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code.">公钥脚本</a>备忘录字段。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-991">比特币<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>可以证明由Bob指定的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code.">pubkey脚本</a>支付指定数量的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>。</span></div>
</li>
</ul>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-992">如果需要发出<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#issuing-refunds" style="color: #2c6fad; text-decoration-line: none;" title="A transaction which refunds some or all satoshis received in a previous transaction">退款</a>，Bob的服务器可以安全地支付Charlie提供的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#issuing-refunds" style="color: #2c6fad; text-decoration-line: none;" title="A transaction which refunds some or all satoshis received in a previous transaction">退款</a>&nbsp;-to&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code.">pubkey脚本</a>。</span><span class="yiyi-st" id="yiyi-993">有关详细信息，请参阅下面的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#issuing-refunds" style="color: #2c6fad; text-decoration-line: none;" title="A transaction which refunds some or all satoshis received in a previous transaction">退款</a>部分。</span></div>
<h3 class=" anchorAf" id="verifying-payment" style="color: #383838; font-size: 20.8px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-994">验证付款</span></h3>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_payment_processing.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-995"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_payment_processing.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_payment_processing.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_payment_processing.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-996">如<a href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#transactions" style="color: #2c6fad; text-decoration-line: none;" title="A transaction spending satoshis">交易</a>和<a href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#block-chain" style="color: #2c6fad; text-decoration-line: none;">块链</a>部分所述，将交易广播到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>不能确保接收方得到报酬。</span><span class="yiyi-st" id="yiyi-997">一个恶意的支出者可以创建一个支付收款人的交易，另一个交易支付相同的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it.">输入</a>回到自己。</span><span class="yiyi-st" id="yiyi-998">只有其中一个交易将被添加到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>，没有人可以肯定地说明它将是哪一个。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-999">花费相同<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/input" style="color: #2c6fad; text-decoration-line: none;" title="An input in a transaction which contains three fields: an outpoint, a signature script, and a sequence number. The outpoint references a previous output and the signature script allows spending it.">输入</a>的两个或多个交易通常被称为<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/double-spend" id="term-double-spend" style="color: black; text-decoration-line: none;" title="A transaction that uses the same input as an already broadcast transaction. The attempt of duplication, deceit, or conversion, will be adjudicated when only one of the transactions is recorded in the blockchain.">双重支出</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1000">一旦交易被包含在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>中，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/double-spend" style="color: #2c6fad; text-decoration-line: none;" title="A transaction that uses the same input as an already broadcast transaction. The attempt of duplication, deceit, or conversion, will be adjudicated when only one of the transactions is recorded in the blockchain.">双重支出</a>是不可能的，而不修改<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>历史来替换交易，这是相当困难的。</span><span class="yiyi-st" id="yiyi-1001">使用该系统，Bitcoin协议可以根据需要修改以替换交易的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">的数量，为每个交易提供更新置信度。</a></span><span class="yiyi-st" id="yiyi-1002">对于每个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>，交易获得一个<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/confirmation-score" id="term-confirmation" style="color: black; text-decoration-line: none;" title="A score indicating the number of blocks on the best block chain that would need to be modified to remove or modify a particular transaction. A confirmed transaction has a confirmation score of one or higher.">确认</a>。</span><span class="yiyi-st" id="yiyi-1003">由于修改<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>是相当困难的，所以较高的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/confirmation-score" style="color: #2c6fad; text-decoration-line: none;" title="A score indicating the number of blocks on the best block chain that would need to be modified to remove or modify a particular transaction. A confirmed transaction has a confirmation score of one or higher.">确认得分</a>表示更大的保护。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1004"><strong>0&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/confirmation-score" style="color: #2c6fad; text-decoration-line: none;" title="A score indicating the number of blocks on the best block chain that would need to be modified to remove or modify a particular transaction. A confirmed transaction has a confirmation score of one or higher.">确认</a></strong>：交易已被广播，但仍未包含在任何<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>中。</span><span class="yiyi-st" id="yiyi-1005">一般情况下，零价值<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/confirmation-score" style="color: #2c6fad; text-decoration-line: none;" title="A score indicating the number of blocks on the best block chain that would need to be modified to remove or modify a particular transaction. A confirmed transaction has a confirmation score of one or higher.">确认</a>的交易（<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/confirmation-score" style="color: #2c6fad; text-decoration-line: none;" title="A score indicating the number of blocks on the best block chain that would need to be modified to remove or modify a particular transaction. A confirmed transaction has a confirmation score of one or higher.">未经确认的交易</a>）一律不受信任。</span><span class="yiyi-st" id="yiyi-1006">虽然<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">矿工</a>通常确认他们收到的第一个交易，但欺诈者可能可以操纵<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>来包括其交易版本。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1007"><strong>1&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/confirmation-score" style="color: #2c6fad; text-decoration-line: none;" title="A score indicating the number of blocks on the best block chain that would need to be modified to remove or modify a particular transaction. A confirmed transaction has a confirmation score of one or higher.">确认</a></strong>：交易被包含在最新的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>中，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/double-spend" style="color: #2c6fad; text-decoration-line: none;" title="A transaction that uses the same input as an already broadcast transaction. The attempt of duplication, deceit, or conversion, will be adjudicated when only one of the transactions is recorded in the blockchain.">双重花费</a>风险急剧下降。</span><span class="yiyi-st" id="yiyi-1008">支付足够的交易费用的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/transaction-fee" style="color: #2c6fad; text-decoration-line: none;" title="The amount remaining when the value of all outputs in a transaction are subtracted from all inputs in a transaction; the fee is paid to the miner who includes that transaction in a block.">交易</a>平均需要10分钟才能收到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/confirmation-score" style="color: #2c6fad; text-decoration-line: none;" title="A score indicating the number of blocks on the best block chain that would need to be modified to remove or modify a particular transaction. A confirmed transaction has a confirmation score of one or higher.">确认</a>。</span><span class="yiyi-st" id="yiyi-1009">然而，最近的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>被意外地更换，所以<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/double-spend" style="color: #2c6fad; text-decoration-line: none;" title="A transaction that uses the same input as an already broadcast transaction. The attempt of duplication, deceit, or conversion, will be adjudicated when only one of the transactions is recorded in the blockchain.">双重支出</a>仍然是一个真正的可能性。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1010"><strong>2&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/confirmation-score" style="color: #2c6fad; text-decoration-line: none;" title="A score indicating the number of blocks on the best block chain that would need to be modified to remove or modify a particular transaction. A confirmed transaction has a confirmation score of one or higher.">确认</a></strong>：最近的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>链接到包含交易的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>。</span><span class="yiyi-st" id="yiyi-1011">截至2014年3月，两个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>替换是非常罕见的，并且两个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>替换攻击是不切实际的，没有昂贵的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">采矿</a>设备。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1012"><strong>6&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/confirmation-score" style="color: #2c6fad; text-decoration-line: none;" title="A score indicating the number of blocks on the best block chain that would need to be modified to remove or modify a particular transaction. A confirmed transaction has a confirmation score of one or higher.">确认</a></strong>：<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>花了大约一个小时的时间来保护交易，避免了<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/double-spend" style="color: #2c6fad; text-decoration-line: none;" title="A transaction that uses the same input as an already broadcast transaction. The attempt of duplication, deceit, or conversion, will be adjudicated when only one of the transactions is recorded in the blockchain.">双重支出</a>，交易是埋在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">六块</a>之下。</span><span class="yiyi-st" id="yiyi-1013">即使是一个相当幸运的攻击者也需要大量的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>哈希功率代替六个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>。</span><span class="yiyi-st" id="yiyi-1014">虽然这个数字有些随意，但处理高价值交易的软件或以其他方式具有欺诈风险的软件，在等待接受付款之前，应至少等待六次<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/confirmation-score" style="color: #2c6fad; text-decoration-line: none;" title="A score indicating the number of blocks on the best block chain that would need to be modified to remove or modify a particular transaction. A confirmed transaction has a confirmation score of one or higher.">确认</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1015">Bitcoin Core提供了几个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#remote-procedure-calls-rpcs" style="color: #2c6fad; text-decoration-line: none;">RPC</a>，可以为您的程序提供<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>中的交易或任意交易的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/confirmation-score" style="color: #2c6fad; text-decoration-line: none;" title="A score indicating the number of blocks on the best block chain that would need to be modified to remove or modify a particular transaction. A confirmed transaction has a confirmation score of one or higher.">确认分数</a>。</span><span class="yiyi-st" id="yiyi-1016">例如，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#listunspent" style="color: #2c6fad; text-decoration-line: none;"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">listunspent</code>&nbsp;RPC</a>提供了您可以与<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/confirmation-score" style="color: #2c6fad; text-decoration-line: none;" title="A score indicating the number of blocks on the best block chain that would need to be modified to remove or modify a particular transaction. A confirmed transaction has a confirmation score of one or higher.">确认分数</a>一起使用的每个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshi</a>的数组。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1017">尽管<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/confirmation-score" style="color: #2c6fad; text-decoration-line: none;" title="A score indicating the number of blocks on the best block chain that would need to be modified to remove or modify a particular transaction. A confirmed transaction has a confirmation score of one or higher.">确认</a>大部分时间都提供了优秀的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/double-spend" style="color: #2c6fad; text-decoration-line: none;" title="A transaction that uses the same input as an already broadcast transaction. The attempt of duplication, deceit, or conversion, will be adjudicated when only one of the transactions is recorded in the blockchain.">双重支出</a>保护，但至少有三种情况需要<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/double-spend" style="color: #2c6fad; text-decoration-line: none;" title="A transaction that uses the same input as an already broadcast transaction. The attempt of duplication, deceit, or conversion, will be adjudicated when only one of the transactions is recorded in the blockchain.">双重支出</a>风险分析：</span></div>
<ol style="margin-left: 0px; padding-left: 20px;">
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1018">在程序或其用户无法等待<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/confirmation-score" style="color: #2c6fad; text-decoration-line: none;" title="A score indicating the number of blocks on the best block chain that would need to be modified to remove or modify a particular transaction. A confirmed transaction has a confirmation score of one or higher.">确认</a>并希望接受<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/confirmation-score" style="color: #2c6fad; text-decoration-line: none;" title="A score indicating the number of blocks on the best block chain that would need to be modified to remove or modify a particular transaction. A confirmed transaction has a confirmation score of one or higher.">未确认</a>付款的情况下。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1019">在程序或其用户接受高价值交易并且不能等待至少六个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/confirmation-score" style="color: #2c6fad; text-decoration-line: none;" title="A score indicating the number of blocks on the best block chain that would need to be modified to remove or modify a particular transaction. A confirmed transaction has a confirmation score of one or higher.">确认</a>或更多的情况下。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1020">在实施bug或长时间攻击Bitcoin的情况下，使系统的可靠性低于预期。</span></div>
</li>
</ol>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1021"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/double-spend" style="color: #2c6fad; text-decoration-line: none;" title="A transaction that uses the same input as an already broadcast transaction. The attempt of duplication, deceit, or conversion, will be adjudicated when only one of the transactions is recorded in the blockchain.">双重花费</a>风险分析的有趣来源可以通过连接大量的比特币<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体</a>获取，以跟踪交易和<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>与每个其他。</span><span class="yiyi-st" id="yiyi-1022">一些第三方API可以为您提供这种类型的服务。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1023">例如，可以在所有连接的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>中比较<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/confirmation-score" style="color: #2c6fad; text-decoration-line: none;" title="A score indicating the number of blocks on the best block chain that would need to be modified to remove or modify a particular transaction. A confirmed transaction has a confirmation score of one or higher.">未确认的交易</a>，以查看在多个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/confirmation-score" style="color: #2c6fad; text-decoration-line: none;" title="A score indicating the number of blocks on the best block chain that would need to be modified to remove or modify a particular transaction. A confirmed transaction has a confirmation score of one or higher.">未确认的交易中是否使用任何</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/unspent-transaction-output" style="color: #2c6fad; text-decoration-line: none;" title="An Unspent Transaction Output (UTXO) that can be spent as an input in a new transaction.">UTXO</a>，表示<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/double-spend" style="color: #2c6fad; text-decoration-line: none;" title="A transaction that uses the same input as an already broadcast transaction. The attempt of duplication, deceit, or conversion, will be adjudicated when only one of the transactions is recorded in the blockchain.">双重花费</a>尝试，在这种情况下，支付可以拒绝，直到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/confirmation-score" style="color: #2c6fad; text-decoration-line: none;" title="A score indicating the number of blocks on the best block chain that would need to be modified to remove or modify a particular transaction. A confirmed transaction has a confirmation score of one or higher.">确认</a>。</span><span class="yiyi-st" id="yiyi-1024">交易也可以通过他们的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/transaction-fee" style="color: #2c6fad; text-decoration-line: none;" title="The amount remaining when the value of all outputs in a transaction are subtracted from all inputs in a transaction; the fee is paid to the miner who includes that transaction in a block.">交易费用</a>进行排名，以估计它们添加到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>之前的时间。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1025">另一个例子可能是当多个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体</a>在相同<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-height" style="color: #2c6fad; text-decoration-line: none;" title="The number of blocks preceding a particular block on a block chain. For example, the genesis block has a height of zero because zero block preceded it.">块高度</a>之间报告不同的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">块头</a>散列时，检测<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/fork" style="color: #2c6fad; text-decoration-line: none;" title="When two or more blocks have the same block height, forking the block chain. Typically occurs when two or more miners find blocks at nearly the same time. Can also happen as part of an attack.">fork</a>。</span><span class="yiyi-st" id="yiyi-1026">如果<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/fork" style="color: #2c6fad; text-decoration-line: none;" title="When two or more blocks have the same block height, forking the block chain. Typically occurs when two or more miners find blocks at nearly the same time. Can also happen as part of an attack.">fork</a>扩展了两个以上的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>，则程序可以进入安全模式，表示<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>可能出现问题。</span><span class="yiyi-st" id="yiyi-1027">有关详细信息，请参阅<a href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#detecting-forks" style="color: #2c6fad; text-decoration-line: none;">检测叉子小节</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1028"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/double-spend" style="color: #2c6fad; text-decoration-line: none;" title="A transaction that uses the same input as an already broadcast transaction. The attempt of duplication, deceit, or conversion, will be adjudicated when only one of the transactions is recorded in the blockchain.">双重支持</a>保护的另一个好的来源可以是人类智慧。</span><span class="yiyi-st" id="yiyi-1029">例如，欺诈者可能与合法客户的行为不同，让精明的商家手动将其标记为高风险。</span><span class="yiyi-st" id="yiyi-1030">您的程序可以提供安全模式，可以在全球或每个客户的基础上停止自动付款验收。</span></div>
<h3 class=" anchorAf" id="issuing-refunds" style="color: #383838; font-size: 20.8px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-1031">发起退款</span></h3>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_payment_processing.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-1032"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_payment_processing.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_payment_processing.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_payment_processing.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1033">偶尔使用您的应用程序的接收者将需要发出<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#issuing-refunds" style="color: #2c6fad; text-decoration-line: none;" title="A transaction which refunds some or all satoshis received in a previous transaction">退款</a>。</span><span class="yiyi-st" id="yiyi-1034">这样做非常不安全的明显方法是将<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>返回到他们来的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code.">pubkey脚本</a>。</span><span class="yiyi-st" id="yiyi-1035">例如：</span></div>
<ul style="margin-left: 0px; padding-left: 20px;">
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1036">Alice想从鲍勃购买一个小部件，所以Bob给Alice一个价钱，比特币<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1037">Alice打开<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>程序，并向<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>发送一些<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>。</span><span class="yiyi-st" id="yiyi-1038">她的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>程序自动选择从其未使用的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>中的一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>，相应于比特币的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>mjSk1Ny9spzU2fouzYgLqGUD8U41iR35QN。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1039">Bob发现Alice支付太多<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>。</span><span class="yiyi-st" id="yiyi-1040">作为一个诚实的家伙，Bob&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#issuing-refunds" style="color: #2c6fad; text-decoration-line: none;" title="A transaction which refunds some or all satoshis received in a previous transaction">将额外的</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>退回给mjSk ...&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>。</span></div>
</li>
</ul>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1041">这似乎应该起作用，但是Alice正在使用一个集中的多用户<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">网络钱包</a>，它不向每个用户提供<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-unique-address" style="color: #2c6fad; text-decoration-line: none;" title="Address which are only used once to protect privacy and increase security">唯一地址</a>，所以没有办法知道Bob的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#issuing-refunds" style="color: #2c6fad; text-decoration-line: none;" title="A transaction which refunds some or all satoshis received in a previous transaction">退款</a>适用于Alice。</span><span class="yiyi-st" id="yiyi-1042">现在，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#issuing-refunds" style="color: #2c6fad; text-decoration-line: none;" title="A transaction which refunds some or all satoshis received in a previous transaction">退款</a>是对集中的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>背后的公司的无意捐赠，除非Alice打开支持票，并证明那些<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>是为她。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1043">这使得接收方只有两种正确的方式来发布<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#issuing-refunds" style="color: #2c6fad; text-decoration-line: none;" title="A transaction which refunds some or all satoshis received in a previous transaction">退款</a>：</span></div>
<ul style="margin-left: 0px; padding-left: 20px;">
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1044">如果使用了<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>，或者使用基本的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-bitcoin-uri" style="color: #2c6fad; text-decoration-line: none;" title="A URI which allows receivers to encode payment details so spenders don't have to manually enter addresses and other details"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">比特币：</code>&nbsp;URI</a>，请直接与投寄人联系，要求他们提供<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#issuing-refunds" style="color: #2c6fad; text-decoration-line: none;" title="A transaction which refunds some or all satoshis received in a previous transaction">退款</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1045">如果使用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/payment-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The protocol defined in BIP70 (and other BIPs) which lets spenders get signed payment details from receivers.">支付协议</a>，请将<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#issuing-refunds" style="color: #2c6fad; text-decoration-line: none;" title="A transaction which refunds some or all satoshis received in a previous transaction">退款</a>发送到付款信息的<code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">refund_to</code>字段中列出的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>&nbsp;。</span></div>
</li>
</ul>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1046">注意：如果<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#issuing-refunds" style="color: #2c6fad; text-decoration-line: none;" title="A transaction which refunds some or all satoshis received in a previous transaction">退款</a>在原始付款完成后很长时间才会直接与投寄人联系是明智的。</span><span class="yiyi-st" id="yiyi-1047">这允许您确保用户仍然可以访问<code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">refund_to</code>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>的键或键。</span></div>
<h3 class=" anchorAf" id="disbursing-income-limiting-forex-risk" style="color: #383838; font-size: 20.8px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-1048">支付收入（限制外汇风险）</span></h3>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_payment_processing.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-1049"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_payment_processing.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_payment_processing.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_payment_processing.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1050">许多接收者担心，他们的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>将在未来比现在更少的价值，称为外汇（外汇）风险。</span><span class="yiyi-st" id="yiyi-1051">为了限制外汇风险，许多接收方选择在收到新的收款后立即支付新收购的付款。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1052">如果您的应用程序提供此业务逻辑，则需要首先选择<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>。</span><span class="yiyi-st" id="yiyi-1053">有几种不同的算法可以导致不同的结果。</span></div>
<ul style="margin-left: 0px; padding-left: 20px;">
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1054">一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-merge-avoidance" style="color: #2c6fad; text-decoration-line: none;" title="A strategy for selecting which outputs to spend that avoids merging outputs with different histories that could leak private information">合并回避</a>算法使得外部人员看到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>数据变得更难以确定接收方获得，花费和保存了多少<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>&nbsp;。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1055">最先进先出（LIFO）算法花费新获得的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>，而仍然有<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/double-spend" style="color: #2c6fad; text-decoration-line: none;" title="A transaction that uses the same input as an already broadcast transaction. The attempt of duplication, deceit, or conversion, will be adjudicated when only one of the transactions is recorded in the blockchain.">双重支出</a>风险，可能会将风险推向别人。</span><span class="yiyi-st" id="yiyi-1056">这可能对接收者的资产负债表有好处，但可能对他们的声誉不利。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1057">先入先出（FIFO）算法首先使用最早的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>，这有助于确保接收者的付款总是确认，尽管这只能在几个边缘情况下实现。</span></div>
</li>
</ul>
<h4 class=" anchorAf" id="merge-avoidance" style="color: #383838; font-size: 17.6px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-1058">合并回避</span></h4>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_payment_processing.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-1059"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_payment_processing.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_payment_processing.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_payment_processing.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1060">当接收器在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>中接收到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>时，花费者可以跟踪（以粗略的方式）接收机如何花费那些<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>。</span><span class="yiyi-st" id="yiyi-1061">但是，只要接收方为每个事务使用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-unique-address" style="color: #2c6fad; text-decoration-line: none;" title="Address which are only used once to protect privacy and increase security">唯一地址</a>，花费者就不能自动查看其他消费者向接收方支付的其他<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1062">然而，如果接收方在同一个交易中从两个不同的消费者那里花费了<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>，则这些消费者中的每一个都可以看到另一个付款人的付款。</span><span class="yiyi-st" id="yiyi-1063">这被称为<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-merge" id="term-merge" style="color: black; text-decoration-line: none;" title="Spending, in the same transaction, multiple outputs which can be traced back to different previous spenders, leaking information about how many satoshis you control">合并</a>，接收器合并<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>越多，外部人员越容易跟踪接收机具有多少<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>赚取，消耗和保存。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1064"><a class="term" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-merge-avoidance" id="term-merge-avoidance" style="color: black; text-decoration-line: none;" title="A strategy for selecting which outputs to spend that avoids merging outputs with different histories that could leak private information">合并回避</a>表示试图避免在相同的事务中花费不相关的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>。</span><span class="yiyi-st" id="yiyi-1065">对于想要将交易数据保密的人和企业，可能是一个重要的策略。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1066">粗略的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-merge-avoidance" style="color: #2c6fad; text-decoration-line: none;" title="A strategy for selecting which outputs to spend that avoids merging outputs with different histories that could leak private information">合并回避</a>策略是尝试始终以最小的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>来支付您所要求的数量。</span><span class="yiyi-st" id="yiyi-1067">例如，如果您有四个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>保持，分别为100,200,500和900&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>，则您将支付300&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis t2 &gt; 500-&nbsp;</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshi</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>。</span><span class="yiyi-st" id="yiyi-1068">这样，只要您的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>比您的帐单大，您可以避免合并。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1069">更高级的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-merge-avoidance" style="color: #2c6fad; text-decoration-line: none;" title="A strategy for selecting which outputs to spend that avoids merging outputs with different histories that could leak private information">合并回避</a>策略在很大程度上取决于<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/payment-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The protocol defined in BIP70 (and other BIPs) which lets spenders get signed payment details from receivers.">支付协议</a>的增强，这将允许付款人通过智能地在多个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出之间分配付款来合并由接收者。</a></span></div>
<h4 class=" anchorAf" id="last-in-first-out-lifo" style="color: #383838; font-size: 17.6px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-1070">后进先出（LIFO）</span></h4>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_payment_processing.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-1071"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_payment_processing.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_payment_processing.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_payment_processing.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1072"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>即使在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/confirmation-score" style="color: #2c6fad; text-decoration-line: none;" title="A score indicating the number of blocks on the best block chain that would need to be modified to remove or modify a particular transaction. A confirmed transaction has a confirmation score of one or higher.">确认</a>之前也可以一次收到。</span><span class="yiyi-st" id="yiyi-1073">由于最近的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>是<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/double-spend" style="color: #2c6fad; text-decoration-line: none;" title="A transaction that uses the same input as an already broadcast transaction. The attempt of duplication, deceit, or conversion, will be adjudicated when only one of the transactions is recorded in the blockchain.">双重</a>的最大风险，将它们花在较旧的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>之前，可以让花费者保持较旧的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/confirmation-score" style="color: #2c6fad; text-decoration-line: none;" title="A score indicating the number of blocks on the best block chain that would need to be modified to remove or modify a particular transaction. A confirmed transaction has a confirmation score of one or higher.">&nbsp;t&gt;&nbsp;</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>，这些<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/double-spend" style="color: #2c6fad; text-decoration-line: none;" title="A transaction that uses the same input as an already broadcast transaction. The attempt of duplication, deceit, or conversion, will be adjudicated when only one of the transactions is recorded in the blockchain.">不太可能是双重</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1074">LIFO有两个紧密相关的缺点：</span></div>
<ul style="margin-left: 0px; padding-left: 20px;">
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1075">如果在第二个事务中从一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/confirmation-score" style="color: #2c6fad; text-decoration-line: none;" title="A score indicating the number of blocks on the best block chain that would need to be modified to remove or modify a particular transaction. A confirmed transaction has a confirmation score of one or higher.">未确认的事务</a>中输入<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>，则如果事务<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/malleability" style="color: #2c6fad; text-decoration-line: none;" title="The ability of someone to change (mutate) unconfirmed transactions without making them invalid, which changes the transaction's txid, making child transactions invalid.">可扩展性</a>更改了第一个事务，则第二个事务将变为无效。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1076">如果在第二个事务中从一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/confirmation-score" style="color: #2c6fad; text-decoration-line: none;" title="A score indicating the number of blocks on the best block chain that would need to be modified to remove or modify a particular transaction. A confirmed transaction has a confirmation score of one or higher.">未确认事务</a>中输入<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>，并且第一个事务的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>成功<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/double-spend" style="color: #2c6fad; text-decoration-line: none;" title="A transaction that uses the same input as an already broadcast transaction. The attempt of duplication, deceit, or conversion, will be adjudicated when only one of the transactions is recorded in the blockchain.">双用了</a>到另一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>，第二个事务变得无效。</span></div>
</li>
</ul>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1077">在上述任何一种情况下，第二个事务的接收者将看到传入的事务通知消失或变成错误消息。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1078">由于LIFO将次要交易的收件人作为主要交易的收件人，将<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/double-spend" style="color: #2c6fad; text-decoration-line: none;" title="A transaction that uses the same input as an already broadcast transaction. The attempt of duplication, deceit, or conversion, will be adjudicated when only one of the transactions is recorded in the blockchain.">双重支出</a>风险作为收款人，因此在次级收件人不关心风险时最佳使用，例如交换或其他将要等待六个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/confirmation-score" style="color: #2c6fad; text-decoration-line: none;" title="A score indicating the number of blocks on the best block chain that would need to be modified to remove or modify a particular transaction. A confirmed transaction has a confirmation score of one or higher.">确认</a>的服务，无论您是否使用旧的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>或新的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1079">主要交易受益人的声誉可能受到威胁，例如支付员工时，不应使用LIFO。</span><span class="yiyi-st" id="yiyi-1080">在这种情况下，最好在使用这些交易进行付款之前等待交易完全验证（参见上述<a href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#verifying-payment" style="color: #2c6fad; text-decoration-line: none;">验证子</a>）。</span></div>
<h4 class=" anchorAf" id="first-in-first-out-fifo" style="color: #383838; font-size: 17.6px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-1081">先进先出（FIFO）</span></h4>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_payment_processing.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-1082"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_payment_processing.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_payment_processing.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_payment_processing.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1083">最老的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>是最可靠的，因为它们被接收到的时间越长，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>越多需要修改为<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/double-spend" style="color: #2c6fad; text-decoration-line: none;" title="A transaction that uses the same input as an already broadcast transaction. The attempt of duplication, deceit, or conversion, will be adjudicated when only one of the transactions is recorded in the blockchain.">双重支出</a>他们。</span><span class="yiyi-st" id="yiyi-1084">然而，在仅仅几个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>之后，达到快速递减的回报点。</span><span class="yiyi-st" id="yiyi-1085">假设攻击者拥有总共<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络中的30％哈希功率，则</a><a href="https://bitcoin.org/en/bitcoin-paper" style="color: #2c6fad; text-decoration-line: none;">原始的比特币纸张</a>预测攻击者能够修改旧的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>的机会：</span></div>
<table style="border-collapse: collapse; border-spacing: 0px; line-height: 1.5em;"><thead style="text-align: center;">
<tr><th style="border-color: rgb(221, 221, 221); border-image: initial; border-style: solid solid double; border-width: 1px 1px 3px; font-weight: normal; padding: 10px;"><span class="yiyi-st" id="yiyi-1086"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">区块</a></span></th><th style="border-color: rgb(221, 221, 221); border-image: initial; border-style: solid solid double; border-width: 1px 1px 3px; font-weight: normal; padding: 10px;"><span class="yiyi-st" id="yiyi-1087">成功修改的机会</span></th></tr>
</thead><tbody>
<tr><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1088">5</span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1089">17.73523％</span></td></tr>
<tr><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1090">10</span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1091">4.16605％</span></td></tr>
<tr><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1092">15</span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1093">1.01008％</span></td></tr>
<tr><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1094">20</span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1095">0.24804％</span></td></tr>
<tr><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1096">25</span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1097">0.06132％</span></td></tr>
<tr><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1098">30</span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1099">0.01522％</span></td></tr>
<tr><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1100">35</span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1101">0.00379％</span></td></tr>
<tr><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1102">40</span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1103">0.00095％</span></td></tr>
<tr><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1104">45</span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1105">0.00024％</span></td></tr>
<tr><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1106">50</span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1107">0.00006％</span></td></tr>
</tbody></table>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1108">当<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/transaction-fee" style="color: #2c6fad; text-decoration-line: none;" title="The amount remaining when the value of all outputs in a transaction are subtracted from all inputs in a transaction; the fee is paid to the miner who includes that transaction in a block.">交易费用</a>时，FIFO确实具有很小的优势，因为较旧的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>可能有资格包含在50,000字节中，用于不需要的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/high-priority-transaction" style="color: #2c6fad; text-decoration-line: none;" title="Transactions that don't have to pay a transaction fee because their inputs have been idle long enough to accumulated large amounts of priority. Note: miners choose whether to accept free transactions.">运行默认Bitcoin Core代码库的</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">矿工</a>的高优先级事务。</span><span class="yiyi-st" id="yiyi-1109">但是，由于<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/transaction-fee" style="color: #2c6fad; text-decoration-line: none;" title="The amount remaining when the value of all outputs in a transaction are subtracted from all inputs in a transaction; the fee is paid to the miner who includes that transaction in a block.">交易费用</a>如此之低，这并不是一个显着的优势。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1110">FIFO的唯一实际用途是接收者在几个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>中花费所有或大部分收入，并希望减少他们的付款偶然无效的机会。</span><span class="yiyi-st" id="yiyi-1111">例如，持有六个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/confirmation-score" style="color: #2c6fad; text-decoration-line: none;" title="A score indicating the number of blocks on the best block chain that would need to be modified to remove or modify a particular transaction. A confirmed transaction has a confirmation score of one or higher.">确认</a>的每笔付款的接收方，然后以每两小时的时间表向供应商和储蓄账户支付100％的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#verifying-payment" style="color: #2c6fad; text-decoration-line: none;" title="Payments which the receiver believes won't be double spent">经过验证的付款</a>。</span></div>
<h3 class=" anchorAf" id="rebilling-recurring-payments" style="color: #383838; font-size: 20.8px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-1112">重新定期付款</span></h3>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_payment_processing.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-1113"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_payment_processing.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_payment_processing.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_payment_processing.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1114">使用分散的比特币<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">不可能实现自动定期付款。</a></span><span class="yiyi-st" id="yiyi-1115">即使<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>支持自动发送不可逆付款，用户仍然需要在指定的时间启动程序，或者一直运行不受加密保护。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1116">这意味着自动重复的比特币付款只能由代表其消费者处理<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/denominations" style="color: #2c6fad; text-decoration-line: none;" title="Denominations of Bitcoin value, usually measured in fractions of a bitcoin but sometimes measured in multiples of a satoshi. One bitcoin equals 100,000,000 satoshis.">satoshis</a>的集中式服务器进行。</span><span class="yiyi-st" id="yiyi-1117">实际上，希望在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-fiat" style="color: #2c6fad; text-decoration-line: none;" title="National currencies such as the dollar or euro">法定价格条件下设定价格的接收方也必须让同一集中式服务器选择合适的汇率。</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1118">非自动重新结算可以通过信用卡经常性付款变得普遍使用的相同机制来管理：联系付款人并要求他们再次付款 - 例如，通过发送一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-examples#term-paymentrequest" style="color: #2c6fad; text-decoration-line: none;" title="The PaymentRequest of the payment protocol which contains and allows signing of the PaymentDetails">PaymentRequest</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-bitcoin-uri" style="color: #2c6fad; text-decoration-line: none;" title="A URI which allows receivers to encode payment details so spenders don't have to manually enter addresses and other details"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">bitcoin：</code>&nbsp;URI</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1119">在将来，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/payment-protocol" style="color: #2c6fad; text-decoration-line: none;" title="The protocol defined in BIP70 (and other BIPs) which lets spenders get signed payment details from receivers.">支付协议</a>和新的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>功能的扩展可能允许一些<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>程序来管理定期交易的列表。</span><span class="yiyi-st" id="yiyi-1120">花费者仍然需要定期启动该计划并授权付款 - 但是，通过点击电子邮件发票，可以更容易和更安全地支付费用，从而增加接收方按时获得付款的机会。</span></div>
<h2 class=" anchorAf" id="operating-modes" style="color: #383838; font-family: Ubuntu, sans-serif; font-size: 24px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-1121">操作模式</span></h2>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_operating_modes.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-1122"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_operating_modes.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_operating_modes.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_operating_modes.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1123">目前客户端验证<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>主要有两种方法：全<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>和<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/simplified-payment-verification" style="color: #2c6fad; text-decoration-line: none;" title="A method for verifying if particular transactions are included in a block without downloading the entire block. The method is used by some lightweight Bitcoin clients.">SPV客户端</a>。</span><span class="yiyi-st" id="yiyi-1124">不讨论其他方法，如服务器信任方法，因为它们不被推荐。</span></div>
<h3 class=" anchorAf" id="full-node" style="color: #383838; font-size: 20.8px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-1125">全节点</span></h3>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_operating_modes.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-1126"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_operating_modes.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_operating_modes.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_operating_modes.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1127">第一个也是最安全的模式是Bitcoin Core，也被称为“厚”或“全链”客户端。</span><span class="yiyi-st" id="yiyi-1128">该安全模型通过从<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/genesis-block" style="color: #2c6fad; text-decoration-line: none;" title="The first block in the Bitcoin block chain.">创世块</a>开始下载并验证<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>一直到最近发现的块<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">来保证</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>的有效性。</span><span class="yiyi-st" id="yiyi-1129">这被称为使用特定<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>的<em><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-height" style="color: #2c6fad; text-decoration-line: none;" title="The number of blocks preceding a particular block on a block chain. For example, the genesis block has a height of zero because zero block preceded it.">高度</a></em>来验证客户端对<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>的视图。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1130"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/difficulty" style="color: #2c6fad; text-decoration-line: none;" title="How difficult it is to find a block relative to the difficulty of finding the easiest possible block. The easiest possible block has a proof-of-work difficulty of 1."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/proof-of-work" style="color: #2c6fad; text-decoration-line: none;" title="A hash below a target value which can only be obtained, on average, by performing a certain amount of brute force work---therefore demonstrating proof of work."></a>去欺骗一个客户端，对手需要提供一个比当前真实的链更难的完整的替代性的区块链历史记录，这在计算上是昂贵的，因为最具累积工作量的链被定义为是真实的链。</span><span class="yiyi-st" id="yiyi-1131"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/difficulty" style="color: #2c6fad; text-decoration-line: none;" title="How difficult it is to find a block relative to the difficulty of finding the easiest possible block. The easiest possible block has a proof-of-work difficulty of 1."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/confirmation-score" style="color: #2c6fad; text-decoration-line: none;" title="A score indicating the number of blocks on the best block chain that would need to be modified to remove or modify a particular transaction. A confirmed transaction has a confirmation score of one or higher."></a>由于在链的尖端生成新的块所需的计算难度，欺骗一个完整节点想获得确认非常困难。</span><span class="yiyi-st" id="yiyi-1132">这种形式的验证对于sybil攻击是高度抵制的 - 只需要一个诚实的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>，以便接收和验证真实<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>的完整状态。</span></div>
<div style="line-height: 1.5em;">
<img alt="Block Height Compared To Block Depth" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-block-height-vs-depth.svg" style="border: 0px; max-width: 100%;" /></div>
<h3 class=" anchorAf" id="simplified-payment-verification-spv" style="color: #383838; font-size: 20.8px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-1133">简化付款验证（SPV）</span></h3>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_operating_modes.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-1134"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_operating_modes.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_operating_modes.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_operating_modes.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1135"><a href="https://bitcoin.org/en/bitcoin-paper" style="color: #2c6fad; text-decoration-line: none;"></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network."></a>在原始比特币白皮书里面详述的另外一种方式是在初始同步过程中只下载块头，当需要时候再从完整节点获取交易信息。</span><span class="yiyi-st" id="yiyi-1136">与<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-height" style="color: #2c6fad; text-decoration-line: none;" title="The number of blocks preceding a particular block on a block chain. For example, the genesis block has a height of zero because zero block preceded it.">高度</a>线性匹配，每个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">块头</a>只有80个字节，或每年就4.2MB，而不管<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>的总大小。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1137"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/merkle-root" style="color: #2c6fad; text-decoration-line: none;" title="The root node of a merkle tree, a descendant of all the hashed pairs in the tree. Block headers must include a valid merkle root descended from all transactions in that block."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/simplified-payment-verification" style="color: #2c6fad; text-decoration-line: none;" title="A method for verifying if particular transactions are included in a block without downloading the entire block. The method is used by some lightweight Bitcoin clients."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain."></a>如白皮书所述，块头中的merkle跟以及merkle分支可以向SPV客户端验证嵌入在区块链中的一个区块的问题交易。</span><span class="yiyi-st" id="yiyi-1138">这并不能保证所嵌入的交易的有效性。</span><span class="yiyi-st" id="yiyi-1139">相反，它展示了执行<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/double-spend" style="color: #2c6fad; text-decoration-line: none;" title="A transaction that uses the same input as an already broadcast transaction. The attempt of duplication, deceit, or conversion, will be adjudicated when only one of the transactions is recorded in the blockchain.">重复花费</a>攻击所需的工作量。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1140"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>中的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>深度对应于在特定<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块之上构建的累积</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/difficulty" style="color: #2c6fad; text-decoration-line: none;" title="How difficult it is to find a block relative to the difficulty of finding the easiest possible block. The easiest possible block has a proof-of-work difficulty of 1.">难度</a>。</span><span class="yiyi-st" id="yiyi-1141"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/simplified-payment-verification" style="color: #2c6fad; text-decoration-line: none;" title="A method for verifying if particular transactions are included in a block without downloading the entire block. The method is used by some lightweight Bitcoin clients.">SPV客户端</a>知道<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/merkle-root" style="color: #2c6fad; text-decoration-line: none;" title="The root node of a merkle tree, a descendant of all the hashed pairs in the tree. Block headers must include a valid merkle root descended from all transactions in that block.">merkle根</a>和关联的交易信息，并从<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">完整节点</a>请求相应的merkle分支。</span><span class="yiyi-st" id="yiyi-1142">一旦检索到merkle分支，证明<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>中的交易的存在，则<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/simplified-payment-verification" style="color: #2c6fad; text-decoration-line: none;" title="A method for verifying if particular transactions are included in a block without downloading the entire block. The method is used by some lightweight Bitcoin clients.">SPV客户端</a>可以查看<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>&nbsp;<em>深度</em>作为交易有效性和安全性的代理。</span><span class="yiyi-st" id="yiyi-1143">插入无效交易的恶意<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>对用户的攻击成本与构建在该<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>之上的累积<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/difficulty" style="color: #2c6fad; text-decoration-line: none;" title="How difficult it is to find a block relative to the difficulty of finding the easiest possible block. The easiest possible block has a proof-of-work difficulty of 1.">难度</a>增长，因为恶意<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>需要单独将是<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">挖掘</a>这个伪造的链。</span></div>
<h4 class=" anchorAf" id="potential-spv-weaknesses" style="color: #383838; font-size: 17.6px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-1144">潜在的SPV弱点</span></h4>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_operating_modes.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-1145"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_operating_modes.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_operating_modes.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_operating_modes.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1146">如果简单地实现，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/simplified-payment-verification" style="color: #2c6fad; text-decoration-line: none;" title="A method for verifying if particular transactions are included in a block without downloading the entire block. The method is used by some lightweight Bitcoin clients.">SPV客户端</a>有一些严重缺陷。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1147">首先，虽然<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/simplified-payment-verification" style="color: #2c6fad; text-decoration-line: none;" title="A method for verifying if particular transactions are included in a block without downloading the entire block. The method is used by some lightweight Bitcoin clients.">SPV客户端</a>不容易被欺骗，认为交易处于<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>中，但不是这样，反之亦然。</span><span class="yiyi-st" id="yiyi-1148"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">完整节点</a>可以简单地忽略，导致<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/simplified-payment-verification" style="color: #2c6fad; text-decoration-line: none;" title="A method for verifying if particular transactions are included in a block without downloading the entire block. The method is used by some lightweight Bitcoin clients.">SPV客户端</a>认为没有发生事务。</span><span class="yiyi-st" id="yiyi-1149">这可以被认为是拒绝服务的一种形式。</span><span class="yiyi-st" id="yiyi-1150">一个缓解策略是连接到一些完整的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>，并将请求发送到每个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>。</span><span class="yiyi-st" id="yiyi-1151">然而，这可以被<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>分区或Sybil攻击所击败，因为身份基本上是免费的，并且可能是带宽密集型的。</span><span class="yiyi-st" id="yiyi-1152">必须注意确保客户端不会与诚实的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点切断</a>连接。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1153">其次，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/simplified-payment-verification" style="color: #2c6fad; text-decoration-line: none;" title="A method for verifying if particular transactions are included in a block without downloading the entire block. The method is used by some lightweight Bitcoin clients.">SPV客户端</a>仅从与其拥有的密钥相对应的完整<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>请求交易。</span><span class="yiyi-st" id="yiyi-1154">如果<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/simplified-payment-verification" style="color: #2c6fad; text-decoration-line: none;" title="A method for verifying if particular transactions are included in a block without downloading the entire block. The method is used by some lightweight Bitcoin clients.">SPV客户端</a>下载所有<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>，然后丢弃不需要的块，这可能会带来极大的带宽。</span><span class="yiyi-st" id="yiyi-1155">如果他们只是通过特定的事务向<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块请求完整的</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>，那么这样就可以获得完整的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>公共<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址 t3 &gt;对应于用户。</a></span><span class="yiyi-st" id="yiyi-1156">这是一个很大的隐私泄漏，并允许客户端，用户或<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/address" style="color: #2c6fad; text-decoration-line: none;" title="A 20-byte hash formatted using base58check to produce either a P2PKH or P2SH Bitcoin address. Currently the most common way users exchange payment information.">地址</a>的服务拒绝服务的策略，这些操作不满足运行完整的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>，以及琐碎的连结资金。</span><span class="yiyi-st" id="yiyi-1157">客户端可以简单地垃圾邮件发送许多假事务请求，但这在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/simplified-payment-verification" style="color: #2c6fad; text-decoration-line: none;" title="A method for verifying if particular transactions are included in a block without downloading the entire block. The method is used by some lightweight Bitcoin clients.">SPV客户端</a>上造成了很大的压力，最终可能会破坏<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/simplified-payment-verification" style="color: #2c6fad; text-decoration-line: none;" title="A method for verifying if particular transactions are included in a block without downloading the entire block. The method is used by some lightweight Bitcoin clients.">瘦客户端</a>的目的。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1158">为了减轻后一个问题，已经实现了<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/bloom-filter" style="color: #2c6fad; text-decoration-line: none;" title="A filter used primarily by SPV clients to request only matching transactions and merkle blocks from full nodes.">Bloom filter</a>作为一种混淆和压缩<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>数据请求的方法。</span></div>
<h4 class=" anchorAf" id="bloom-filters" style="color: #383838; font-size: 17.6px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-1159">布鲁姆过滤器</span></h4>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_operating_modes.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-1160"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_operating_modes.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_operating_modes.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_operating_modes.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1161"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/bloom-filter" style="color: #2c6fad; text-decoration-line: none;" title="A filter used primarily by SPV clients to request only matching transactions and merkle blocks from full nodes."></a>布鲁姆过滤器是用于测试元素成员资格的空间高效概率数据结构。</span><span class="yiyi-st" id="yiyi-1162">数据结构以牺牲规定的假阳性率为代价实现了巨大的数据压缩。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1163">一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/bloom-filter" style="color: #2c6fad; text-decoration-line: none;" title="A filter used primarily by SPV clients to request only matching transactions and merkle blocks from full nodes.">Bloom filter</a>作为一个n位的数组全部设置为0。</span><span class="yiyi-st" id="yiyi-1164">选择一组k个随机散列函数，其中每个函数输出1和n范围之间的单个整数。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1165">在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/bloom-filter" style="color: #2c6fad; text-decoration-line: none;" title="A filter used primarily by SPV clients to request only matching transactions and merkle blocks from full nodes.">Bloom filter</a>中添加元素时，元素将分别进行哈希散列，而对于每个k个输出，该索引处的相应的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/bloom-filter" style="color: #2c6fad; text-decoration-line: none;" title="A filter used primarily by SPV clients to request only matching transactions and merkle blocks from full nodes.">Bloom filter</a>位将被设置为1。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1166">通过使用与之前相同的散列函数来完成<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/bloom-filter" style="color: #2c6fad; text-decoration-line: none;" title="A filter used primarily by SPV clients to request only matching transactions and merkle blocks from full nodes.">Bloom过滤器</a>的查询。</span><span class="yiyi-st" id="yiyi-1167">如果在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/bloom-filter" style="color: #2c6fad; text-decoration-line: none;" title="A filter used primarily by SPV clients to request only matching transactions and merkle blocks from full nodes.">bloom filter</a>中访问的所有k个比特被设置为1，则这很可能表明该元素位于该集合中。</span><span class="yiyi-st" id="yiyi-1168">显然，通过在域中添加其他元素的组合，可以将k个索引设置为1，但参数允许用户选择可接受的假阳性率。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1169">删除元素只能通过废除<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/bloom-filter" style="color: #2c6fad; text-decoration-line: none;" title="A filter used primarily by SPV clients to request only matching transactions and merkle blocks from full nodes.">bloom filter</a>并从头重新创建来完成。</span></div>
<h4 class=" anchorAf" id="application-of-bloom-filters" style="color: #383838; font-size: 17.6px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-1170">布鲁姆过滤器的应用</span></h4>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_operating_modes.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-1171"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_operating_modes.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_operating_modes.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_operating_modes.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1172">而不是将错误的阳性率视为责任，它用于创建一个可调参数，表示所需的隐私级别和带宽权衡。</span><span class="yiyi-st" id="yiyi-1173"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/simplified-payment-verification" style="color: #2c6fad; text-decoration-line: none;" title="A method for verifying if particular transactions are included in a block without downloading the entire block. The method is used by some lightweight Bitcoin clients.">SPV客户端</a>创建他们的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/bloom-filter" style="color: #2c6fad; text-decoration-line: none;" title="A filter used primarily by SPV clients to request only matching transactions and merkle blocks from full nodes.">布鲁姆过滤器</a>，并使用<code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">filterload</code>消息将其发送到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">完整节点</a>，该消息为需要的交易设置过滤。</span><span class="yiyi-st" id="yiyi-1174">命令<code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">filteradd</code>允许向筛选器添加所需的数据，而不需要发送一个全新的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/bloom-filter" style="color: #2c6fad; text-decoration-line: none;" title="A filter used primarily by SPV clients to request only matching transactions and merkle blocks from full nodes.">布隆过滤器</a>，而<code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">filterclear</code>允许连接恢复为标准<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>发现机制。</span><span class="yiyi-st" id="yiyi-1175">如果滤波器已经被加载，那么完整的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>将发送一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>的修改形式，称为<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/merkle-block" style="color: #2c6fad; text-decoration-line: none;" title="A partial merkle tree connecting transactions matching a bloom filter to the merkle root of a block.">merkle块</a>。</span><span class="yiyi-st" id="yiyi-1176"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/merkle-block" style="color: #2c6fad; text-decoration-line: none;" title="A partial merkle tree connecting transactions matching a bloom filter to the merkle root of a block.">merkle块</a>只是<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">块头</a>和其中与设置&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/bloom-filter" style="color: #2c6fad; text-decoration-line: none;" title="A filter used primarily by SPV clients to request only matching transactions and merkle blocks from full nodes.">Bloom filter</a>相关的merkle分支。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1177"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/simplified-payment-verification" style="color: #2c6fad; text-decoration-line: none;" title="A method for verifying if particular transactions are included in a block without downloading the entire block. The method is used by some lightweight Bitcoin clients.">SPV客户端</a>不仅可以将交易作为元素添加到过滤器，还可以将<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair.">公钥</a>，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/signature-script" style="color: #2c6fad; text-decoration-line: none;" title="Data generated by a spender which is almost always used as variables to satisfy a pubkey script. Signature Scripts are called scriptSig in code.">签名脚本</a>和<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/pubkey-script" style="color: #2c6fad; text-decoration-line: none;" title="A script included in outputs which sets the conditions that must be fulfilled for those satoshis to be spent. Data for fulfilling the conditions can be provided in a signature script. Pubkey Scripts are called a scriptPubKey in code.">pubkey脚本</a>等等。</span><span class="yiyi-st" id="yiyi-1178">这使得P2SH事务查找成为可能。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1179">如果用户更加隐私意识，他可以将<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/bloom-filter" style="color: #2c6fad; text-decoration-line: none;" title="A filter used primarily by SPV clients to request only matching transactions and merkle blocks from full nodes.">布鲁姆过滤器</a>设置为包含更多的误报，牺牲了用于事务发现的额外带宽。</span><span class="yiyi-st" id="yiyi-1180">如果用户的带宽预算紧张，他可以将假阳性率设置为低，知道这将允许完整的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>清楚了解与他的客户端相关的交易。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1181"><strong>资源：</strong>&nbsp;<a href="http://bitcoinj.github.io/" style="color: #2c6fad; text-decoration-line: none;">BitcoinJ</a>是基于<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/simplified-payment-verification" style="color: #2c6fad; text-decoration-line: none;" title="A method for verifying if particular transactions are included in a block without downloading the entire block. The method is used by some lightweight Bitcoin clients.">SPV</a>安全模型和<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/bloom-filter" style="color: #2c6fad; text-decoration-line: none;" title="A filter used primarily by SPV clients to request only matching transactions and merkle blocks from full nodes.">布鲁姆过滤器</a>的比特币的Java实现。</span><span class="yiyi-st" id="yiyi-1182">用于大多数Android&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1183"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/bloom-filter" style="color: #2c6fad; text-decoration-line: none;" title="A filter used primarily by SPV clients to request only matching transactions and merkle blocks from full nodes.">Bloom filter</a>通过<a href="https://github.com/bitcoin/bips/blob/master/bip-0037.mediawiki" style="color: #2c6fad; text-decoration-line: none;">BIP37</a>进行标准化。</span><span class="yiyi-st" id="yiyi-1184">查看BIP的实现细节。</span></div>
<h3 class=" anchorAf" id="future-proposals" style="color: #383838; font-size: 20.8px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-1185">未来建议</span></h3>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_operating_modes.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-1186"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_operating_modes.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_operating_modes.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_operating_modes.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1187"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/unspent-transaction-output" style="color: #2c6fad; text-decoration-line: none;" title="An Unspent Transaction Output (UTXO) that can be spent as an input in a new transaction."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network."></a>在区块链中有未来的建议，例如未花费交易输出UTXO承诺，为需要的客户找到更满意的中间地带块链的完整副本，或相信大多数连接的节点不在说谎。</span><span class="yiyi-st" id="yiyi-1188"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/unspent-transaction-output" style="color: #2c6fad; text-decoration-line: none;" title="An Unspent Transaction Output (UTXO) that can be spent as an input in a new transaction.">UTXO</a>承诺将使使用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>中认证的数据结构的非常安全的客户端使用有限量的存储。</span><span class="yiyi-st" id="yiyi-1189">然而，这些类型的提议是在非常早的阶段，并且将在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>中产生<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/soft-fork" style="color: #2c6fad; text-decoration-line: none;" title="A softfork is a change to the bitcoin protocol wherein only previously valid blocks/transactions are made invalid. Since old nodes will recognise the new blocks as valid, a softfork is backward-compatible.">软分叉</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1190">在实施这些类型的操作模式之前，应该根据可能的威胁模型，计算和带宽约束以及比特币值的责任来选择模式。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1191"><strong>资源：</strong>&nbsp;<a href="https://bitcointalk.org/index.php?topic=88208.0" style="color: #2c6fad; text-decoration-line: none;">UTXO承诺上的原始线程</a>，<a href="https://github.com/maaku/bips/blob/master/drafts/auth-trie.mediawiki" style="color: #2c6fad; text-decoration-line: none;">经过身份验证的前缀树BIP提案</a>。</span></div>
<h2 class=" anchorAf" id="p2p-network" style="color: #383838; font-family: Ubuntu, sans-serif; font-size: 24px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-1192">P2P网络</span></h2>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_p2p_network.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-1193"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_p2p_network.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_p2p_network.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_p2p_network.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1194">Bitcoin<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>协议允许<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">全节点</a>(<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">peers</a>) 共同维护一个进行<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">区块</a>和交易数据交换的<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" id="term-network" style="color: black; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">点对点</a>的网络。</span><span class="yiyi-st" id="yiyi-1195">完整<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>下载并验证每个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>和事务，然后再将它们中继到其他<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>。</span><span class="yiyi-st" id="yiyi-1196">存档<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>是满<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>，其存储整个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>，并且可以将历史<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>提供给其他<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>。</span><span class="yiyi-st" id="yiyi-1197">修剪<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>是不存储整个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>的满<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>。</span><span class="yiyi-st" id="yiyi-1198">许多<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/simplified-payment-verification" style="color: #2c6fad; text-decoration-line: none;" title="A method for verifying if particular transactions are included in a block without downloading the entire block. The method is used by some lightweight Bitcoin clients.">SPV客户端</a>也使用比特币<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>协议连接到完整的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1199"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/consensus-rules" style="color: #2c6fad; text-decoration-line: none;" title="The block validation rules that full nodes follow to stay in consensus with other nodes.">共识规则</a>不涵盖网络，所以Bitcoin程序可能使用替代网络和协议，例如一些<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">矿工</a>使用的<a href="https://www.mail-archive.com/bitcoin-development@lists.sourceforge.net/msg03189.html" style="color: #2c6fad; text-decoration-line: none;">高速块中继网络</a>和<a href="https://github.com/spesmilo/electrum-server" style="color: #2c6fad; text-decoration-line: none;">专用交易信息服务器</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">使用的</a>钱包提供<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/simplified-payment-verification" style="color: #2c6fad; text-decoration-line: none;" title="A method for verifying if particular transactions are included in a block without downloading the entire block. The method is used by some lightweight Bitcoin clients.">SPV</a>级安全性。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1200">为了提供Bitcoin&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">对等网络</a>的实际示例，本节使用比特币核心作为代表性的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">完整节点</a>和<a href="http://bitcoinj.github.io/" style="color: #2c6fad; text-decoration-line: none;">BitcoinJ</a>作为代表<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/simplified-payment-verification" style="color: #2c6fad; text-decoration-line: none;" title="A method for verifying if particular transactions are included in a block without downloading the entire block. The method is used by some lightweight Bitcoin clients.">SPV客户端</a>。</span><span class="yiyi-st" id="yiyi-1201">这两个程序都是灵活的，所以只描述默认行为。</span><span class="yiyi-st" id="yiyi-1202">另外，为了隐私，下面的示例<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/output" style="color: #2c6fad; text-decoration-line: none;" title="An output in a transaction which contains two fields: a value field for transferring zero or more satoshis and a pubkey script for indicating what conditions must be fulfilled for those satoshis to be further spent.">输出</a>中的实际IP地址已被替换为<a href="http://tools.ietf.org/html/rfc5737" style="color: #2c6fad; text-decoration-line: none;">RFC5737</a>保留的IP地址。</span></div>
<h3 class=" anchorAf" id="peer-discovery" style="color: #383838; font-size: 20.8px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-1203">同伴发现</span></h3>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_p2p_network.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-1204"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_p2p_network.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_p2p_network.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_p2p_network.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1205">当第一次启动时，程序不知道任何活动的完整<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点的IP地址</a>。</span><span class="yiyi-st" id="yiyi-1206">为了发现一些IP地址，他们查询一个或多个硬编码到Bitcoin Core和<a class="auto-link" href="http://bitcoinj.github.io/" style="color: #2c6fad; text-decoration-line: none;">BitcoinJ</a>的DNS名称（称为<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/dns-seed" id="term-dns-seed" style="color: black; text-decoration-line: none;" title="A DNS server which returns IP addresses of full nodes on the Bitcoin network to assist in peer discovery.">DNS种子</a>）。</span><span class="yiyi-st" id="yiyi-1207">对查找的响应应包括可能接受新的传入连接的一个或多个具有完整<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>的IP地址的一个或多个<a href="http://tools.ietf.org/html/rfc1035#section-3.2.2" style="color: #2c6fad; text-decoration-line: none;">DNS A记录</a>。</span><span class="yiyi-st" id="yiyi-1208">例如，使用<a href="https://en.wikipedia.org/wiki/Dig_%28Unix_command%29" style="color: #2c6fad; text-decoration-line: none;">Unix&nbsp;<code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">dig</code>命令</a>：</span></div>
<div class="highlighter-rouge">
<pre style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 12px; line-height: 1.5em; overflow-y: auto; padding: 17px;"><code style="border-radius: 3px; border: 0px; font-family: monospace, serif; padding: 0px;">;; QUESTION SECTION:
;seed.bitcoin.sipa.be.	    IN  A

;; ANSWER SECTION:
seed.bitcoin.sipa.be.	60  IN  A  192.0.2.113
seed.bitcoin.sipa.be.	60  IN  A  198.51.100.231
seed.bitcoin.sipa.be.	60  IN  A  203.0.113.183
[...]
</code></pre>
</div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1209">Bitotin社区成员维护<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/dns-seed" style="color: #2c6fad; text-decoration-line: none;" title="A DNS server which returns IP addresses of full nodes on the Bitcoin network to assist in peer discovery.">DNS种子</a>：其中一些提供动态<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/dns-seed" style="color: #2c6fad; text-decoration-line: none;" title="A DNS server which returns IP addresses of full nodes on the Bitcoin network to assist in peer discovery.">DNS种子</a>服务器，通过扫描，自动获取活动的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点的IP地址</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络；其他人提供手动更新的静态</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/dns-seed" style="color: #2c6fad; text-decoration-line: none;" title="A DNS server which returns IP addresses of full nodes on the Bitcoin network to assist in peer discovery.">DNS种子</a>，更有可能为非活动的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点提供IP地址</a>。</span><span class="yiyi-st" id="yiyi-1210">在任何一种情况下，如果<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>被添加到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/dns-seed" style="color: #2c6fad; text-decoration-line: none;" title="A DNS server which returns IP addresses of full nodes on the Bitcoin network to assist in peer discovery.">DNS种子</a>，如果它们运行在默认Bitcoin端口为8333，对于<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mainnet" style="color: #2c6fad; text-decoration-line: none;" title="The original and main network for Bitcoin transactions, where satoshis have real economic value.">mainnet</a>或18333为<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/testnet" style="color: #2c6fad; text-decoration-line: none;" title="A global testing environment in which developers can obtain and spend satoshis that have no real-world value on a network that is very similar to the Bitcoin mainnet.">testnet&nbsp;</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1211"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/dns-seed" style="color: #2c6fad; text-decoration-line: none;" title="A DNS server which returns IP addresses of full nodes on the Bitcoin network to assist in peer discovery.">DNS种子</a>结果未通过身份验证，恶意种子运营商或<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>&nbsp;<a class="auto-link" href="https://en.wikipedia.org/wiki/Man-in-the-middle_attack" style="color: #2c6fad; text-decoration-line: none;">中间人攻击者只能返回</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">，隔离攻击者自己的</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>上的程序，并允许攻击者提供虚假事务和<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>。</span><span class="yiyi-st" id="yiyi-1212">因此，程序不应仅仅依靠<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/dns-seed" style="color: #2c6fad; text-decoration-line: none;" title="A DNS server which returns IP addresses of full nodes on the Bitcoin network to assist in peer discovery.">DNS种子</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1213">一旦程序连接到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>，它的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体</a>可以开始发送<code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">addr</code>（地址）消息，IP地址和端口号为<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>上的其他<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体</a>，提供了一个完全分散的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体</a>发现方法。</span><span class="yiyi-st" id="yiyi-1214">Bitcoin Core在持久的磁盘数据库中保留已知的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体</a>的记录，通常允许它在后续启动时直接连接到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体</a>，而不必使用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/dns-seed" style="color: #2c6fad; text-decoration-line: none;" title="A DNS server which returns IP addresses of full nodes on the Bitcoin network to assist in peer discovery.">DNS种子。</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1215">然而，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体</a>通常离开<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>或更改IP地址，因此程序可能需要在启动成功连接之前启动几个不同的连接尝试。</span><span class="yiyi-st" id="yiyi-1216">这可能会增加连接到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>所需的时间量，从而迫使用户在发送交易或检查付款状态之前等待。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1217">为了避免这种可能的延迟，<a class="auto-link" href="http://bitcoinj.github.io/" style="color: #2c6fad; text-decoration-line: none;">BitcoinJ</a>总是使用动态<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/dns-seed" style="color: #2c6fad; text-decoration-line: none;" title="A DNS server which returns IP addresses of full nodes on the Bitcoin network to assist in peer discovery.">DNS种子</a>来获取被认为是当前活动的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点的</a>的IP地址。</span><span class="yiyi-st" id="yiyi-1218">Bitcoin Core还尝试在最小化延迟之间取得平衡，并避免不必要的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/dns-seed" style="color: #2c6fad; text-decoration-line: none;" title="A DNS server which returns IP addresses of full nodes on the Bitcoin network to assist in peer discovery.">DNS种子</a>使用：如果Bitcoin Core在其<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体</a>数据库中具有条目，则尝试最多11秒连接至少一个，然后倒回种子；如果在该时间内建立连接，则不会查询任何种子。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1219">Bitcoin Core和<a class="auto-link" href="http://bitcoinj.github.io/" style="color: #2c6fad; text-decoration-line: none;">BitcoinJ</a>也包括一个硬编码的IP地址和端口号的列表，到几十个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>，这些节点在特定版本的软件首次发布的时候是活跃的。</span><span class="yiyi-st" id="yiyi-1220">如果没有一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/dns-seed" style="color: #2c6fad; text-decoration-line: none;" title="A DNS server which returns IP addresses of full nodes on the Bitcoin network to assist in peer discovery.">DNS种子</a>服务器在60秒内响应查询，Bitcoin Core将开始尝试连接到这些<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>，提供自动后备选项。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1221">作为手动后备选项，Bitcoin Core还提供了几种命令行连接选项，包括通过IP地址从特定的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>获取<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体</a>的列表的功能，或者通过IP地址持久连接到特定的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>。</span><span class="yiyi-st" id="yiyi-1222">有关详细信息，请参阅<code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">-help</code>文本。</span><span class="yiyi-st" id="yiyi-1223"><a class="auto-link" href="http://bitcoinj.github.io/" style="color: #2c6fad; text-decoration-line: none;">BitcoinJ</a>可以编程做同样的事情。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1224"><strong>资源：</strong>&nbsp;<a href="https://github.com/sipa/bitcoin-seeder" style="color: #2c6fad; text-decoration-line: none;">比特币播种器</a>，程序由Bitcoin Core和<a class="auto-link" href="http://bitcoinj.github.io/" style="color: #2c6fad; text-decoration-line: none;">BitcoinJ</a>使用的几个种子运行。</span><span class="yiyi-st" id="yiyi-1225">Bitcoin Core&nbsp;<a href="https://github.com/bitcoin/bitcoin/blob/master/doc/dnsseed-policy.md" style="color: #2c6fad; text-decoration-line: none;">DNS种子策略</a>。</span><span class="yiyi-st" id="yiyi-1226">Bitcoin Core和<a class="auto-link" href="http://bitcoinj.github.io/" style="color: #2c6fad; text-decoration-line: none;">BitcoinJ</a>使用的IP地址的硬编码列表使用<a href="https://github.com/bitcoin/bitcoin/tree/master/contrib/seeds" style="color: #2c6fad; text-decoration-line: none;">makeseeds脚本</a>生成。</span></div>
<h3 class=" anchorAf" id="connecting-to-peers" style="color: #383838; font-size: 20.8px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-1227">连接到同伴</span></h3>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_p2p_network.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-1228"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_p2p_network.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_p2p_network.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_p2p_network.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1229">通过发送包含你的版本号，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">区块</a>和当前时间的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#version" style="color: #2c6fad; text-decoration-line: none;" title="A P2P network message sent at the begining of a connection to allow protocol version negotiation"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">version</code>消息</a>给远处<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>来连接<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">同伴</a>。</span><span class="yiyi-st" id="yiyi-1230">远程<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>使用自己的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#version" style="color: #2c6fad; text-decoration-line: none;" title="A P2P network message sent at the begining of a connection to allow protocol version negotiation"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">版本</code>消息</a>进行响应。</span><span class="yiyi-st" id="yiyi-1231">然后，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>向另一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>发送<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#verack" style="color: #2c6fad; text-decoration-line: none;" title="A P2P network message sent in reply to a version message to confirm a connection has been established"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">verack</code>消息以指示连接已建立。</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1232">一旦连接，客户端可以发送到远程<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>&nbsp;<code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getaddr</code>和<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#addr" style="color: #2c6fad; text-decoration-line: none;" title="The P2P network message which relays IP addresses and port numbers of active nodes to other nodes and clients, allowing decentralized peer discovery."><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">addr</code>消息</a>来收集其他<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体 T4&gt;。</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1233">为了保持与<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">同伴</a>的连接，默认情况下，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>将在30分钟不活动之前向<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体</a>发送消息。</span><span class="yiyi-st" id="yiyi-1234">如果90分钟没有通过<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体</a>接收到消息，客户端将假定该连接已关闭。</span></div>
<h3 class=" anchorAf" id="initial-block-download" style="color: #383838; font-size: 20.8px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-1235">初始块下载</span></h3>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_p2p_network.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-1236"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_p2p_network.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_p2p_network.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_p2p_network.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1237">在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">完整节点</a>可以验证<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/confirmation-score" style="color: #2c6fad; text-decoration-line: none;" title="A score indicating the number of blocks on the best block chain that would need to be modified to remove or modify a particular transaction. A confirmed transaction has a confirmation score of one or higher.">未确认的事务</a>和最近开始的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>之前，必须下载并验证所有<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>1（在硬编码<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/genesis-block" style="color: #2c6fad; text-decoration-line: none;" title="The first block in the Bitcoin block chain.">生成块</a>之后的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>）到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">最佳块链</a>的当前尖端。</span><span class="yiyi-st" id="yiyi-1238">这是<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">初始块下载</a>（<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">IBD</a>）或初始同步。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1239">虽然“初始”一词意味着该方法只使用一次，但也可以在需要下载大量<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">的任何时候使用，例如，当先前追加</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>已经离线了很长时间。</span><span class="yiyi-st" id="yiyi-1240">在这种情况下，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>可以使用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">IBD</a>方法下载自上次上线以来生成的所有<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1241">Bitcoin Core使用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">IBD</a>方法，只要其本地<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">最佳块链</a>上的最后一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>有<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">块头</a>时间过去24小时以上。</span><span class="yiyi-st" id="yiyi-1242"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/release/v0.10.0" style="color: #2c6fad; text-decoration-line: none;">比特币核心0.10.0</a>还将执行<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">​​ IBD</a>，如果其本地<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">最佳块链</a>大于144&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>低于它的本地<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/header-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of block headers with each header linking to the header that preceded it; the most-difficult-to-recreate chain is the best header chain">最佳头链</a>（即，本地<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>过去超过约24小时）。</span></div>
<h4 class=" anchorAf" id="blocks-first" style="color: #383838; font-size: 17.6px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-1243">块优先</span></h4>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_p2p_network.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-1244"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_p2p_network.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_p2p_network.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_p2p_network.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1245">比特币核心（直到版本<a href="http://usyiyi.cn/documents/bitcoin/en/release/v0.9.3" style="color: #2c6fad; text-decoration-line: none;">0.9.3</a>）使用简单的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">初始块下载</a>（<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">IBD</a>）方法，我们称之为<em><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/blocks-first-sync" style="color: #2c6fad; text-decoration-line: none;" title="Synchronizing the block chain by downloading each block from a peer and then validating it.">blocks-first</a></em></span><span class="yiyi-st" id="yiyi-1246">目的是从<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">最佳块链</a>顺序下载<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>。</span></div>
<div style="line-height: 1.5em;">
<img alt="Overview Of Blocks-First Method" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-blocks-first-flowchart.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1247">第一次启动<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>时，它的本地<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">最佳块链</a>中仅具有单个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>&nbsp;- 硬编码的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/genesis-block" style="color: #2c6fad; text-decoration-line: none;" title="The first block in the Bitcoin block chain.">创世块</a>（<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/genesis-block" style="color: #2c6fad; text-decoration-line: none;" title="The first block in the Bitcoin block chain.">块0</a>）。</span><span class="yiyi-st" id="yiyi-1248"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>选择一个称为同步<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>的远程<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体 t&gt;，并发送</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getblocks" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to request an inv message containing a range of block header hashes"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getblocks</code>消息如下所示。</a></span></div>
<div style="line-height: 1.5em;">
<img alt="First GetBlocks Message Sent During IBD" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-ibd-getblocks.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1249">在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getblocks" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to request an inv message containing a range of block header hashes"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getblocks</code>消息</a>的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">头</a>散列字段中，这个新的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>发送<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">头</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/genesis-block" style="color: #2c6fad; text-decoration-line: none;" title="The first block in the Bitcoin block chain.">hash</a>（<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/internal-byte-order" style="color: #2c6fad; text-decoration-line: none;" title="The standard order in which hash digests are displayed as strings---the same format used in serialized blocks and transactions.">内部字节顺序</a>中的6fe2 ... 0000）。</span><span class="yiyi-st" id="yiyi-1250">它还将停止哈希字段设置为全零，以请求最大大小的响应。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1251">在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getblocks" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to request an inv message containing a range of block header hashes"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getblocks</code>消息</a>的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-receipt" style="color: #2c6fad; text-decoration-line: none;" title="A cryptographically-verifiable receipt created using parts of a payment request and a confirmed transaction">收据</a>之后，同步<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>取第一个（且仅）<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">哈希</a>，并使用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">标题</a>哈希查找其<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>的本地<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">最佳块链</a>。</span><span class="yiyi-st" id="yiyi-1252">它发现<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/genesis-block" style="color: #2c6fad; text-decoration-line: none;" title="The first block in the Bitcoin block chain.">块0</a>匹配，所以它回复500&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/inventory" style="color: #2c6fad; text-decoration-line: none;" title="A data type identifier and a hash; used to identify transactions and blocks available for download through the Bitcoin P2P network.">库存</a>（对<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getblocks" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to request an inv message containing a range of block header hashes"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getblocks的最大响应 message</code></a>）从<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>&nbsp;1开始。</span><span class="yiyi-st" id="yiyi-1253">它将这些<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/inventory" style="color: #2c6fad; text-decoration-line: none;" title="A data type identifier and a hash; used to identify transactions and blocks available for download through the Bitcoin P2P network.">库存</a>发送到下面所示的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#inv" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to send inventories of transactions and blocks known to the transmitting peer"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">inv</code>消息</a>。</span></div>
<div style="line-height: 1.5em;">
<img alt="First Inv Message Sent During IBD" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-ibd-inv.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1254"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/inventory" style="color: #2c6fad; text-decoration-line: none;" title="A data type identifier and a hash; used to identify transactions and blocks available for download through the Bitcoin P2P network.">库存</a>是<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>上的信息的唯一标识符。</span><span class="yiyi-st" id="yiyi-1255">每个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/inventory" style="color: #2c6fad; text-decoration-line: none;" title="A data type identifier and a hash; used to identify transactions and blocks available for download through the Bitcoin P2P network.">库存</a>包含一个类型字段和对象实例的唯一标识符。</span><span class="yiyi-st" id="yiyi-1256">对于<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>，唯一标识符是<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块的</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">头</a>的散列。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1257"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/inventory" style="color: #2c6fad; text-decoration-line: none;" title="A data type identifier and a hash; used to identify transactions and blocks available for download through the Bitcoin P2P network.">库存</a>出现在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#inv" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to send inventories of transactions and blocks known to the transmitting peer"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">inv</code>消息</a>中，与<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>，所以第一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#inv" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to send inventories of transactions and blocks known to the transmitting peer"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">inv</code>消息</a>包含<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>&nbsp;1到501的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/inventory" style="color: #2c6fad; text-decoration-line: none;" title="A data type identifier and a hash; used to identify transactions and blocks available for download through the Bitcoin P2P network.">库存</a>。</span><span class="yiyi-st" id="yiyi-1258">（例如，如上图所示，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>&nbsp;1的散列为4860 ... 0000）</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1259"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">IBD</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>使用接收的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/inventory" style="color: #2c6fad; text-decoration-line: none;" title="A data type identifier and a hash; used to identify transactions and blocks available for download through the Bitcoin P2P network.">库存 t&gt;从sync&nbsp;</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>请求128&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>在下面说明的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getdata" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to request one or more transactions, blocks, or merkle blocks"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getdata</code>消息</a>中。</span></div>
<div style="line-height: 1.5em;">
<img alt="First GetData Message Sent During IBD" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-ibd-getdata.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1260"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/blocks-first-sync" style="color: #2c6fad; text-decoration-line: none;" title="Synchronizing the block chain by downloading each block from a peer and then validating it.">块首先</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>重要的是请求并发送<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>，因为每个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">块头</a>引用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">头</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain."></a>。</span><span class="yiyi-st" id="yiyi-1261">这意味着<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">IBD</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>无法完全验证<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>，直到其父<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>已被接收为止。</span><span class="yiyi-st" id="yiyi-1262"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">阻止</a>由于父节点未被接收而无法验证，称为<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/orphan-block" style="color: #2c6fad; text-decoration-line: none;" title="Blocks whose parent block has not been processed by the local node, so they can't be fully validated yet.">孤儿块</a>；下面的小节更详细地描述它们。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1263">在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getdata" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to request one or more transactions, blocks, or merkle blocks"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getdata</code>消息</a>的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-receipt" style="color: #2c6fad; text-decoration-line: none;" title="A cryptographically-verifiable receipt created using parts of a payment request and a confirmed transaction">收据</a>之后，同步<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>回复每个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块请求。</a></span><span class="yiyi-st" id="yiyi-1264">每个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>被放入<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/serialized-block" style="color: #2c6fad; text-decoration-line: none;" title="A complete block in its binary format---the same format used to calculate total block byte size; often represented using hexadecimal.">串行化块</a>格式，并以单独的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#block" style="color: #2c6fad; text-decoration-line: none;" title="The P2P network message which sends a serialized block"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">块</code>消息</a>发送。</span><span class="yiyi-st" id="yiyi-1265">发送的第一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#block" style="color: #2c6fad; text-decoration-line: none;" title="The P2P network message which sends a serialized block"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">块</code>消息</a>（对于<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>&nbsp;1）如下所示。</span></div>
<div style="line-height: 1.5em;">
<img alt="First Block Message Sent During IBD" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-ibd-block.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1266"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">IBD</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>下载每个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>，验证它，然后请求尚未请求的下一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>&nbsp;，保持高达128&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>的队列下载。</span><span class="yiyi-st" id="yiyi-1267">当它请求了它具有<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/inventory" style="color: #2c6fad; text-decoration-line: none;" title="A data type identifier and a hash; used to identify transactions and blocks available for download through the Bitcoin P2P network.">库存</a>的每个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>时，它向另一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getblocks" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to request an inv message containing a range of block header hashes"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getblocks</code>消息</a>发送到同步<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>请求最多500个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/inventory" style="color: #2c6fad; text-decoration-line: none;" title="A data type identifier and a hash; used to identify transactions and blocks available for download through the Bitcoin P2P network.">库存</a>。</span><span class="yiyi-st" id="yiyi-1268">第二个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getblocks" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to request an inv message containing a range of block header hashes"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getblocks</code>消息</a>包含多个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">头</a>哈希，如下所示：</span></div>
<div style="line-height: 1.5em;">
<img alt="Second GetBlocks Message Sent During IBD" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-ibd-getblocks2.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1269">在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-receipt" style="color: #2c6fad; text-decoration-line: none;" title="A cryptographically-verifiable receipt created using parts of a payment request and a confirmed transaction">收到</a>第二个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getblocks" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to request an inv message containing a range of block header hashes"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getblocks</code>消息</a>之后，同步<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>搜索其本地的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">最佳块链</a>对于<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>，匹配消息中的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">头</a>散列之一，按照接收的顺序尝试每个哈希。</span><span class="yiyi-st" id="yiyi-1270">如果找到匹配的散列，则从那个点开始，以<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>开头的500&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/inventory" style="color: #2c6fad; text-decoration-line: none;" title="A data type identifier and a hash; used to identify transactions and blocks available for download through the Bitcoin P2P network.">库存</a>进行回复。</span><span class="yiyi-st" id="yiyi-1271">但是如果没有匹配的散列（除了停止散列）之外，它假设只有<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>，两个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>有共同的是<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/genesis-block" style="color: #2c6fad; text-decoration-line: none;" title="The first block in the Bitcoin block chain.">块0</a>，所以它从<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>&nbsp;1（相同的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#inv" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to send inventories of transactions and blocks known to the transmitting peer"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">inv</code>消息</a>开始 t&gt;发送<code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">inv</code>，见上面的几个插图）。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1272">即使<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">IBD</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点的</a>本地<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链，该重复搜索也允许sync&nbsp;</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>发送有用的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/inventory" style="color: #2c6fad; text-decoration-line: none;" title="A data type identifier and a hash; used to identify transactions and blocks available for download through the Bitcoin P2P network.">库存</a>&nbsp;从<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点的</a>本地<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>分支。</span><span class="yiyi-st" id="yiyi-1273"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">IBD</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>越来越接近<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>的尖端，这种<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/fork" style="color: #2c6fad; text-decoration-line: none;" title="When two or more blocks have the same block height, forking the block chain. Typically occurs when two or more miners find blocks at nearly the same time. Can also happen as part of an attack.">fork</a>检测变得越来越有用。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1274">当<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">IBD</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>收到第二个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#inv" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to send inventories of transactions and blocks known to the transmitting peer"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">inv</code>消息</a>时，它将请求那些<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>使用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getdata" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to request one or more transactions, blocks, or merkle blocks"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getdata</code>消息</a>。</span><span class="yiyi-st" id="yiyi-1275">同步<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>将响应<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#block" style="color: #2c6fad; text-decoration-line: none;" title="The P2P network message which sends a serialized block"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">块</code>消息</a>。</span><span class="yiyi-st" id="yiyi-1276">然后，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">IBD</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>将使用另一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getblocks" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to request an inv message containing a range of block header hashes"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getblocks</code>消息</a>请求更多的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/inventory" style="color: #2c6fad; text-decoration-line: none;" title="A data type identifier and a hash; used to identify transactions and blocks available for download through the Bitcoin P2P network.">库存</a>循环将重复，直到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">IBD</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>同步到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>的尖端。</span><span class="yiyi-st" id="yiyi-1277">此时，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>将接受通过稍后小节中描述的常规<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>广播发送的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>。</span></div>
<h5 class="no_toc anchorAf" id="blocks-first-advantages--disadvantages" style="color: #383838; font-size: 16px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-1278">块优先的优点和缺点</span></h5>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_p2p_network.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-1279"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_p2p_network.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_p2p_network.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_p2p_network.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1280"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/blocks-first-sync" style="color: #2c6fad; text-decoration-line: none;" title="Synchronizing the block chain by downloading each block from a peer and then validating it.">block-first IBD</a>的主要优点是其简单性。</span><span class="yiyi-st" id="yiyi-1281">主要缺点是<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">IBD</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>依赖于单个同步<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>进行下载。</span><span class="yiyi-st" id="yiyi-1282">这有几个含义：</span></div>
<ul style="margin-left: 0px; padding-left: 20px;">
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1283"><strong>速度限制：</strong>所有请求都发送到同步<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>，所以如果同步<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>的上传带宽有限，则<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>将具有较慢的下载速度。</span><span class="yiyi-st" id="yiyi-1284">注意：如果同步<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>脱机，Bitcoin Core将继续从另一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>下载，但它仍然只能从单个同步<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>一次</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1285"><strong>下载重新启动：</strong>同步<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>可以向<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">IBD</a>发送非最佳（但有效的）<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点。</a></span><span class="yiyi-st" id="yiyi-1286"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">IBD</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>将无法将其识别为非最佳状态，直到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">初始块下载</a>接近完成，迫使<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">IBD&nbsp;</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>从不同的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>再次重新启动<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>下载。</span><span class="yiyi-st" id="yiyi-1287">Bitcoin Core在开发人员选择的各种<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-height" style="color: #2c6fad; text-decoration-line: none;" title="The number of blocks preceding a particular block on a block chain. For example, the genesis block has a height of zero because zero block preceded it.">块高度</a>中附带了多个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>检查点，以帮助<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">IBD</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>检测到它正在馈送一个替代的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>历史，允许<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">IBD</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>在该过程的前面重新启动它的下载。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1288"><strong>磁盘填充攻击：</strong>与下载重新启动密切相关，如果同步<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>发送非最佳（但有效）的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>，则链将被存储在磁盘上，浪费空间，并可能用无用数据填充磁盘驱动器。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1289"><strong>高内存使用：</strong>无论是恶意还是意外，同步<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>可以发送<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>，从而创建<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/orphan-block" style="color: #2c6fad; text-decoration-line: none;" title="Blocks whose parent block has not been processed by the local node, so they can't be fully validated yet.">孤儿块，在父母被接受和验证之前无法验证。</a></span><span class="yiyi-st" id="yiyi-1290"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/orphan-block" style="color: #2c6fad; text-decoration-line: none;" title="Blocks whose parent block has not been processed by the local node, so they can't be fully validated yet.">孤立块</a>存储在内存中，同时等待验证，这可能导致高内存使用。</span></div>
</li>
</ul>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1291">所有这些问题部分或全部由<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/release/v0.10.0" style="color: #2c6fad; text-decoration-line: none;">Bitcoin Core 0.10.0</a>中使用的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/headers-first-sync" style="color: #2c6fad; text-decoration-line: none;" title="Synchronizing the block chain by downloading block headers before downloading the full blocks.">头 - 第一个IBD</a>方法解决。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1292"><strong>资源：</strong>下表总结了本小节提及的消息。</span><span class="yiyi-st" id="yiyi-1293">消息字段中的链接将带您进入该消息的参考页面。</span></div>
<table style="border-collapse: collapse; border-spacing: 0px; line-height: 1.5em;"><tbody>
<tr><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1294"><strong>Message</strong></span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1295"><a href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getblocks" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to request an inv message containing a range of block header hashes"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getblocks</code></a></span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1296"><a href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#inv" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to send inventories of transactions and blocks known to the transmitting peer"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">inv</code></a></span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1297"><a href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getdata" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to request one or more transactions, blocks, or merkle blocks"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getdata</code></a></span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1298"><a href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#block" style="color: #2c6fad; text-decoration-line: none;" title="The P2P network message which sends a serialized block"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">block</code></a></span></td></tr>
<tr><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1299"><strong>From→To</strong></span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1300"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">IBD</a>→Sync</span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1301">Sync→<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">IBD</a></span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1302"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">IBD</a>→Sync</span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1303">Sync→<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">IBD</a></span></td></tr>
<tr><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1304"><strong>有效载荷</strong></span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1305">一个或多个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">头</a>散列</span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1306">最多500&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/inventory" style="color: #2c6fad; text-decoration-line: none;" title="A data type identifier and a hash; used to identify transactions and blocks available for download through the Bitcoin P2P network.">库存</a>（唯一标识符）</span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1307">一个或多个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/inventory" style="color: #2c6fad; text-decoration-line: none;" title="A data type identifier and a hash; used to identify transactions and blocks available for download through the Bitcoin P2P network.">库存</a></span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1308">一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/serialized-block" style="color: #2c6fad; text-decoration-line: none;" title="A complete block in its binary format---the same format used to calculate total block byte size; often represented using hexadecimal.">序列化块</a></span></td></tr>
</tbody></table>
<h4 class=" anchorAf" id="headers-first" style="color: #383838; font-size: 17.6px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-1309">块头优先</span></h4>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_p2p_network.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-1310"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_p2p_network.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_p2p_network.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_p2p_network.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1311"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/release/v0.10.0" style="color: #2c6fad; text-decoration-line: none;">Bitcoin Core 0.10.0</a>使用名为<em><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/headers-first-sync" style="color: #2c6fad; text-decoration-line: none;" title="Synchronizing the block chain by downloading block headers before downloading the full blocks.">headers-first</a></em>的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">初始块下载</a>（<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">IBD</a>）方法。</span><span class="yiyi-st" id="yiyi-1312">目标是下载最佳<a class="term" href="http://usyiyi.cn/documents/bitcoin/en/glossary/header-chain" id="term-header-chain" style="color: black; text-decoration-line: none;" title="A chain of block headers with each header linking to the header that preceded it; the most-difficult-to-recreate chain is the best header chain">头链</a>的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">标头</a>，尽可能地最大限度地验证它们，然后并行下载相应的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>&nbsp;。</span><span class="yiyi-st" id="yiyi-1313">这解决了旧的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/blocks-first-sync" style="color: #2c6fad; text-decoration-line: none;" title="Synchronizing the block chain by downloading each block from a peer and then validating it.">block-first IBD</a>方法的几个问题。</span></div>
<div style="line-height: 1.5em;">
<img alt="Overview Of Headers-First Method" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-headers-first-flowchart.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1314">第一次启动<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>时，它的本地<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">最佳块链</a>中仅具有单个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>&nbsp;- 硬编码的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/genesis-block" style="color: #2c6fad; text-decoration-line: none;" title="The first block in the Bitcoin block chain.">创世块</a>（<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/genesis-block" style="color: #2c6fad; text-decoration-line: none;" title="The first block in the Bitcoin block chain.">块0</a>）。</span><span class="yiyi-st" id="yiyi-1315"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>选择一个远程<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体</a>，我们称之为<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>，并发送<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getheaders" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to request a range of block headers"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getheaders 消息</code></a>如下所示。</span></div>
<div style="line-height: 1.5em;">
<img alt="First getheaders message" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-ibd-getheaders.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1316">在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getheaders" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to request a range of block headers"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getheaders</code>消息</a>的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">头</a>散列字段中，新的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>发送<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">头</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/genesis-block" style="color: #2c6fad; text-decoration-line: none;" title="The first block in the Bitcoin block chain.">创世块</a>（<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/internal-byte-order" style="color: #2c6fad; text-decoration-line: none;" title="The standard order in which hash digests are displayed as strings---the same format used in serialized blocks and transactions.">内部字节顺序</a>中的6fe2 ... 0000）。</span><span class="yiyi-st" id="yiyi-1317">它还将停止哈希字段设置为全零，以请求最大大小的响应。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1318">在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getheaders" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to request a range of block headers"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getheaders</code>消息</a>的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-receipt" style="color: #2c6fad; text-decoration-line: none;" title="A cryptographically-verifiable receipt created using parts of a payment request and a confirmed transaction">收据</a>之后，同步<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>取第一个（且仅）<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work."></a>哈希，并使用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">标题</a>哈希查找其<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>的本地<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">最佳块链</a>。</span><span class="yiyi-st" id="yiyi-1319">它发现<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/genesis-block" style="color: #2c6fad; text-decoration-line: none;" title="The first block in the Bitcoin block chain.">块0</a>匹配，所以它从<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>&nbsp;1开始的2000&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">头</a>（最大响应）回复。</span><span class="yiyi-st" id="yiyi-1320">它将这些<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">标题</a>散列在下面所示的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#headers" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message containing one or more block headers"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">标题</code>消息</a>中。</span></div>
<div style="line-height: 1.5em;">
<img alt="First headers message" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-ibd-headers.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1321"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">IBD</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>可以通过确保所有字段遵循<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/consensus-rules" style="color: #2c6fad; text-decoration-line: none;" title="The block validation rules that full nodes follow to stay in consensus with other nodes.">共识规则</a>来部分地验证这些<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">块标题</a>，并且根据<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/nbits" style="color: #2c6fad; text-decoration-line: none;" title="The target is the threshold below which a block header hash must be in order for the block to valid, and nBits is the encoded form of the target threshold as it appears in the block header.">nBits</a>字段，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">头</a>低于<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/nbits" style="color: #2c6fad; text-decoration-line: none;" title="The target is the threshold below which a block header hash must be in order for the block to valid, and nBits is the encoded form of the target threshold as it appears in the block header.">目标阈值</a>。</span><span class="yiyi-st" id="yiyi-1322">（完全验证仍然需要相应的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>的所有事务。）</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1323">在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">IBD</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>部分验证了<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">块头</a>之后，它可以并行执行两件事：</span></div>
<ol style="margin-left: 0px; padding-left: 20px;">
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1324"><strong>下载更多<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">标头</a>：</strong>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">IBD</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>可以发送另一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getheaders" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to request a range of block headers"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getheaders</code>消息</a>到同步<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>，以请求<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/header-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of block headers with each header linking to the header that preceded it; the most-difficult-to-recreate chain is the best header chain">最佳头链</a>上的下一个2,000&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">头</a>。</span><span class="yiyi-st" id="yiyi-1325">那些<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">头</a>可以立即验证，另一个批次重复请求，直到从同步<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>收到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#headers" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message containing one or more block headers"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">头</code>消息</a>少于2,000个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">头</a>，表示它不再提供<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">头</a>。</span><span class="yiyi-st" id="yiyi-1326">在撰写本文时，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">标题</a>同步可以在少于200次往返，或约32 MB的下载数据中完成。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1327">一旦<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">IBD</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>收到一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#headers" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message containing one or more block headers"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">头</code>消息</a>，小于2,000&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">头</a>同步<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>，它向每个出站<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体</a>发送<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getheaders" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to request a range of block headers"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getheaders</code>消息，以获得</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/header-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of block headers with each header linking to the header that preceded it; the most-difficult-to-recreate chain is the best header chain">最佳头链</a>。</span><span class="yiyi-st" id="yiyi-1328">通过比较响应，可以很容易地确定它已经下载的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">头</a>是否属于其任何出站<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体</a>报告的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/header-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of block headers with each header linking to the header that preceded it; the most-difficult-to-recreate chain is the best header chain">最佳头链</a>。</span><span class="yiyi-st" id="yiyi-1329">这意味着即使不使用检查点，也将很快发现不诚实的同步<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>（只要<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">IBD</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>连接至少一个诚实的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体</a>；比特币核心将继续提供检查点，以防无法找到诚实的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体</a>。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1330"><strong>下载<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>：</strong>当<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">IBD</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>继续下载<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">头</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">头</a>完成下载，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">IBD</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>将请求并下载每个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>。</span><span class="yiyi-st" id="yiyi-1331"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">IBD</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>可以使用从<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/header-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of block headers with each header linking to the header that preceded it; the most-difficult-to-recreate chain is the best header chain">头链</a>计算出的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">块头</a>来创建<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getdata" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to request one or more transactions, blocks, or merkle blocks"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;"></code>消息请求</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>需要<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/inventory" style="color: #2c6fad; text-decoration-line: none;" title="A data type identifier and a hash; used to identify transactions and blocks available for download through the Bitcoin P2P network.">库存</a>。</span><span class="yiyi-st" id="yiyi-1332">它不需要从同步<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>请求它们 - 可以从任何<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">完整节点</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体</a>请求它们。</span><span class="yiyi-st" id="yiyi-1333">（尽管不是全部<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>可能存储所有<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>。）</span><span class="yiyi-st" id="yiyi-1334">这允许它并行获取<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>，并避免将其下载速度限制为单个同步<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>的上传速度。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1335">为了在多个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体</a>之间传播负载，Bitcoin Core将一次只能从单个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体</a>请求最多16个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>。</span><span class="yiyi-st" id="yiyi-1336">结合最多8个出站连接，这意味着<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/headers-first-sync" style="color: #2c6fad; text-decoration-line: none;" title="Synchronizing the block chain by downloading block headers before downloading the full blocks.">headers-first</a>&nbsp;BitCol Core将在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">IBD</a>期间同时请求最多128个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>（相同比特币核心从其同步<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>请求的最大数字<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/blocks-first-sync" style="color: #2c6fad; text-decoration-line: none;" title="Synchronizing the block chain by downloading each block from a peer and then validating it.">块首先</a>。</span></div>
</li>
</ol>
<div style="line-height: 1.5em;">
<img alt="Simulated Headers-First Download Window" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-headers-first-moving-window.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1337">Bitcoin Core的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/headers-first-sync" style="color: #2c6fad; text-decoration-line: none;" title="Synchronizing the block chain by downloading block headers before downloading the full blocks.">头 - 第一个</a>模式使用1,024-&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>移动下载窗口来最大限度地提高下载速度。</span><span class="yiyi-st" id="yiyi-1338">窗口中最低的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-height" style="color: #2c6fad; text-decoration-line: none;" title="The number of blocks preceding a particular block on a block chain. For example, the genesis block has a height of zero because zero block preceded it.">高度</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>是待验证的下一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>如果在比特币核心准备好验证它之后，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>尚未到达，Bitcoin Core将等待至少两秒以上，停止<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>发送<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>。</span><span class="yiyi-st" id="yiyi-1339">如果<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>尚未到达，Bitcoin Core将与停止的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>断开连接，并尝试连接到另一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>。</span><span class="yiyi-st" id="yiyi-1340">例如，在上述图示中，如果<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">Node</a>&nbsp;A在至少两秒钟内不发送<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>&nbsp;3将断开连接。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1341">一旦将<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">IBD</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>同步到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">块链</a>的末尾，它将接受通过常规发送的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">block</a>在后面的小节中描述的广播。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1342"><strong>资源：</strong>下表总结了本小节提及的消息。</span><span class="yiyi-st" id="yiyi-1343">消息字段中的链接将带您进入该消息的参考页面。</span></div>
<table style="border-collapse: collapse; border-spacing: 0px; line-height: 1.5em;"><tbody>
<tr><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1344"><strong>Message</strong></span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1345"><a href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getheaders" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to request a range of block headers"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getheaders</code></a></span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1346"><a href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#headers" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message containing one or more block headers"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">headers</code></a></span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1347"><a href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getdata" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to request one or more transactions, blocks, or merkle blocks"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getdata</code></a></span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1348"><a href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#block" style="color: #2c6fad; text-decoration-line: none;" title="The P2P network message which sends a serialized block"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">block</code></a></span></td></tr>
<tr><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1349"><strong>From→To</strong></span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1350"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">IBD</a>→Sync</span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1351">Sync→<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">IBD</a></span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1352"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">IBD</a>→<em>Many</em></span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1353"><em>Many</em>→<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/initial-block-download" style="color: #2c6fad; text-decoration-line: none;" title="The process used by a new node (or long-offline node) to download a large number of blocks to catch up to the tip of the best block chain.">IBD</a></span></td></tr>
<tr><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1354"><strong>有效载荷</strong></span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1355">一个或多个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">头</a>散列</span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1356">最多2,000个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">块头</a></span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1357">从<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">头</a>散列的一个或多个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/inventory" style="color: #2c6fad; text-decoration-line: none;" title="A data type identifier and a hash; used to identify transactions and blocks available for download through the Bitcoin P2P network.">库存</a></span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1358">一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/serialized-block" style="color: #2c6fad; text-decoration-line: none;" title="A complete block in its binary format---the same format used to calculate total block byte size; often represented using hexadecimal.">序列化块</a></span></td></tr>
</tbody></table>
<h3 class=" anchorAf" id="block-broadcasting" style="color: #383838; font-size: 20.8px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-1359">块广播</span></h3>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_p2p_network.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-1360"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_p2p_network.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_p2p_network.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_p2p_network.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1361">当<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">矿工</a>发现新的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>时，使用以下方法之一向<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体</a>广播新的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>&nbsp;：</span></div>
<ul style="margin-left: 0px; padding-left: 20px;">
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1362"><strong><a class="term" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-unsolicited-block-push" id="term-unsolicited-block-push" style="color: black; text-decoration-line: none;" title="When a miner sends a block message without sending an inv message first">主动阻止推送</a>：</strong>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">矿工</a>将<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#block" style="color: #2c6fad; text-decoration-line: none;" title="The P2P network message which sends a serialized block"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">块</code>消息</a>发送到其每个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">全部节点</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体</a>与新的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>。</span><span class="yiyi-st" id="yiyi-1363"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">miner</a>可以以这种方式合理地绕过标准中继方法，因为它知道其<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体</a>中没有一个刚刚发现的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1364"><strong><a class="term" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-standard-block-relay" id="term-standard-block-relay" style="color: black; text-decoration-line: none;" title="The regular block relay method: announcing a block with an inv message and waiting for a response">标准块中继器</a>：</strong>作为标准中继器<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">矿工</a>发送<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#inv" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to send inventories of transactions and blocks known to the transmitting peer"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">inv</code>消息</a>到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体</a>（<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">全节点</a>和<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/simplified-payment-verification" style="color: #2c6fad; text-decoration-line: none;" title="A method for verifying if particular transactions are included in a block without downloading the entire block. The method is used by some lightweight Bitcoin clients.">SPV</a>），&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/inventory" style="color: #2c6fad; text-decoration-line: none;" title="A data type identifier and a hash; used to identify transactions and blocks available for download through the Bitcoin P2P network."></a>参考新的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>。</span><span class="yiyi-st" id="yiyi-1365">最常见的答案是：</span></div>
<ul style="list-style-type: disc; margin-left: 0px; padding-left: 20px;">
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1366">希望<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/blocks-first-sync" style="color: #2c6fad; text-decoration-line: none;" title="Synchronizing the block chain by downloading each block from a peer and then validating it.">块优先</a>（BF）<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体</a>使用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getdata" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to request one or more transactions, blocks, or merkle blocks"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getdata</code>消息请求完整的</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1367">希望<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/headers-first-sync" style="color: #2c6fad; text-decoration-line: none;" title="Synchronizing the block chain by downloading block headers before downloading the full blocks.">首标</a>（HF）<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体</a>回复<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getheaders" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to request a range of block headers"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getheaders</code>消息包含</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/header-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of block headers with each header linking to the header that preceded it; the most-difficult-to-recreate chain is the best header chain">最佳头链</a>中最高<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-height" style="color: #2c6fad; text-decoration-line: none;" title="The number of blocks preceding a particular block on a block chain. For example, the genesis block has a height of zero because zero block preceded it.">高度</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">头</a>的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">头</a>哈希，可能还有一些<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">标头</a>进一步回到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/header-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of block headers with each header linking to the header that preceded it; the most-difficult-to-recreate chain is the best header chain">最佳标题链</a>，以允许<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/fork" style="color: #2c6fad; text-decoration-line: none;" title="When two or more blocks have the same block height, forking the block chain. Typically occurs when two or more miners find blocks at nearly the same time. Can also happen as part of an attack.">fork</a>检测。</span><span class="yiyi-st" id="yiyi-1368">那个消息紧随其后是<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getdata" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to request one or more transactions, blocks, or merkle blocks"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getdata</code>消息</a>请求完整的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>。</span><span class="yiyi-st" id="yiyi-1369">首先请求<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">头</a>，如下面的小节所述，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/headers-first-sync" style="color: #2c6fad; text-decoration-line: none;" title="Synchronizing the block chain by downloading block headers before downloading the full blocks.">headers-first</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体</a>可以拒绝<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/orphan-block" style="color: #2c6fad; text-decoration-line: none;" title="Blocks whose parent block has not been processed by the local node, so they can't be fully validated yet.">孤儿块</a>。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1370">希望<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/simplified-payment-verification" style="color: #2c6fad; text-decoration-line: none;" title="A method for verifying if particular transactions are included in a block without downloading the entire block. The method is used by some lightweight Bitcoin clients.">简化付款验证</a>（<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/simplified-payment-verification" style="color: #2c6fad; text-decoration-line: none;" title="A method for verifying if particular transactions are included in a block without downloading the entire block. The method is used by some lightweight Bitcoin clients.">SPV</a>）客户端使用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getdata" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to request one or more transactions, blocks, or merkle blocks"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getdata</code>消息 t3&gt;通常请求</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/merkle-block" style="color: #2c6fad; text-decoration-line: none;" title="A partial merkle tree connecting transactions matching a bloom filter to the merkle root of a block.">merkle块</a>。</span></div>
</li>
</ul>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1371"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">矿工</a>通过在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#block" style="color: #2c6fad; text-decoration-line: none;" title="The P2P network message which sends a serialized block"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">块</code>消息</a>中发送<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>来相应地回复每个请求，一个或多个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#headers" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message containing one or more block headers"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">头</code>消息</a>或<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/merkle-block" style="color: #2c6fad; text-decoration-line: none;" title="A partial merkle tree connecting transactions matching a bloom filter to the merkle root of a block.">merkle块</a>中的头以及相对于<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/simplified-payment-verification" style="color: #2c6fad; text-decoration-line: none;" title="A method for verifying if particular transactions are included in a block without downloading the entire block. The method is used by some lightweight Bitcoin clients.">SPV客户端</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/bloom-filter" style="color: #2c6fad; text-decoration-line: none;" title="A filter used primarily by SPV clients to request only matching transactions and merkle blocks from full nodes.">bloom filter</a>在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#merkleblock" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to request a filtered block useful for SPV proofs"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">merkleblock</code>消息</a>后跟零个或多个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#tx" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message which sends a single serialized transaction"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">tx</code>消息</a>。</span></div>
</li>
</ul>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1372">默认情况下，Bitcoin Core使用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-standard-block-relay" style="color: #2c6fad; text-decoration-line: none;" title="The regular block relay method: announcing a block with an inv message and waiting for a response">标准块中继</a>广播<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>，但它将接受使用上述方法发送的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1373">完整<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>使用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-standard-block-relay" style="color: #2c6fad; text-decoration-line: none;" title="The regular block relay method: announcing a block with an inv message and waiting for a response">标准块中继</a>方法验证所接收的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>，然后将其通告给它们的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体</a>。</span><span class="yiyi-st" id="yiyi-1374">下面的汇总表突出显示了上述消息的操作（Relay，BF，HF和<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/simplified-payment-verification" style="color: #2c6fad; text-decoration-line: none;" title="A method for verifying if particular transactions are included in a block without downloading the entire block. The method is used by some lightweight Bitcoin clients.">SPV</a>是指继电器<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>，一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/blocks-first-sync" style="color: #2c6fad; text-decoration-line: none;" title="Synchronizing the block chain by downloading each block from a peer and then validating it."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/headers-first-sync" style="color: #2c6fad; text-decoration-line: none;" title="Synchronizing the block chain by downloading block headers before downloading the full blocks.">首标</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>和<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/simplified-payment-verification" style="color: #2c6fad; text-decoration-line: none;" title="A method for verifying if particular transactions are included in a block without downloading the entire block. The method is used by some lightweight Bitcoin clients.">SPV客户端</a>；&nbsp;<em>任何</em>使用任何<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>检索方法<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>）</span></div>
<table style="border-collapse: collapse; border-spacing: 0px; line-height: 1.5em;"><tbody>
<tr><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1375"><strong>Message</strong></span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1376"><a href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#inv" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to send inventories of transactions and blocks known to the transmitting peer"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">inv</code></a></span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1377"><a href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getdata" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to request one or more transactions, blocks, or merkle blocks"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getdata</code></a></span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1378"><a href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getheaders" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to request a range of block headers"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getheaders</code></a></span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1379"><a href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#headers" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message containing one or more block headers"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">headers</code></a></span></td></tr>
<tr><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1380"><strong>From→To</strong></span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1381">Relay→<em>Any</em></span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1382">BF→Relay</span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1383">HF→Relay</span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1384">Relay→HF</span></td></tr>
<tr><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1385"><strong>有效载荷</strong></span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1386">新<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/inventory" style="color: #2c6fad; text-decoration-line: none;" title="A data type identifier and a hash; used to identify transactions and blocks available for download through the Bitcoin P2P network.">库存</a></span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1387">新<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/inventory" style="color: #2c6fad; text-decoration-line: none;" title="A data type identifier and a hash; used to identify transactions and blocks available for download through the Bitcoin P2P network.">库存</a></span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1388">HF&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点的</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/header-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of block headers with each header linking to the header that preceded it; the most-difficult-to-recreate chain is the best header chain">最佳头链</a>（BHC）上的一个或多个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">头</a>散列</span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1389">将HF&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点的</a>BHC连接到继电器<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点的</a>&nbsp;BHC的最多2,000个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">头</a></span></td></tr>
<tr><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1390"><strong>消息</strong></span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1391"><a href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#block" style="color: #2c6fad; text-decoration-line: none;" title="The P2P network message which sends a serialized block"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">block</code></a></span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1392"><a href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#merkleblock" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to request a filtered block useful for SPV proofs"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">merkleblock</code></a></span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1393"><a href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#tx" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message which sends a single serialized transaction"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">tx</code></a></span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"></td></tr>
<tr><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1394"><strong>From→To</strong></span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1395">Relay→BF/HF</span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1396">Relay→<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/simplified-payment-verification" style="color: #2c6fad; text-decoration-line: none;" title="A method for verifying if particular transactions are included in a block without downloading the entire block. The method is used by some lightweight Bitcoin clients.">SPV</a></span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1397">Relay→<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/simplified-payment-verification" style="color: #2c6fad; text-decoration-line: none;" title="A method for verifying if particular transactions are included in a block without downloading the entire block. The method is used by some lightweight Bitcoin clients.">SPV</a></span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"></td></tr>
<tr><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1398"><strong>有效载荷</strong></span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1399"><a href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#serialized-blocks" style="color: #2c6fad; text-decoration-line: none;">序列化格式</a>中的新<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a></span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1400">新的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>过滤成<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/merkle-block" style="color: #2c6fad; text-decoration-line: none;" title="A partial merkle tree connecting transactions matching a bloom filter to the merkle root of a block.">merkle块</a></span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"><span class="yiyi-st" id="yiyi-1401"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/serialized-transaction" style="color: #2c6fad; text-decoration-line: none;" title="Complete transactions in their binary format; often represented using hexadecimal. Sometimes called raw format because of the various Bitcoin Core commands with &quot;raw&quot; in their names.">与</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/bloom-filter" style="color: #2c6fad; text-decoration-line: none;" title="A filter used primarily by SPV clients to request only matching transactions and merkle blocks from full nodes.">bloom filter</a>匹配的新的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>中的序列化事务</span></td><td style="border: 1px solid rgb(221, 221, 221); padding: 10px;"></td></tr>
</tbody></table>
<h4 class=" anchorAf" id="orphan-blocks" style="color: #383838; font-size: 17.6px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-1402">孤儿块</span></h4>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_p2p_network.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-1403"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_p2p_network.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_p2p_network.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_p2p_network.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1404"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/blocks-first-sync" style="color: #2c6fad; text-decoration-line: none;" title="Synchronizing the block chain by downloading each block from a peer and then validating it.">块优先</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>可以下载<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/orphan-block" style="color: #2c6fad; text-decoration-line: none;" title="Blocks whose parent block has not been processed by the local node, so they can't be fully validated yet."></a>&nbsp;-&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>，其<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#term-previous-block-header-hash" style="color: #2c6fad; text-decoration-line: none;" title="A field in the block header which contains the SHA256(SHA256()) hash of the previous block's header">前一个块头散列</a>字段是指<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">块头</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>尚未看到。</span><span class="yiyi-st" id="yiyi-1405">换句话说，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/orphan-block" style="color: #2c6fad; text-decoration-line: none;" title="Blocks whose parent block has not been processed by the local node, so they can't be fully validated yet.">孤儿块</a>没有已知的父（不同于<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/stale-block" style="color: #2c6fad; text-decoration-line: none;" title="Blocks which were successfully mined but which aren't included on the current best block chain, likely because some other block at the same height had its chain extended first.">陈旧块</a>，它们已知父，但不属于<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">最佳块链）。</a></span></div>
<div style="line-height: 1.5em;">
<img alt="Difference Between Orphan And Stale Blocks" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-orphan-stale-definition.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1406">当<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/blocks-first-sync" style="color: #2c6fad; text-decoration-line: none;" title="Synchronizing the block chain by downloading each block from a peer and then validating it.">block-first</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>下载<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/orphan-block" style="color: #2c6fad; text-decoration-line: none;" title="Blocks whose parent block has not been processed by the local node, so they can't be fully validated yet.">孤儿块</a>时，它不会对其进行验证。</span><span class="yiyi-st" id="yiyi-1407">而是将<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getblocks" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to request an inv message containing a range of block header hashes"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getblocks</code>消息</a>发送到发送<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/orphan-block" style="color: #2c6fad; text-decoration-line: none;" title="Blocks whose parent block has not been processed by the local node, so they can't be fully validated yet.">孤儿块</a>的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>；广播<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>将使用包含任何<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/inventory" style="color: #2c6fad; text-decoration-line: none;" title="A data type identifier and a hash; used to identify transactions and blocks available for download through the Bitcoin P2P network.">库存</a>的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#inv" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to send inventories of transactions and blocks known to the transmitting peer"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">inv</code>消息缺少</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>（最多500个）；下载<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>将使用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getdata" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to request one or more transactions, blocks, or merkle blocks"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getdata</code>消息</a>请求<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>；并且广播<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>将使用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#block" style="color: #2c6fad; text-decoration-line: none;" title="The P2P network message which sends a serialized block"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">块</code>消息</a>发送那些<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>。</span><span class="yiyi-st" id="yiyi-1408">下载<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>将验证那些<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>，一旦前一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/orphan-block" style="color: #2c6fad; text-decoration-line: none;" title="Blocks whose parent block has not been processed by the local node, so they can't be fully validated yet.">孤岛块</a>的父节点被验证，它将验证前一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/orphan-block" style="color: #2c6fad; text-decoration-line: none;" title="Blocks whose parent block has not been processed by the local node, so they can't be fully validated yet.">孤儿块</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1409"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/headers-first-sync" style="color: #2c6fad; text-decoration-line: none;" title="Synchronizing the block chain by downloading block headers before downloading the full blocks.">首标</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>通过总是使用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getheaders" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to request a range of block headers"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getheaders</code>消息请求</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">块头</a>，然后使用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getdata" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to request one or more transactions, blocks, or merkle blocks"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getdata</code>消息请求</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>。</span><span class="yiyi-st" id="yiyi-1410">广播<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>将发送包含所有<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">块头</a>（最多2,000个）的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#headers" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message containing one or more block headers"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">头</code>消息</a>，认为下载<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>需要到达<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/header-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of block headers with each header linking to the header that preceded it; the most-difficult-to-recreate chain is the best header chain">最佳头链</a>的尖端；每个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">头</a>将指向其父节点，因此当下载<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>收到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#block" style="color: #2c6fad; text-decoration-line: none;" title="The P2P network message which sends a serialized block"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">块</code>消息</a>时，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>不应该是<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/orphan-block" style="color: #2c6fad; text-decoration-line: none;" title="Blocks whose parent block has not been processed by the local node, so they can't be fully validated yet.">孤儿块</a>&nbsp;- 所有的父节点应该是已知的（即使它们尚未被验证）。</span><span class="yiyi-st" id="yiyi-1411">尽管如此，在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#block" style="color: #2c6fad; text-decoration-line: none;" title="The P2P network message which sends a serialized block"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">块</code>消息</a>中收到的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>是<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/orphan-block" style="color: #2c6fad; text-decoration-line: none;" title="Blocks whose parent block has not been processed by the local node, so they can't be fully validated yet.">孤立块</a>，一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/headers-first-sync" style="color: #2c6fad; text-decoration-line: none;" title="Synchronizing the block chain by downloading block headers before downloading the full blocks.">头-first</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>将立即丢弃。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1412">然而，孤儿丢弃确实意味着<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/headers-first-sync" style="color: #2c6fad; text-decoration-line: none;" title="Synchronizing the block chain by downloading block headers before downloading the full blocks.">首部</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">节点</a>将忽略中的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">矿工</a>发送的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/orphan-block" style="color: #2c6fad; text-decoration-line: none;" title="Blocks whose parent block has not been processed by the local node, so they can't be fully validated yet.">孤儿块</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-unsolicited-block-push" style="color: #2c6fad; text-decoration-line: none;" title="When a miner sends a block message without sending an inv message first">未经请求的块推</a>。</span></div>
<h3 class=" anchorAf" id="transaction-broadcasting" style="color: #383838; font-size: 20.8px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-1413">交易广播</span></h3>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_p2p_network.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-1414"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_p2p_network.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_p2p_network.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_p2p_network.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1415">为了将事务发送到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体</a>，发送<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#inv" style="color: #2c6fad; text-decoration-line: none;" title="A P2P protocol message used to send inventories of transactions and blocks known to the transmitting peer"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">inv</code>消息</a>。</span><span class="yiyi-st" id="yiyi-1416">如果接收到<code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getdata</code>响应消息，则使用<code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">tx</code>发送事务。</span><span class="yiyi-st" id="yiyi-1417">接收此事务的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体</a>也以相同的方式转发该事务，因为它是一个有效的事务。</span></div>
<h4 class=" anchorAf" id="memory-pool" style="color: #383838; font-size: 17.6px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-1418">内存池</span></h4>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_p2p_network.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-1419"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_p2p_network.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_p2p_network.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_p2p_network.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1420">完整的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体</a>可以跟踪有可能被包含在下一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>中的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/confirmation-score" style="color: #2c6fad; text-decoration-line: none;" title="A score indicating the number of blocks on the best block chain that would need to be modified to remove or modify a particular transaction. A confirmed transaction has a confirmation score of one or higher.">未确认事务</a>。</span><span class="yiyi-st" id="yiyi-1421">这对于<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">矿工</a>谁将真正<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">我的某些或所有这些事务</a>至关重要，但对于希望跟踪的任何<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体</a>也是有用的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/confirmation-score" style="color: #2c6fad; text-decoration-line: none;" title="A score indicating the number of blocks on the best block chain that would need to be modified to remove or modify a particular transaction. A confirmed transaction has a confirmation score of one or higher.">未确认的事务</a>，例如<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体</a>将<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/confirmation-score" style="color: #2c6fad; text-decoration-line: none;" title="A score indicating the number of blocks on the best block chain that would need to be modified to remove or modify a particular transaction. A confirmed transaction has a confirmation score of one or higher.">未确认的事务</a>信息提供给<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/simplified-payment-verification" style="color: #2c6fad; text-decoration-line: none;" title="A method for verifying if particular transactions are included in a block without downloading the entire block. The method is used by some lightweight Bitcoin clients.">SPV客户端</a>。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1422">因为<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/confirmation-score" style="color: #2c6fad; text-decoration-line: none;" title="A score indicating the number of blocks on the best block chain that would need to be modified to remove or modify a particular transaction. A confirmed transaction has a confirmation score of one or higher.">未确认的事务</a>在Bitcoin中没有永久状态，Bitcoin Core将它们存储在非持久性内存中，称为内存池或记忆库。</span><span class="yiyi-st" id="yiyi-1423">当<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体</a>关闭时，除了<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis.">钱包</a>存储的任何事务外，其内存池将丢失。</span><span class="yiyi-st" id="yiyi-1424">这意味着从未开始的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/confirmation-score" style="color: #2c6fad; text-decoration-line: none;" title="A score indicating the number of blocks on the best block chain that would need to be modified to remove or modify a particular transaction. A confirmed transaction has a confirmation score of one or higher.">未确认的事务</a>趋向于从<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>缓慢消失，因为<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体</a>重新启动，或者当它们清除一些事务以在内存中腾出空间为他人。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1425">开始进入<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>的事务可能会添加到内存池中。<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/stale-block" style="color: #2c6fad; text-decoration-line: none;" title="Blocks which were successfully mined but which aren't included on the current best block chain, likely because some other block at the same height had its chain extended first."></a></span><span class="yiyi-st" id="yiyi-1426">如果替换<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>包含它们，这些重新添加的事务可能几乎立即从池中重新删除。</span><span class="yiyi-st" id="yiyi-1427">在Bitcoin Core中是这样，它从链中逐个删除<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/stale-block" style="color: #2c6fad; text-decoration-line: none;" title="Blocks which were successfully mined but which aren't included on the current best block chain, likely because some other block at the same height had its chain extended first.">陈旧块</a>，从尖端（最高<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>）开始。</span><span class="yiyi-st" id="yiyi-1428">当每个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>被删除时，其事务将被添加回内存池。</span><span class="yiyi-st" id="yiyi-1429">在删除所有<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/stale-block" style="color: #2c6fad; text-decoration-line: none;" title="Blocks which were successfully mined but which aren't included on the current best block chain, likely because some other block at the same height had its chain extended first.">过期块</a>之后，替换<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>逐个添加到链中，以新提示结尾。</span><span class="yiyi-st" id="yiyi-1430">当添加每个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>时，它确认的任何事务都将从内存池中删除。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1431"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/simplified-payment-verification" style="color: #2c6fad; text-decoration-line: none;" title="A method for verifying if particular transactions are included in a block without downloading the entire block. The method is used by some lightweight Bitcoin clients.">SPV客户端</a>没有内存池，因为它们不会中继事务。</span><span class="yiyi-st" id="yiyi-1432">他们无法独立验证交易尚未包含在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>中，并且仅支持<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/unspent-transaction-output" style="color: #2c6fad; text-decoration-line: none;" title="An Unspent Transaction Output (UTXO) that can be spent as an input in a new transaction.">UTXO</a>，因此他们无法知道哪些交易有资格被包含在下一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>中。</span></div>
<h3 class=" anchorAf" id="misbehaving-nodes" style="color: #383838; font-size: 20.8px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-1433">行为不端的节点</span></h3>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_p2p_network.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-1434"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_p2p_network.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_p2p_network.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_p2p_network.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1435">请注意，对于这两种类型的广播，都有机制来惩罚通过发送虚假信息占用带宽和计算资源的行为不正确的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对方</a>。</span><span class="yiyi-st" id="yiyi-1436">如果<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/node" style="color: #2c6fad; text-decoration-line: none;" title="A computer that connects to the Bitcoin network.">对等体</a>在<code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">-banscore =＆lt； n＆gt；</code>阈值以上获得一个banscore，他将被禁止由<code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">-bantime = n&gt;</code>，默认值为86,400（24小时）。</span></div>
<h3 class=" anchorAf" id="alerts" style="color: #383838; font-size: 20.8px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-1437">警报</span></h3>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_p2p_network.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-1438"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_p2p_network.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_p2p_network.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_p2p_network.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1439"><em>在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/release/v0.13.0" style="color: #2c6fad; text-decoration-line: none;">Bitcoin Core 0.13.0</a></em>中删除</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1440">Bitcoin Core的早期版本允许开发人员和值得信赖的社区成员发布<a href="https://bitcoin.org/en/alerts" style="color: #2c6fad; text-decoration-line: none;">比特币警报</a>以通知用户关键的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>范围的问题。</span><span class="yiyi-st" id="yiyi-1441">此消息系统<a href="https://bitcoin.org/en/alert/2016-11-01-alert-retirement" style="color: #2c6fad; text-decoration-line: none;">已在Bitcoin Core v0.13.0中退役</a>但是，内部警报，分区检测警告和<code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">-alertnotify</code>选项功能仍然存在。</span></div>
<h2 class=" anchorAf" id="mining" style="color: #383838; font-family: Ubuntu, sans-serif; font-size: 24px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-1442">挖矿</span></h2>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_mining.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-1443"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_mining.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_mining.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_mining.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1444"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">挖矿</a>向<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain.">区块链</a>添加新的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">区块</a>，使交易历史难以修改。</span><span class="yiyi-st" id="yiyi-1445">当前<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">挖矿</a>&nbsp;有两种形式：</span></div>
<ul style="margin-left: 0px; padding-left: 20px;">
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1446"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-reward" style="color: #2c6fad; text-decoration-line: none;" title="The amount that miners may claim as a reward for creating a block. Equal to the sum of the block subsidy (newly available satoshis) plus the transactions fees paid by transactions included in the block."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/transaction-fee" style="color: #2c6fad; text-decoration-line: none;" title="The amount remaining when the value of all outputs in a transaction are subtracted from all inputs in a transaction; the fee is paid to the miner who includes that transaction in a block."></a>单独挖矿，就是矿工试图单独生成区块，块的收益和交易费用完全归他自己，允许他收到较大的分成收益（支付之间需要更长时间）。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1447"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a>矿池挖矿，其中矿池资源和其他矿工一块能更快的找到区块，矿池里的矿工共享收益，大致于它们共享的哈希运算能力有关，它们获得较小的分成收益（支付之间所需时间更短）。</span></div>
</li>
</ul>
<h3 class=" anchorAf" id="solo-mining" style="color: #383838; font-size: 20.8px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-1448">单独挖矿</span></h3>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_mining.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-1449"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_mining.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_mining.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_mining.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1450">如下图所示，比较典型地，独立<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">矿工</a>使用<code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">bitcoind</code>来从<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>中获取新交易。</span><span class="yiyi-st" id="yiyi-1451"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;"></code><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getblocktemplate" style="color: #2c6fad; text-decoration-line: none;"></a><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;"></code><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/public-key" style="color: #2c6fad; text-decoration-line: none;" title="The public portion of a keypair which can be used to verify signatures made with the private portion of the keypair."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/coinbase-transaction" style="color: #2c6fad; text-decoration-line: none;" title="The first transaction in a block. Always created by a miner, it includes a single coinbase."></a>他们的挖矿软件周期性地使用getblocktemplate轮询bitcoind，以提供币基交易所需要发送的新的交易列表和公钥。</span></div>
<div style="line-height: 1.5em;">
<img alt="Solo Bitcoin Mining" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-solo-mining-overview.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1452"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">采矿</a>软件使用模板（如下所述）构建一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>，并创建一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">块头</a>。</span><span class="yiyi-st" id="yiyi-1453">然后它将80字节<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">块头</a>以及<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/nbits" style="color: #2c6fad; text-decoration-line: none;" title="The target is the threshold below which a block header hash must be in order for the block to valid, and nBits is the encoded form of the target threshold as it appears in the block header.">目标阈值</a>（<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/difficulty" style="color: #2c6fad; text-decoration-line: none;" title="How difficult it is to find a block relative to the difficulty of finding the easiest possible block. The easiest possible block has a proof-of-work difficulty of 1.">难度设置）</a>一起发送到其<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">挖矿</a>硬件（ASIC）。</span><span class="yiyi-st" id="yiyi-1454"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">挖矿</a>硬件遍历<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">块头</a>nonce的每个可能值，并生成相应的哈希值。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1455"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/merkle-root" style="color: #2c6fad; text-decoration-line: none;" title="The root node of a merkle tree, a descendant of all the hashed pairs in the tree. Block headers must include a valid merkle root descended from all transactions in that block."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/coinbase" style="color: #2c6fad; text-decoration-line: none;" title="A special field used as the sole input for coinbase transactions. The coinbase allows claiming the block reward and provides up to 100 bytes for arbitrary data."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/coinbase-transaction" style="color: #2c6fad; text-decoration-line: none;" title="The first transaction in a block. Always created by a miner, it includes a single coinbase."></a>若没有哈希值低于阈值，挖矿硬件就从挖矿软件那得到一个具有新的merkle根的更新过的块头，这个新块头以添加额外的nonce数据到币基交易的币基字段方式创建。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1456"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/nbits" style="color: #2c6fad; text-decoration-line: none;" title="The target is the threshold below which a block header hash must be in order for the block to valid, and nBits is the encoded form of the target threshold as it appears in the block header."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a>另一方面，如果发现一个哈希低于目标阈值，挖矿硬件会返回一个具有成功nonce的块头给挖矿软件。</span><span class="yiyi-st" id="yiyi-1457"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain."></a><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;"></code><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks"></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain."></a>挖矿软件组合块头和块并把这个完整的块发送给bitcoind，让其在网络中广播以添加到区块链上。</span></div>
<h3 class=" anchorAf" id="pool-mining" style="color: #383838; font-size: 20.8px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-1458">矿池挖矿</span></h3>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_mining.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-1459"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_mining.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_mining.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_mining.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1460"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a>矿池挖矿遵循类似的工作流程，如下所示，它允许矿池管理者根据矿工的工作完成情况支付给他们。</span><span class="yiyi-st" id="yiyi-1461"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks"></a><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;"></code>矿池使用bitcoin的从网路中获取新的交易。</span><span class="yiyi-st" id="yiyi-1462">使用下面讨论的方法之一，每个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">矿工的</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">挖矿</a>软件连接到矿池，并请求构建<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">块头</a>所需的信息。</span></div>
<div style="line-height: 1.5em;">
<img alt="Pooled Bitcoin Mining" src="http://usyiyi.cn/documents/bitcoin/img/dev/en-pooled-mining-overview.svg" style="border: 0px; max-width: 100%;" /></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1463"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/nbits" style="color: #2c6fad; text-decoration-line: none;" title="The target is the threshold below which a block header hash must be in order for the block to valid, and nBits is the encoded form of the target threshold as it appears in the block header."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/difficulty" style="color: #2c6fad; text-decoration-line: none;" title="How difficult it is to find a block relative to the difficulty of finding the easiest possible block. The easiest possible block has a proof-of-work difficulty of 1."></a>在矿池挖矿中，矿池设定目标阈值设置为比网络难度高几个数量级(更简单)。</span><span class="yiyi-st" id="yiyi-1464"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/nbits" style="color: #2c6fad; text-decoration-line: none;" title="The target is the threshold below which a block header hash must be in order for the block to valid, and nBits is the encoded form of the target threshold as it appears in the block header."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a>这导致挖矿硬件返回很多不适合区块链需要的哈希值的块头，但是此哈希值却低于矿池的目标阈值，来证明矿工参与了一部分求解合适哈希值的工作。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1465"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/nbits" style="color: #2c6fad; text-decoration-line: none;" title="The target is the threshold below which a block header hash must be in order for the block to valid, and nBits is the encoded form of the target threshold as it appears in the block header."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/merkle-root" style="color: #2c6fad; text-decoration-line: none;" title="The root node of a merkle tree, a descendant of all the hashed pairs in the tree. Block headers must include a valid merkle root descended from all transactions in that block."></a>然后，矿工发送给矿池一个信息副本，矿池需要验证块头的哈希值低于目标，块头的merkle根所链接的交易块是满足矿池的目标的。</span><span class="yiyi-st" id="yiyi-1466">（这通常意味着<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/coinbase-transaction" style="color: #2c6fad; text-decoration-line: none;" title="The first transaction in a block. Always created by a miner, it includes a single coinbase.">币基交易</a>必须支付给矿池。）</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1467"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a>矿工发送到矿池的信息成为共享信息，以此证明矿工参与了部分工作。</span><span class="yiyi-st" id="yiyi-1468"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks"></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/nbits" style="color: #2c6fad; text-decoration-line: none;" title="The target is the threshold below which a block header hash must be in order for the block to valid, and nBits is the encoded form of the target threshold as it appears in the block header."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks"></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-chain" style="color: #2c6fad; text-decoration-line: none;" title="A chain of blocks with each block referencing the block that preceded it. The most-difficult-to-recreate chain is the best block chain."></a>矿池偶尔会接收到一些共享信息也低于网络目标阈值，那矿池就会发送它们到网络上以便能添加到区块链上。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1469"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-reward" style="color: #2c6fad; text-decoration-line: none;" title="The amount that miners may claim as a reward for creating a block. Equal to the sum of the block subsidy (newly available satoshis) plus the transactions fees paid by transactions included in the block."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/transaction-fee" style="color: #2c6fad; text-decoration-line: none;" title="The amount remaining when the value of all outputs in a transaction are subtracted from all inputs in a transaction; the fee is paid to the miner who includes that transaction in a block."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a>挖矿的区块奖励和交易费支付给矿池。</span><span class="yiyi-st" id="yiyi-1470"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a>矿池根据矿工的贡献支付一部分收益给个体矿工。</span><span class="yiyi-st" id="yiyi-1471">例如，如果<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">矿</a>池的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/nbits" style="color: #2c6fad; text-decoration-line: none;" title="The target is the threshold below which a block header hash must be in order for the block to valid, and nBits is the encoded form of the target threshold as it appears in the block header.">目标阈值</a>比<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/nbits" style="color: #2c6fad; text-decoration-line: none;" title="The target is the threshold below which a block header hash must be in order for the block to valid, and nBits is the encoded form of the target threshold as it appears in the block header.">目标阈值</a>低100倍，则100股将需要平均生成以创建成功的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>，所以<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">矿</a>池可以为每个收益者支付1/100。</span><span class="yiyi-st" id="yiyi-1472">不同的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">矿</a>池使用基于这种基本共享系统的不同的奖励分配方案。</span></div>
<h3 class=" anchorAf" id="block-prototypes" style="color: #383838; font-size: 20.8px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-1473">块原型</span></h3>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_mining.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-1474"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_mining.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_mining.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_mining.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1475"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work."></a>无论单独挖矿和矿池挖矿,挖矿软件都需要获取必要信息来构造块头.</span><span class="yiyi-st" id="yiyi-1476">本小节以线性方式描述了信息的传输和使用。</span><span class="yiyi-st" id="yiyi-1477">然而，在实际实现中，使用并行线程和队列来保持ASIC哈希运算以最大能力工作。</span></div>
<h4 class=" anchorAf" id="getwork-rpc" style="color: #383838; font-size: 17.6px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-1478">网络RPC</span></h4>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_mining.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-1479"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_mining.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_mining.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_mining.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1480">最简单和最早的方法是现在已经弃用的Bitcoin Core&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getwork" style="color: #2c6fad; text-decoration-line: none;"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getwork</code>&nbsp;RPC</a>，它为<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">矿工</a>直接构建了一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">块头</a>。</span><span class="yiyi-st" id="yiyi-1481">由于<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">标头</a>仅包含一个4字节的随机数，对于大约4个gigahash，许多现代<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">矿工</a>需要制作数十或数百个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getwork" style="color: #2c6fad; text-decoration-line: none;"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getwork</code></a>请求一秒。</span><span class="yiyi-st" id="yiyi-1482">独立<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">矿工</a>仍然可以在v0.9.5或更低版本上使用<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getwork" style="color: #2c6fad; text-decoration-line: none;"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getwork</code></a>，但是今天的大多数矿池都会阻止或禁止使用。</span></div>
<h4 class=" anchorAf" id="getblocktemplate-rpc" style="color: #383838; font-size: 17.6px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-1483">getblocktemplate RPC</span></h4>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_mining.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-1484"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_mining.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_mining.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_mining.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1485">一个改进的方法是Bitcoin Core&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getblocktemplate" style="color: #2c6fad; text-decoration-line: none;"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getblocktemplate</code>&nbsp;RPC</a>。</span><span class="yiyi-st" id="yiyi-1486">这为<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">挖矿</a>软件提供了更多信息：</span></div>
<ol style="margin-left: 0px; padding-left: 20px;">
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1487"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/coinbase-transaction" style="color: #2c6fad; text-decoration-line: none;" title="The first transaction in a block. Always created by a miner, it includes a single coinbase."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;"></code><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/wallet" style="color: #2c6fad; text-decoration-line: none;" title="Software that stores private keys and monitors the block chain (sometimes as a client of a server that does the processing) to allow users to spend and receive satoshis."></a>构造一个支付给矿池或独立矿工的bitcoind钱包的币基交易所需要的信息。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1488"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;"></code><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a>bitcoind或矿池所推荐的交易记录的完整备份，可以用于挖矿软件检查交易，可选地增加额外交易和删除不必要的交易。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1489">构建下一个<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">块头</a>所需的其他信息：<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>版本，以前的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain.">块</a>散列，以及比特（<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/nbits" style="color: #2c6fad; text-decoration-line: none;" title="The target is the threshold below which a block header hash must be in order for the block to valid, and nBits is the encoded form of the target threshold as it appears in the block header.">目标</a>）。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1490"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">矿</a>池的当前<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/nbits" style="color: #2c6fad; text-decoration-line: none;" title="The target is the threshold below which a block header hash must be in order for the block to valid, and nBits is the encoded form of the target threshold as it appears in the block header.">目标阈值</a>用于接受分成收益。</span><span class="yiyi-st" id="yiyi-1491">（对于独立<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">矿工</a>来说，这就是<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks">网络</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/nbits" style="color: #2c6fad; text-decoration-line: none;" title="The target is the threshold below which a block header hash must be in order for the block to valid, and nBits is the encoded form of the target threshold as it appears in the block header.">目标</a>。）</span></div>
</li>
</ol>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1492"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/coinbase" style="color: #2c6fad; text-decoration-line: none;" title="A special field used as the sole input for coinbase transactions. The coinbase allows claiming the block reward and provides up to 100 bytes for arbitrary data."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/merkle-tree" style="color: #2c6fad; text-decoration-line: none;" title="A tree constructed by hashing paired data (the leaves), then pairing and hashing the results until a single hash remains, the merkle root. In Bitcoin, the leaves are almost always transactions from a single block."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/merkle-root" style="color: #2c6fad; text-decoration-line: none;" title="The root node of a merkle tree, a descendant of all the hashed pairs in the tree. Block headers must include a valid merkle root descended from all transactions in that block."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work."></a>使用收到的交易记录，挖矿软件想币基额外nonce字段里面添加nonce值，并转化所有的交易到一个merkle树，这棵树有一个可以在块头使用的merkle根。</span><span class="yiyi-st" id="yiyi-1493"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/merkle-tree" style="color: #2c6fad; text-decoration-line: none;" title="A tree constructed by hashing paired data (the leaves), then pairing and hashing the results until a single hash remains, the merkle root. In Bitcoin, the leaves are almost always transactions from a single block."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/merkle-root" style="color: #2c6fad; text-decoration-line: none;" title="The root node of a merkle tree, a descendant of all the hashed pairs in the tree. Block headers must include a valid merkle root descended from all transactions in that block."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work."></a>每当额外的nonce字段需要改变时，挖矿软件都会重建merkle树的必要部分，并更新时间及块头中的merkle根字段。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1494">像所有<code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">bitcoind</code>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#remote-procedure-calls-rpcs" style="color: #2c6fad; text-decoration-line: none;">RPC</a>一样，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getblocktemplate" style="color: #2c6fad; text-decoration-line: none;"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getblocktemplate</code></a>也是通过HTTP发送的。</span><span class="yiyi-st" id="yiyi-1495">为了确保最大工作量，大多数<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">矿工</a>使用<a href="https://en.wikipedia.org/wiki/Push_technology#Long_polling" style="color: #2c6fad; text-decoration-line: none;">HTTP longpoll</a>可以始终保持<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getblocktemplate" style="color: #2c6fad; text-decoration-line: none;"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getblocktemplate</code></a>请求打开。</span><span class="yiyi-st" id="yiyi-1496"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getblocktemplate" style="color: #2c6fad; text-decoration-line: none;"></a><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;"></code><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks"></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a>这允许矿池，一旦矿工在P2P中发布一个新快，尽快推送一个新的getblocktemplate给矿工或矿池希望发送更多的交易记录给挖矿软件。</span></div>
<h4 class=" anchorAf" id="stratum" style="color: #383838; font-size: 17.6px; margin-bottom: 0px; margin-top: 40px; position: relative;">
<span class="yiyi-st" id="yiyi-1497">层次挖矿协议</span></h4>
<div class="subhead-links sourcefile" data-sourcefile="_includes/devdoc/guide_mining.md" style="font-size: 13.6px; padding-top: 7px;">
<span class="yiyi-st" id="yiyi-1498"><a href="https://github.com/bitcoin-dot-org/bitcoin.org/edit/master/_includes/devdoc/guide_mining.md" style="color: #2c6fad; text-decoration-line: none;">编辑</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/commits/master/_includes/devdoc/guide_mining.md" style="color: #2c6fad; text-decoration-line: none;">历史</a>&nbsp;|&nbsp;<a href="https://github.com/bitcoin-dot-org/bitcoin.org/issues/new?body=Source%20File%3A%20_includes/devdoc/guide_mining.md%0A%0A" style="color: #2c6fad; text-decoration-line: none;">报告问题</a>&nbsp;|&nbsp;<a href="http://usyiyi.cn/documents/bitcoin/en/development#devcommunities" style="color: #2c6fad; text-decoration-line: none;">讨论 T3&gt;</a></span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1499"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getblocktemplate" style="color: #2c6fad; text-decoration-line: none;"><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;">getblocktemplate</code></a>的广泛使用的替代方法是<a href="http://mining.bitcoin.cz/stratum-mining" style="color: #2c6fad; text-decoration-line: none;">层次挖掘协议</a>。</span><span class="yiyi-st" id="yiyi-1500">层次挖矿协议专注于提供给<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">矿工</a>自己构建<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work.">块头</a>所需的最小信息：</span></div>
<ol style="margin-left: 0px; padding-left: 20px;">
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1501">构建支付矿池的<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/coinbase-transaction" style="color: #2c6fad; text-decoration-line: none;" title="The first transaction in a block. Always created by a miner, it includes a single coinbase.">币基交易</a>所需的信息。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1502"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/merkle-tree" style="color: #2c6fad; text-decoration-line: none;" title="A tree constructed by hashing paired data (the leaves), then pairing and hashing the results until a single hash remains, the merkle root. In Bitcoin, the leaves are almost always transactions from a single block."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/merkle-root" style="color: #2c6fad; text-decoration-line: none;" title="The root node of a merkle tree, a descendant of all the hashed pairs in the tree. Block headers must include a valid merkle root descended from all transactions in that block."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/coinbase-transaction" style="color: #2c6fad; text-decoration-line: none;" title="The first transaction in a block. Always created by a miner, it includes a single coinbase."></a>当币基交易更新一个新的额外的nonce值时候需要再求哈希去创建一个新的merkle根的merkle树的一部分。</span><span class="yiyi-st" id="yiyi-1503"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/merkle-tree" style="color: #2c6fad; text-decoration-line: none;" title="A tree constructed by hashing paired data (the leaves), then pairing and hashing the results until a single hash remains, the merkle root. In Bitcoin, the leaves are almost always transactions from a single block.">merkle树</a>的其他部分（如果有的话）可以不发送，基于当前交易的规模可以有效限制发送的数据量至多约1千字节。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1504"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/merkle-root" style="color: #2c6fad; text-decoration-line: none;" title="The root node of a merkle tree, a descendant of all the hashed pairs in the tree. Block headers must include a valid merkle root descended from all transactions in that block."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain."></a>所有其他构造下一块的块头所需要的非markle根信息。</span></div>
</li>
<li style="line-height: 1.5em; margin: 10px 0px;"><div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1505"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">采矿</a>池的当前<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/nbits" style="color: #2c6fad; text-decoration-line: none;" title="The target is the threshold below which a block header hash must be in order for the block to valid, and nBits is the encoded form of the target threshold as it appears in the block header.">目标阈值</a>用于接受分成收益。</span></div>
</li>
</ol>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1506">收到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/coinbase-transaction" style="color: #2c6fad; text-decoration-line: none;" title="The first transaction in a block. Always created by a miner, it includes a single coinbase.">币基交易</a>，<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">挖矿</a>软件将一个nonce值添加到<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/coinbase" style="color: #2c6fad; text-decoration-line: none;" title="A special field used as the sole input for coinbase transactions. The coinbase allows claiming the block reward and provides up to 100 bytes for arbitrary data.">币基</a>额外的nonce字段中，求<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/coinbase-transaction" style="color: #2c6fad; text-decoration-line: none;" title="The first transaction in a block. Always created by a miner, it includes a single coinbase.">币基交易的哈希并添加到</a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/merkle-tree" style="color: #2c6fad; text-decoration-line: none;" title="A tree constructed by hashing paired data (the leaves), then pairing and hashing the results until a single hash remains, the merkle root. In Bitcoin, the leaves are almost always transactions from a single block.">merkle树</a>的接收部分。</span><span class="yiyi-st" id="yiyi-1507"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/merkle-root" style="color: #2c6fad; text-decoration-line: none;" title="The root node of a merkle tree, a descendant of all the hashed pairs in the tree. Block headers must include a valid merkle root descended from all transactions in that block."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work."></a>对整棵树求哈希以创建一个merkle根，树根被添加到接收到的块头里面。</span><span class="yiyi-st" id="yiyi-1508"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/coinbase-transaction" style="color: #2c6fad; text-decoration-line: none;" title="The first transaction in a block. Always created by a miner, it includes a single coinbase."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/merkle-root" style="color: #2c6fad; text-decoration-line: none;" title="The root node of a merkle tree, a descendant of all the hashed pairs in the tree. Block headers must include a valid merkle root descended from all transactions in that block."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block-header" style="color: #2c6fad; text-decoration-line: none;" title="An 80-byte header belonging to a single block which is hashed repeatedly to create proof of work."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/merkle-root" style="color: #2c6fad; text-decoration-line: none;" title="The root node of a merkle tree, a descendant of all the hashed pairs in the tree. Block headers must include a valid merkle root descended from all transactions in that block."></a>每当额外的nonce字段需要改变，挖矿软件对币基交易更新和再求哈希，重建merkle根，更新块头的markle根字段。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1509"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getblocktemplate" style="color: #2c6fad; text-decoration-line: none;"></a><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;"></code><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a>与getblocktemplate不同，使用Stratum的矿工无法检查或添加交易到他们目前挖矿的区块。</span><span class="yiyi-st" id="yiyi-1510"><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-reference#getblocktemplate" style="color: #2c6fad; text-decoration-line: none;"></a><code class="highlighter-rouge" style="background-color: whitesmoke; border-radius: 3px; border: 1px solid rgb(204, 204, 204); font-family: monospace, serif; font-size: 13.6px; padding: 2px 4px; white-space: nowrap;"></code><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/block" style="color: #2c6fad; text-decoration-line: none;" title="One or more transactions prefaced by a block header and protected by proof of work. Blocks are the data stored on the block chain."></a><a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/developer-guide#term-network" style="color: #2c6fad; text-decoration-line: none;" title="The Bitcoin P2P network which broadcasts transactions and blocks"></a>与getblocktemplate不同，Stratum协议直接使用双向TCP套接字，所以矿工当一个新块被广播到P2P网络中时候不需要使用HTTP longpoll来确保它们立刻从矿池获取更新。</span></div>
<div style="line-height: 1.5em;">
<span class="yiyi-st" id="yiyi-1511"><strong>资源：</strong>GPLv3许可的<a href="https://github.com/luke-jr/bfgminer" style="color: #2c6fad; text-decoration-line: none;">BFGMiner</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">采矿软件和AGPLv3许可的</a><a href="https://github.com/luke-jr/eloipool" style="color: #2c6fad; text-decoration-line: none;">Eloipool</a>&nbsp;<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">采矿</a>池软件在<a class="auto-link" href="http://usyiyi.cn/documents/bitcoin/en/glossary/mining" style="color: #2c6fad; text-decoration-line: none;" title="Mining is the act of creating valid Bitcoin blocks, which requires demonstrating proof of work, and miners are devices that mine or people who own those devices.">矿工</a>和池中广泛使用。</span><span class="yiyi-st" id="yiyi-1512">MIT许可的<a href="https://github.com/bitcoin/libblkmaker" style="color: #2c6fad; text-decoration-line: none;">libblkmaker</a>&nbsp;C库和<a href="https://gitorious.org/bitcoin/python-blkmaker" style="color: #2c6fad; text-decoration-line: none;">python-blkmaker</a>库可以为您的程序解释GetBlockTemplate。</span></div>
</div>
</div>
</div>
