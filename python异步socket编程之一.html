<span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">异步网络能极大地提高程序的并行处理能力,所以写了一个专题来总结python中的异步通信。</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><br />
<h2 style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 2.15em; font-weight: 100; line-height: 1.1; margin: 0.8em 0px; padding: 0px;">
<a href="https://www.blogger.com/null" name="t0" style="background: transparent; box-sizing: border-box; color: #4fa1db; margin: 0px; outline: 0px; padding: 0px;"></a>一、同步client与同步server的通信</h2>
<h3 style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 1.7em; font-weight: 100; line-height: 1.1; margin: 0.8em 0px; padding: 0px;">
<a href="https://www.blogger.com/null" name="t1" style="background: transparent; box-sizing: border-box; color: #4fa1db; margin: 0px; outline: 0px; padding: 0px;"></a>1.1. 《python的socket通信实例》中的例子</h3>
<span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">1. TCP server端代码</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">#!/usr/bin/env python</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">#</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;"># -*- coding:utf-8 -*-</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;"># File: sync_socket_server.py</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">#</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">from socket import *</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">from time import ctime</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">HOST = ''</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">PORT = 21567</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">BUFSIZE=1024</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">ADDR=(HOST, PORT)</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">tcpSrvSock=socket(AF_INET, SOCK_STREAM)</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">tcpSrvSock.bind(ADDR)</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">tcpSrvSock.listen(5)</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">while True:</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; print 'waiting for connection ...'</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; tcpCliSock,addr = tcpSrvSock.accept()</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; print '... connected from:', addr</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; while True:</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; data=tcpCliSock.recv(BUFSIZE)</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; if not data:</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; tcpCliSock.send('[%s] %s'%(ctime(), data))</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; print [ctime()],':',data</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">tcpCliSock.close()</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">tcpSrvSock.close()</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">2. TCP client端代码</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">#!/usr/bin/env python</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">#</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;"># -*- coding:utf-8 -*-</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;"># File: sync_socket_client.py</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">from socket import *</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">HOST='localhost'</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">PORT=21567</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">BUFSIZE=1024</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">ADDR=(HOST, PORT)</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">tcpCliSock=socket(AF_INET, SOCK_STREAM)</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">tcpCliSock.connect(ADDR)</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">while True:</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; data = raw_input('&gt;')</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; if not data:</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; break</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; tcpCliSock.send(data)</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; data=tcpCliSock.recv(BUFSIZE)</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; if not data:</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; break</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; print data</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">tcpCliSock.close()</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><br />
<h3 style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 1.7em; font-weight: 100; line-height: 1.1; margin: 0.8em 0px; padding: 0px;">
<a href="https://www.blogger.com/null" name="t2" style="background: transparent; box-sizing: border-box; color: #4fa1db; margin: 0px; outline: 0px; padding: 0px;"></a>2.2. 另一个例子</h3>
<span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">这个例子的链接：http://blog.csdn.net/joeblackzqq/article/details/34860379</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">一个服务端，一个客户端，而且是阻塞方式，一次只能接受一个客户端连接并通信噢。</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">客户端发送‘bye', 结束与服务端的通信，如果发送’shutdown'，服务端将会关闭自己！</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">1. 服务端代码:</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">#!/usr/bin/env python</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">#</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;"># -*- coding:utf-8 -*-</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;"># File: sync_socket_server.py</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">#</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">from socket import *</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">from time import ctime</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">HOST = ''</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">PORT = 21567</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">BUFSIZE = 1024</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">ADDR = (HOST, PORT)</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">tcpSerSock = socket(AF_INET, SOCK_STREAM)</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">tcpSerSock.bind(ADDR)</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">tcpSerSock.listen(5)</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">quit = False</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">shutdown = False</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">while True:</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; print('waiting for connection...')</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; tcpCliSock, addr = tcpSerSock.accept()</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; print('...connected from: ', addr)</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; while True:</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; data = tcpCliSock.recv(BUFSIZE)</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; data = data.decode('utf8')</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; if not data:</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; ss = '[%s] %s' %(ctime(), data)</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; tcpCliSock.send(ss.encode('utf8'))</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; print(ss)</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; if data == 'bye':</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; quit = True</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; elif data == 'shutdown':</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shutdown = True</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; print('Bye-bye: [%s: %d]' %(addr[0], addr[1]))</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; tcpCliSock.close()</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; if shutdown:</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; break</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">tcpSerSock.close()</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">print('Server has been')</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">2. 客户端代码</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">#!/usr/bin/env python</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">#</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;"># -*- coding:utf-8 -*-</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;"># File: sync_socket_client.py</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">#</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">from socket import *</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">HOST = 'localhost'</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">PORT = 21567</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">BUFSIZE = 1024</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">ADDR = (HOST, PORT)</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">tcpCliSock = socket(AF_INET, SOCK_STREAM)</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">tcpCliSock.connect(ADDR)</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">while True:</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; data = input('&gt;')</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; if not data:</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; continue</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; print('input data: [%s]' %data)</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; tcpCliSock.send(data.encode('utf8'))</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; rdata = tcpCliSock.recv(BUFSIZE)</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; if not rdata:</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp;break</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; print(rdata.decode('utf8'))</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; if data == 'bye' or data == 'shutdown':</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; break</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">tcpCliSock.close()</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><br />
<h2 style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 2.15em; font-weight: 100; line-height: 1.1; margin: 0.8em 0px; padding: 0px;">
<a href="https://www.blogger.com/null" name="t3" style="background: transparent; box-sizing: border-box; color: #4fa1db; margin: 0px; outline: 0px; padding: 0px;"></a>二、同步client与异步server的通信</h2>
<span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">1. 服务端代码</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">#!/usr/bin/env python</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">#</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;"># -*- coding:utf-8 -*-</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;"># File: async_socket_server.py</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">#</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">import socket</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">import threading</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">import SocketServer</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">class ThreadedTCPRequestHandler(SocketServer.BaseRequestHandler):</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; def handle(self):</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; data = self.request.recv(1024)</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; cur_thread = threading.current_thread()</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; response = "{}: {}".format(cur_thread.name, data)</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; self.request.sendall(response)</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">class ThreadedTCPServer(SocketServer.ThreadingMixIn, SocketServer.TCPServer):</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; pass</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">if __name__ == "__main__":</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; # Port 0 means to select an arbitrary unused port</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; HOST, PORT = "localhost", 0</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; server = ThreadedTCPServer((HOST, PORT), ThreadedTCPRequestHandler)</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; ip, port = server.server_address</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; # Start a thread with the server -- that thread will then start one</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; # more thread for each request</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; server_thread = threading.Thread(target=server.serve_forever)</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; # Exit the server thread when the main thread terminates</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; server_thread.daemon = True</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; server_thread.start()</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; print "Server loop running in thread:", server_thread.name</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; server.serve_forever()</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; #server.shutdown()</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">2. 客户端代码</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">#!/usr/bin/env python</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">#</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;"># -*- coding:utf-8 -*-</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;"># File: sync_socket_client.py</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">#</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">import socket</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">import threading</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">import SocketServer</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">def client(ip, port, message):</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; sock.connect((ip, port))</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; try:</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; sock.sendall(message)</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; response = sock.recv(1024)</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; print "Received: {}".format(response)</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; finally:</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; sock.close()</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">if __name__ == "__main__":</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; # Port 0 means to select an arbitrary unused port</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; HOST, PORT = "localhost", 0</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; client(ip, port, "Hello World 1")</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; client(ip, port, "Hello World 2")</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; client(ip, port, "Hello World 3")</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">3. 多线程客户端代码</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">为了提高并行度，可以使用多线程方式调用</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">#!/usr/bin/env python</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">#</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;"># -*- coding:utf-8 -*-</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;"># File: sync_socket_client.py</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">#</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">import socket</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">import threading</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">import SocketServer</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">def client(ip, port, message):</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; sock.connect((ip, port))</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; try:</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; sock.sendall(message)</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; response = sock.recv(1024)</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; print "Received: {}".format(response)</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; finally:</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; sock.close()</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">if __name__ == "__main__":</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; # Port 0 means to select an arbitrary unused port</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; HOST, PORT = "localhost", 0</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; th1 = threading.Thread(target=client, args=(ip, port, "Hello World 1",))</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; th2 = threading.Thread(target=client, args=(ip, port, "Hello World 2",))</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; th3 = threading.Thread(target=client, args=(ip, port, "Hello World 3",))</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; th1.start()</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; th2.start()</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; th3.start()</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp;</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; th1.join()</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; th2.join()</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">&nbsp; &nbsp; th3.join()</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">4. 输出示例</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">Received: Thread-2: Hello World 1</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">Received: Thread-3: Hello World 2</span><br style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px;" /><span style="background-color: white; box-sizing: border-box; color: #454545; font-family: &quot;sans serif&quot;, tahoma, verdana, helvetica; font-size: 16px; line-height: 24px; margin: 0px; padding: 0px;">Received: Thread-4: Hello World 3</span>
<br />http://blog.csdn.net/fireroll/article/details/41826803
